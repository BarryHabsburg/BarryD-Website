<!DOCTYPE html>

<html lang="en">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>BlackScholesMerton_Model_in_Rust</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>
<style type="text/css">
    .ConsoleCommand {
    font-family: Consolas;
    width: 100%;
    background: #0C0C0C;
    color: #fff;
    border-spacing: 0;
    border-collapse: collapse;
    padding: 0;
}

.ConsoleCommand th, .ConsoleCommand tr td {
    font-family: Consolas;
    background: #0C0C0C;
    color: #fff;
    padding: 0;
    line-height: normal;
    white-space: normal;
    max-width: none;
    border: none;
}

  </style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * Mozilla scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */
[data-jp-theme-scrollbars='true'] {
  scrollbar-color: rgb(var(--jp-scrollbar-thumb-color))
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar. These selectors
 * will match lower in the tree, and so will override the above */
[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
  scrollbar-width: thin;
}

/* tiny scrollbar */

.jp-scrollbar-tiny::-webkit-scrollbar,
.jp-scrollbar-tiny::-webkit-scrollbar-corner {
  background-color: transparent;
  height: 4px;
  width: 4px;
}

.jp-scrollbar-tiny::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:horizontal {
  border-left: 0 solid transparent;
  border-right: 0 solid transparent;
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:vertical {
  border-top: 0 solid transparent;
  border-bottom: 0 solid transparent;
}

/*
 * Lumino
 */

.lm-ScrollBar[data-orientation='horizontal'] {
  min-height: 16px;
  max-height: 16px;
  min-width: 45px;
  border-top: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] {
  min-width: 16px;
  max-width: 16px;
  min-height: 45px;
  border-left: 1px solid #a0a0a0;
}

.lm-ScrollBar-button {
  background-color: #f0f0f0;
  background-position: center center;
  min-height: 15px;
  max-height: 15px;
  min-width: 15px;
  max-width: 15px;
}

.lm-ScrollBar-button:hover {
  background-color: #dadada;
}

.lm-ScrollBar-button.lm-mod-active {
  background-color: #cdcdcd;
}

.lm-ScrollBar-track {
  background: #f0f0f0;
}

.lm-ScrollBar-thumb {
  background: #cdcdcd;
}

.lm-ScrollBar-thumb:hover {
  background: #bababa;
}

.lm-ScrollBar-thumb.lm-mod-active {
  background: #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {
  height: 100%;
  min-width: 15px;
  border-left: 1px solid #a0a0a0;
  border-right: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {
  width: 100%;
  min-height: 15px;
  border-top: 1px solid #a0a0a0;
  border-bottom: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-left);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-right);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-up);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-down);
  background-size: 17px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
}

.lm-Widget.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.lm-AccordionPanel[data-orientation='horizontal'] > .lm-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  display: flex;
  flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-CommandPalette-search {
  flex: 0 0 auto;
}

.lm-CommandPalette-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}

.lm-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-CommandPalette-item {
  display: flex;
  flex-direction: row;
}

.lm-CommandPalette-itemIcon {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemContent {
  flex: 1 1 auto;
  overflow: hidden;
}

.lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-close-icon {
  border: 1px solid transparent;
  background-color: transparent;
  position: absolute;
  z-index: 1;
  right: 3%;
  top: 0;
  bottom: 0;
  margin: auto;
  padding: 7px 0;
  display: none;
  vertical-align: middle;
  outline: 0;
  cursor: pointer;
}
.lm-close-icon:after {
  content: 'X';
  display: block;
  width: 15px;
  height: 15px;
  text-align: center;
  color: #000;
  font-weight: normal;
  font-size: 12px;
  cursor: pointer;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-DockPanel {
  z-index: 0;
}

.lm-DockPanel-widget {
  z-index: 0;
}

.lm-DockPanel-tabBar {
  z-index: 1;
}

.lm-DockPanel-handle {
  z-index: 2;
}

.lm-DockPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-DockPanel-handle[data-orientation='horizontal'] {
  cursor: ew-resize;
}

.lm-DockPanel-handle[data-orientation='vertical'] {
  cursor: ns-resize;
}

.lm-DockPanel-handle[data-orientation='horizontal']:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-DockPanel-handle[data-orientation='vertical']:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

.lm-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}

.lm-DockPanel-overlay.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Menu {
  z-index: 10000;
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}

.lm-Menu-item {
  display: table-row;
}

.lm-Menu-item.lm-mod-hidden,
.lm-Menu-item.lm-mod-collapsed {
  display: none !important;
}

.lm-Menu-itemIcon,
.lm-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}

.lm-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}

.lm-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-MenuBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  list-style-type: none;
}

.lm-MenuBar-item {
  box-sizing: border-box;
}

.lm-MenuBar-itemIcon,
.lm-MenuBar-itemLabel {
  display: inline-block;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-ScrollBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-ScrollBar[data-orientation='horizontal'] {
  flex-direction: row;
}

.lm-ScrollBar[data-orientation='vertical'] {
  flex-direction: column;
}

.lm-ScrollBar-button {
  box-sizing: border-box;
  flex: 0 0 auto;
}

.lm-ScrollBar-track {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  flex: 1 1 auto;
}

.lm-ScrollBar-thumb {
  box-sizing: border-box;
  position: absolute;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-SplitPanel-child {
  z-index: 0;
}

.lm-SplitPanel-handle {
  z-index: 1;
}

.lm-SplitPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {
  cursor: ew-resize;
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {
  cursor: ns-resize;
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-TabBar[data-orientation='horizontal'] {
  flex-direction: row;
  align-items: flex-end;
}

.lm-TabBar[data-orientation='vertical'] {
  flex-direction: column;
  align-items: flex-end;
}

.lm-TabBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex: 1 1 auto;
  list-style-type: none;
}

.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {
  flex-direction: row;
}

.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {
  flex-direction: column;
}

.lm-TabBar-tab {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
  touch-action: none; /* Disable native Drag/Drop */
}

.lm-TabBar-tabIcon,
.lm-TabBar-tabCloseIcon {
  flex: 0 0 auto;
}

.lm-TabBar-tabLabel {
  flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}

.lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
}

.lm-TabBar-tab.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar-addButton.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {
  position: relative;
}

.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {
  left: 0;
  transition: left 150ms ease;
}

.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {
  top: 0;
  transition: top 150ms ease;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {
  transition: none;
}

.lm-TabBar-tabLabel .lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
  background: inherit;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabPanel-tabBar {
  z-index: 1;
}

.lm-TabPanel-stackedPanel {
  z-index: 0;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapse {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.jp-Collapse-header {
  padding: 1px 12px;
  background-color: var(--jp-layout-color1);
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  text-transform: uppercase;
  user-select: none;
}

.jp-Collapser-icon {
  height: 16px;
}

.jp-Collapse-header-collapsed .jp-Collapser-icon {
  transform: rotate(-90deg);
  margin: auto 0;
}

.jp-Collapser-title {
  line-height: 25px;
}

.jp-Collapse-contents {
  padding: 0 12px;
  background-color: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* This file was auto-generated by ensureUiComponents() in @jupyterlab/buildutils */

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

/* Icons urls */

:root {
  --jp-icon-add-above: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5MikiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik00Ljc1IDQuOTMwNjZINi42MjVWNi44MDU2NkM2LjYyNSA3LjAxMTkxIDYuNzkzNzUgNy4xODA2NiA3IDcuMTgwNjZDNy4yMDYyNSA3LjE4MDY2IDcuMzc1IDcuMDExOTEgNy4zNzUgNi44MDU2NlY0LjkzMDY2SDkuMjVDOS40NTYyNSA0LjkzMDY2IDkuNjI1IDQuNzYxOTEgOS42MjUgNC41NTU2NkM5LjYyNSA0LjM0OTQxIDkuNDU2MjUgNC4xODA2NiA5LjI1IDQuMTgwNjZINy4zNzVWMi4zMDU2NkM3LjM3NSAyLjA5OTQxIDcuMjA2MjUgMS45MzA2NiA3IDEuOTMwNjZDNi43OTM3NSAxLjkzMDY2IDYuNjI1IDIuMDk5NDEgNi42MjUgMi4zMDU2NlY0LjE4MDY2SDQuNzVDNC41NDM3NSA0LjE4MDY2IDQuMzc1IDQuMzQ5NDEgNC4zNzUgNC41NTU2NkM0LjM3NSA0Ljc2MTkxIDQuNTQzNzUgNC45MzA2NiA0Ljc1IDQuOTMwNjZaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC43Ii8+CjwvZz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjUgOS41VjExLjVMMi41IDExLjVWOS41TDExLjUgOS41Wk0xMiA4QzEyLjU1MjMgOCAxMyA4LjQ0NzcyIDEzIDlWMTJDMTMgMTIuNTUyMyAxMi41NTIzIDEzIDEyIDEzTDIgMTNDMS40NDc3MiAxMyAxIDEyLjU1MjMgMSAxMlY5QzEgOC40NDc3MiAxLjQ0NzcxIDggMiA4TDEyIDhaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5MiI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KC0xIDAgMCAxIDEwIDEuNTU1NjYpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==);
  --jp-icon-add-below: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5OCkiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik05LjI1IDEwLjA2OTNMNy4zNzUgMTAuMDY5M0w3LjM3NSA4LjE5NDM0QzcuMzc1IDcuOTg4MDkgNy4yMDYyNSA3LjgxOTM0IDcgNy44MTkzNEM2Ljc5Mzc1IDcuODE5MzQgNi42MjUgNy45ODgwOSA2LjYyNSA4LjE5NDM0TDYuNjI1IDEwLjA2OTNMNC43NSAxMC4wNjkzQzQuNTQzNzUgMTAuMDY5MyA0LjM3NSAxMC4yMzgxIDQuMzc1IDEwLjQ0NDNDNC4zNzUgMTAuNjUwNiA0LjU0Mzc1IDEwLjgxOTMgNC43NSAxMC44MTkzTDYuNjI1IDEwLjgxOTNMNi42MjUgMTIuNjk0M0M2LjYyNSAxMi45MDA2IDYuNzkzNzUgMTMuMDY5MyA3IDEzLjA2OTNDNy4yMDYyNSAxMy4wNjkzIDcuMzc1IDEyLjkwMDYgNy4zNzUgMTIuNjk0M0w3LjM3NSAxMC44MTkzTDkuMjUgMTAuODE5M0M5LjQ1NjI1IDEwLjgxOTMgOS42MjUgMTAuNjUwNiA5LjYyNSAxMC40NDQzQzkuNjI1IDEwLjIzODEgOS40NTYyNSAxMC4wNjkzIDkuMjUgMTAuMDY5M1oiIGZpbGw9IiM2MTYxNjEiIHN0cm9rZT0iIzYxNjE2MSIgc3Ryb2tlLXdpZHRoPSIwLjciLz4KPC9nPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMi41IDUuNUwyLjUgMy41TDExLjUgMy41TDExLjUgNS41TDIuNSA1LjVaTTIgN0MxLjQ0NzcyIDcgMSA2LjU1MjI4IDEgNkwxIDNDMSAyLjQ0NzcyIDEuNDQ3NzIgMiAyIDJMMTIgMkMxMi41NTIzIDIgMTMgMi40NDc3MiAxMyAzTDEzIDZDMTMgNi41NTIyOSAxMi41NTIzIDcgMTIgN0wyIDdaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5OCI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KDEgMS43NDg0NmUtMDcgMS43NDg0NmUtMDcgLTEgNCAxMy40NDQzKSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=);
  --jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bell: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiPgogICA8cGF0aCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzMzMzMzIgogICAgICBkPSJtOCAwLjI5Yy0xLjQgMC0yLjcgMC43My0zLjYgMS44LTEuMiAxLjUtMS40IDMuNC0xLjUgNS4yLTAuMTggMi4yLTAuNDQgNC0yLjMgNS4zbDAuMjggMS4zaDVjMC4wMjYgMC42NiAwLjMyIDEuMSAwLjcxIDEuNSAwLjg0IDAuNjEgMiAwLjYxIDIuOCAwIDAuNTItMC40IDAuNi0xIDAuNzEtMS41aDVsMC4yOC0xLjNjLTEuOS0wLjk3LTIuMi0zLjMtMi4zLTUuMy0wLjEzLTEuOC0wLjI2LTMuNy0xLjUtNS4yLTAuODUtMS0yLjItMS44LTMuNi0xLjh6bTAgMS40YzAuODggMCAxLjkgMC41NSAyLjUgMS4zIDAuODggMS4xIDEuMSAyLjcgMS4yIDQuNCAwLjEzIDEuNyAwLjIzIDMuNiAxLjMgNS4yaC0xMGMxLjEtMS42IDEuMi0zLjQgMS4zLTUuMiAwLjEzLTEuNyAwLjMtMy4zIDEuMi00LjQgMC41OS0wLjcyIDEuNi0xLjMgMi41LTEuM3ptLTAuNzQgMTJoMS41Yy0wLjAwMTUgMC4yOCAwLjAxNSAwLjc5LTAuNzQgMC43OS0wLjczIDAuMDAxNi0wLjcyLTAuNTMtMC43NC0wLjc5eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-bug-dot: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiPgogICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMTkgOEgyMFYxMEgxNy45MUMxNy45NiAxMC4zMyAxOCAxMC42NiAxOCAxMVYxMkgyMFYxNEgxOC41SDE4VjE0LjAyNzVDMTUuNzUgMTQuMjc2MiAxNCAxNi4xODM3IDE0IDE4LjVDMTQgMTkuMjA4IDE0LjE2MzUgMTkuODc3OSAxNC40NTQ5IDIwLjQ3MzlDMTMuNzA2MyAyMC44MTE3IDEyLjg3NTcgMjEgMTIgMjFDOS43OCAyMSA3Ljg1IDE5Ljc5IDYuODEgMThINFYxNkg2LjA5QzYuMDQgMTUuNjcgNiAxNS4zNCA2IDE1VjE0SDRWMTJINlYxMUM2IDEwLjY2IDYuMDQgMTAuMzMgNi4wOSAxMEg0VjhINi44MUM3LjI2IDcuMjIgNy44OCA2LjU1IDguNjIgNi4wNEw3IDQuNDFMOC40MSAzTDEwLjU5IDUuMTdDMTEuMDQgNS4wNiAxMS41MSA1IDEyIDVDMTIuNDkgNSAxMi45NiA1LjA2IDEzLjQyIDUuMTdMMTUuNTkgM0wxNyA0LjQxTDE1LjM3IDYuMDRDMTYuMTIgNi41NSAxNi43NCA3LjIyIDE3LjE5IDhaTTEwIDE2SDE0VjE0SDEwVjE2Wk0xMCAxMkgxNFYxMEgxMFYxMloiIGZpbGw9IiM2MTYxNjEiLz4KICAgICAgICA8cGF0aCBkPSJNMjIgMTguNUMyMiAyMC40MzMgMjAuNDMzIDIyIDE4LjUgMjJDMTYuNTY3IDIyIDE1IDIwLjQzMyAxNSAxOC41QzE1IDE2LjU2NyAxNi41NjcgMTUgMTguNSAxNUMyMC40MzMgMTUgMjIgMTYuNTY3IDIyIDE4LjVaIiBmaWxsPSIjNjE2MTYxIi8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICA8cGF0aCBkPSJNNi41OSwzLjQxTDIsOEw2LjU5LDEyLjZMOCwxMS4xOEw0LjgyLDhMOCw0LjgyTDYuNTksMy40MU0xMi40MSwzLjQxTDExLDQuODJMMTQuMTgsOEwxMSwxMS4xOEwxMi40MSwxMi42TDE3LDhMMTIuNDEsMy40MU0yMS41OSwxMS41OUwxMy41LDE5LjY4TDkuODMsMTZMOC40MiwxNy40MUwxMy41LDIyLjVMMjMsMTNMMjEuNTksMTEuNTlaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTExLjQgMTguNkw2LjggMTRMMTEuNCA5LjRMMTAgOEw0IDE0TDEwIDIwTDExLjQgMTguNlpNMTYuNiAxOC42TDIxLjIgMTRMMTYuNiA5LjRMMTggOEwyNCAxNEwxOCAyMEwxNi42IDE4LjZWMTguNloiLz4KCTwvZz4KPC9zdmc+Cg==);
  --jp-icon-collapse-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNNiAxM3YyaDh2LTJ6IiAvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1jb25zb2xlLWljb24tYmFja2dyb3VuZC1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtY29uc29sZS1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIj4KICAgIDxwYXRoIGQ9Ik0xMDUgMTI3LjNoNDB2MTIuOGgtNDB6TTUxLjEgNzdMNzQgOTkuOWwtMjMuMyAyMy4zIDEwLjUgMTAuNSAyMy4zLTIzLjNMOTUgOTkuOSA4NC41IDg5LjQgNjEuNiA2Ni41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copyright: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0xMS44OCw5LjE0YzEuMjgsMC4wNiwxLjYxLDEuMTUsMS42MywxLjY2aDEuNzljLTAuMDgtMS45OC0xLjQ5LTMuMTktMy40NS0zLjE5QzkuNjQsNy42MSw4LDksOCwxMi4xNCBjMCwxLjk0LDAuOTMsNC4yNCwzLjg0LDQuMjRjMi4yMiwwLDMuNDEtMS42NSwzLjQ0LTIuOTVoLTEuNzljLTAuMDMsMC41OS0wLjQ1LDEuMzgtMS42MywxLjQ0QzEwLjU1LDE0LjgzLDEwLDEzLjgxLDEwLDEyLjE0IEMxMCw5LjI1LDExLjI4LDkuMTYsMTEuODgsOS4xNHogTTEyLDJDNi40OCwyLDIsNi40OCwyLDEyczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMFMxNy41MiwyLDEyLDJ6IE0xMiwyMGMtNC40MSwwLTgtMy41OS04LTggczMuNTktOCw4LThzOCwzLjU5LDgsOFMxNi40MSwyMCwxMiwyMHoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-delete: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiAvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjI2MjYyIiBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-duplicate: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNzk5OTggMC44NzVIOC44OTU4MkM5LjIwMDYxIDAuODc1IDkuNDQ5OTggMS4xMzkxNCA5LjQ0OTk4IDEuNDYxOThDOS40NDk5OCAxLjc4NDgyIDkuMjAwNjEgMi4wNDg5NiA4Ljg5NTgyIDIuMDQ4OTZIMy4zNTQxNUMzLjA0OTM2IDIuMDQ4OTYgMi43OTk5OCAyLjMxMzEgMi43OTk5OCAyLjYzNTk0VjkuNjc5NjlDMi43OTk5OCAxMC4wMDI1IDIuNTUwNjEgMTAuMjY2NyAyLjI0NTgyIDEwLjI2NjdDMS45NDEwMyAxMC4yNjY3IDEuNjkxNjUgMTAuMDAyNSAxLjY5MTY1IDkuNjc5NjlWMi4wNDg5NkMxLjY5MTY1IDEuNDAzMjggMi4xOTA0IDAuODc1IDIuNzk5OTggMC44NzVaTTUuMzY2NjUgMTEuOVY0LjU1SDExLjA4MzNWMTEuOUg1LjM2NjY1Wk00LjE0MTY1IDQuMTQxNjdDNC4xNDE2NSAzLjY5MDYzIDQuNTA3MjggMy4zMjUgNC45NTgzMiAzLjMyNUgxMS40OTE3QzExLjk0MjcgMy4zMjUgMTIuMzA4MyAzLjY5MDYzIDEyLjMwODMgNC4xNDE2N1YxMi4zMDgzQzEyLjMwODMgMTIuNzU5NCAxMS45NDI3IDEzLjEyNSAxMS40OTE3IDEzLjEyNUg0Ljk1ODMyQzQuNTA3MjggMTMuMTI1IDQuMTQxNjUgMTIuNzU5NCA0LjE0MTY1IDEyLjMwODNWNC4xNDE2N1oiIGZpbGw9IiM2MTYxNjEiLz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNOS40MzU3NCA4LjI2NTA3SDguMzY0MzFWOS4zMzY1QzguMzY0MzEgOS40NTQzNSA4LjI2Nzg4IDkuNTUwNzggOC4xNTAwMiA5LjU1MDc4QzguMDMyMTcgOS41NTA3OCA3LjkzNTc0IDkuNDU0MzUgNy45MzU3NCA5LjMzNjVWOC4yNjUwN0g2Ljg2NDMxQzYuNzQ2NDUgOC4yNjUwNyA2LjY1MDAyIDguMTY4NjQgNi42NTAwMiA4LjA1MDc4QzYuNjUwMDIgNy45MzI5MiA2Ljc0NjQ1IDcuODM2NSA2Ljg2NDMxIDcuODM2NUg3LjkzNTc0VjYuNzY1MDdDNy45MzU3NCA2LjY0NzIxIDguMDMyMTcgNi41NTA3OCA4LjE1MDAyIDYuNTUwNzhDOC4yNjc4OCA2LjU1MDc4IDguMzY0MzEgNi42NDcyMSA4LjM2NDMxIDYuNzY1MDdWNy44MzY1SDkuNDM1NzRDOS41NTM2IDcuODM2NSA5LjY1MDAyIDcuOTMyOTIgOS42NTAwMiA4LjA1MDc4QzkuNjUwMDIgOC4xNjg2NCA5LjU1MzYgOC4yNjUwNyA5LjQzNTc0IDguMjY1MDdaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=);
  --jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-error: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjE5IiByPSIyIi8+PHBhdGggZD0iTTEwIDNoNHYxMmgtNHoiLz48L2c+CjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiLz4KPC9zdmc+Cg==);
  --jp-icon-expand-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNMTEgMTBIOXYzSDZ2MmgzdjNoMnYtM2gzdi0yaC0zeiIgLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-filter-dot: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWRvdCIgZmlsbD0iI0ZGRiI+CiAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE3IiByPSIzIj48L2NpcmNsZT4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-filter: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-folder-favorite: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggY2xhc3M9ImpwLWljb24zIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxNjE2MSIgZD0iTTIwIDZoLThsLTItMkg0Yy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJ6bS0yLjA2IDExTDE1IDE1LjI4IDEyLjA2IDE3bC43OC0zLjMzLTIuNTktMi4yNCAzLjQxLS4yOUwxNSA4bDEuMzQgMy4xNCAzLjQxLjI5LTIuNTkgMi4yNC43OCAzLjMzeiIvPgo8L3N2Zz4K);
  --jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-home: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);
  --jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-info: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUwLjk3OCA1MC45NzgiPgoJPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KCQk8cGF0aCBkPSJNNDMuNTIsNy40NThDMzguNzExLDIuNjQ4LDMyLjMwNywwLDI1LjQ4OSwwQzE4LjY3LDAsMTIuMjY2LDIuNjQ4LDcuNDU4LDcuNDU4CgkJCWMtOS45NDMsOS45NDEtOS45NDMsMjYuMTE5LDAsMzYuMDYyYzQuODA5LDQuODA5LDExLjIxMiw3LjQ1NiwxOC4wMzEsNy40NThjMCwwLDAuMDAxLDAsMC4wMDIsMAoJCQljNi44MTYsMCwxMy4yMjEtMi42NDgsMTguMDI5LTcuNDU4YzQuODA5LTQuODA5LDcuNDU3LTExLjIxMiw3LjQ1Ny0xOC4wM0M1MC45NzcsMTguNjcsNDguMzI4LDEyLjI2Niw0My41Miw3LjQ1OHoKCQkJIE00Mi4xMDYsNDIuMTA1Yy00LjQzMiw0LjQzMS0xMC4zMzIsNi44NzItMTYuNjE1LDYuODcyaC0wLjAwMmMtNi4yODUtMC4wMDEtMTIuMTg3LTIuNDQxLTE2LjYxNy02Ljg3MgoJCQljLTkuMTYyLTkuMTYzLTkuMTYyLTI0LjA3MSwwLTMzLjIzM0MxMy4zMDMsNC40NCwxOS4yMDQsMiwyNS40ODksMmM2LjI4NCwwLDEyLjE4NiwyLjQ0LDE2LjYxNyw2Ljg3MgoJCQljNC40MzEsNC40MzEsNi44NzEsMTAuMzMyLDYuODcxLDE2LjYxN0M0OC45NzcsMzEuNzcyLDQ2LjUzNiwzNy42NzUsNDIuMTA2LDQyLjEwNXoiLz4KCQk8cGF0aCBkPSJNMjMuNTc4LDMyLjIxOGMtMC4wMjMtMS43MzQsMC4xNDMtMy4wNTksMC40OTYtMy45NzJjMC4zNTMtMC45MTMsMS4xMS0xLjk5NywyLjI3Mi0zLjI1MwoJCQljMC40NjgtMC41MzYsMC45MjMtMS4wNjIsMS4zNjctMS41NzVjMC42MjYtMC43NTMsMS4xMDQtMS40NzgsMS40MzYtMi4xNzVjMC4zMzEtMC43MDcsMC40OTUtMS41NDEsMC40OTUtMi41CgkJCWMwLTEuMDk2LTAuMjYtMi4wODgtMC43NzktMi45NzljLTAuNTY1LTAuODc5LTEuNTAxLTEuMzM2LTIuODA2LTEuMzY5Yy0xLjgwMiwwLjA1Ny0yLjk4NSwwLjY2Ny0zLjU1LDEuODMyCgkJCWMtMC4zMDEsMC41MzUtMC41MDMsMS4xNDEtMC42MDcsMS44MTRjLTAuMTM5LDAuNzA3LTAuMjA3LDEuNDMyLTAuMjA3LDIuMTc0aC0yLjkzN2MtMC4wOTEtMi4yMDgsMC40MDctNC4xMTQsMS40OTMtNS43MTkKCQkJYzEuMDYyLTEuNjQsMi44NTUtMi40ODEsNS4zNzgtMi41MjdjMi4xNiwwLjAyMywzLjg3NCwwLjYwOCw1LjE0MSwxLjc1OGMxLjI3OCwxLjE2LDEuOTI5LDIuNzY0LDEuOTUsNC44MTEKCQkJYzAsMS4xNDItMC4xMzcsMi4xMTEtMC40MSwyLjkxMWMtMC4zMDksMC44NDUtMC43MzEsMS41OTMtMS4yNjgsMi4yNDNjLTAuNDkyLDAuNjUtMS4wNjgsMS4zMTgtMS43MywyLjAwMgoJCQljLTAuNjUsMC42OTctMS4zMTMsMS40NzktMS45ODcsMi4zNDZjLTAuMjM5LDAuMzc3LTAuNDI5LDAuNzc3LTAuNTY1LDEuMTk5Yy0wLjE2LDAuOTU5LTAuMjE3LDEuOTUxLTAuMTcxLDIuOTc5CgkJCUMyNi41ODksMzIuMjE4LDIzLjU3OCwzMi4yMTgsMjMuNTc4LDMyLjIxOHogTTIzLjU3OCwzOC4yMnYtMy40ODRoMy4wNzZ2My40ODRIMjMuNTc4eiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaW5zcGVjdG9yLWljb24tY29sb3IganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);
  --jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtanNvbi1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0Y5QTgyNSI+CiAgICA8cGF0aCBkPSJNMjAuMiAxMS44Yy0xLjYgMC0xLjcuNS0xLjcgMSAwIC40LjEuOS4xIDEuMy4xLjUuMS45LjEgMS4zIDAgMS43LTEuNCAyLjMtMy41IDIuM2gtLjl2LTEuOWguNWMxLjEgMCAxLjQgMCAxLjQtLjggMC0uMyAwLS42LS4xLTEgMC0uNC0uMS0uOC0uMS0xLjIgMC0xLjMgMC0xLjggMS4zLTItMS4zLS4yLTEuMy0uNy0xLjMtMiAwLS40LjEtLjguMS0xLjIuMS0uNC4xLS43LjEtMSAwLS44LS40LS43LTEuNC0uOGgtLjVWNC4xaC45YzIuMiAwIDMuNS43IDMuNSAyLjMgMCAuNC0uMS45LS4xIDEuMy0uMS41LS4xLjktLjEgMS4zIDAgLjUuMiAxIDEuNyAxdjEuOHpNMS44IDEwLjFjMS42IDAgMS43LS41IDEuNy0xIDAtLjQtLjEtLjktLjEtMS4zLS4xLS41LS4xLS45LS4xLTEuMyAwLTEuNiAxLjQtMi4zIDMuNS0yLjNoLjl2MS45aC0uNWMtMSAwLTEuNCAwLTEuNC44IDAgLjMgMCAuNi4xIDEgMCAuMi4xLjYuMSAxIDAgMS4zIDAgMS44LTEuMyAyQzYgMTEuMiA2IDExLjcgNiAxM2MwIC40LS4xLjgtLjEgMS4yLS4xLjMtLjEuNy0uMSAxIDAgLjguMy44IDEuNC44aC41djEuOWgtLjljLTIuMSAwLTMuNS0uNi0zLjUtMi4zIDAtLjQuMS0uOS4xLTEuMy4xLS41LjEtLjkuMS0xLjMgMC0uNS0uMi0xLTEuNy0xdi0xLjl6Ii8+CiAgICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjEzLjgiIHI9IjIuMSIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSI4LjIiIHI9IjIuMSIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-julia: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDMyNSAzMDAiPgogIDxnIGNsYXNzPSJqcC1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjY2IzYzMzIj4KICAgIDxwYXRoIGQ9Ik0gMTUwLjg5ODQzOCAyMjUgQyAxNTAuODk4NDM4IDI2Ni40MjE4NzUgMTE3LjMyMDMxMiAzMDAgNzUuODk4NDM4IDMwMCBDIDM0LjQ3NjU2MiAzMDAgMC44OTg0MzggMjY2LjQyMTg3NSAwLjg5ODQzOCAyMjUgQyAwLjg5ODQzOCAxODMuNTc4MTI1IDM0LjQ3NjU2MiAxNTAgNzUuODk4NDM4IDE1MCBDIDExNy4zMjAzMTIgMTUwIDE1MC44OTg0MzggMTgzLjU3ODEyNSAxNTAuODk4NDM4IDIyNSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzM4OTgyNiI+CiAgICA8cGF0aCBkPSJNIDIzNy41IDc1IEMgMjM3LjUgMTE2LjQyMTg3NSAyMDMuOTIxODc1IDE1MCAxNjIuNSAxNTAgQyAxMjEuMDc4MTI1IDE1MCA4Ny41IDExNi40MjE4NzUgODcuNSA3NSBDIDg3LjUgMzMuNTc4MTI1IDEyMS4wNzgxMjUgMCAxNjIuNSAwIEMgMjAzLjkyMTg3NSAwIDIzNy41IDMzLjU3ODEyNSAyMzcuNSA3NSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzk1NThiMiI+CiAgICA8cGF0aCBkPSJNIDMyNC4xMDE1NjIgMjI1IEMgMzI0LjEwMTU2MiAyNjYuNDIxODc1IDI5MC41MjM0MzggMzAwIDI0OS4xMDE1NjIgMzAwIEMgMjA3LjY3OTY4OCAzMDAgMTc0LjEwMTU2MiAyNjYuNDIxODc1IDE3NC4xMDE1NjIgMjI1IEMgMTc0LjEwMTU2MiAxODMuNTc4MTI1IDIwNy42Nzk2ODggMTUwIDI0OS4xMDE1NjIgMTUwIEMgMjkwLjUyMzQzOCAxNTAgMzI0LjEwMTU2MiAxODMuNTc4MTI1IDMyNC4xMDE1NjIgMjI1Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgPGcgY2xhc3M9ImpwLWp1cHl0ZXItaWNvbi1jb2xvciIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgIDxnIGNsYXNzPSJqcC1qdXB5dGVyLWljb24tY29sb3IiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);
  --jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);
  --jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);
  --jp-icon-launch: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yNiwyOEg2YTIuMDAyNywyLjAwMjcsMCwwLDEtMi0yVjZBMi4wMDI3LDIuMDAyNywwLDAsMSw2LDRIMTZWNkg2VjI2SDI2VjE2aDJWMjZBMi4wMDI3LDIuMDAyNywwLDAsMSwyNiwyOFoiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMjAgMiAyMCA0IDI2LjU4NiA0IDE4IDEyLjU4NiAxOS40MTQgMTQgMjggNS40MTQgMjggMTIgMzAgMTIgMzAgMiAyMCAyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);
  --jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4K);
  --jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-move-down: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMTIuNDcxIDcuNTI4OTlDMTIuNzYzMiA3LjIzNjg0IDEyLjc2MzIgNi43NjMxNiAxMi40NzEgNi40NzEwMVY2LjQ3MTAxQzEyLjE3OSA2LjE3OTA1IDExLjcwNTcgNi4xNzg4NCAxMS40MTM1IDYuNDcwNTRMNy43NSAxMC4xMjc1VjEuNzVDNy43NSAxLjMzNTc5IDcuNDE0MjEgMSA3IDFWMUM2LjU4NTc5IDEgNi4yNSAxLjMzNTc5IDYuMjUgMS43NVYxMC4xMjc1TDIuNTk3MjYgNi40NjgyMkMyLjMwMzM4IDYuMTczODEgMS44MjY0MSA2LjE3MzU5IDEuNTMyMjYgNi40Njc3NFY2LjQ2Nzc0QzEuMjM4MyA2Ljc2MTcgMS4yMzgzIDcuMjM4MyAxLjUzMjI2IDcuNTMyMjZMNi4yOTI4OSAxMi4yOTI5QzYuNjgzNDIgMTIuNjgzNCA3LjMxNjU4IDEyLjY4MzQgNy43MDcxMSAxMi4yOTI5TDEyLjQ3MSA3LjUyODk5WiIgZmlsbD0iIzYxNjE2MSIvPgo8L3N2Zz4K);
  --jp-icon-move-up: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMS41Mjg5OSA2LjQ3MTAxQzEuMjM2ODQgNi43NjMxNiAxLjIzNjg0IDcuMjM2ODQgMS41Mjg5OSA3LjUyODk5VjcuNTI4OTlDMS44MjA5NSA3LjgyMDk1IDIuMjk0MjYgNy44MjExNiAyLjU4NjQ5IDcuNTI5NDZMNi4yNSAzLjg3MjVWMTIuMjVDNi4yNSAxMi42NjQyIDYuNTg1NzkgMTMgNyAxM1YxM0M3LjQxNDIxIDEzIDcuNzUgMTIuNjY0MiA3Ljc1IDEyLjI1VjMuODcyNUwxMS40MDI3IDcuNTMxNzhDMTEuNjk2NiA3LjgyNjE5IDEyLjE3MzYgNy44MjY0MSAxMi40Njc3IDcuNTMyMjZWNy41MzIyNkMxMi43NjE3IDcuMjM4MyAxMi43NjE3IDYuNzYxNyAxMi40Njc3IDYuNDY3NzRMNy43MDcxMSAxLjcwNzExQzcuMzE2NTggMS4zMTY1OCA2LjY4MzQyIDEuMzE2NTggNi4yOTI4OSAxLjcwNzExTDEuNTI4OTkgNi40NzEwMVoiIGZpbGw9IiM2MTYxNjEiLz4KPC9zdmc+Cg==);
  --jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);
  --jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtbm90ZWJvb2staWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-numbering: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTQgMTlINlYxOS41SDVWMjAuNUg2VjIxSDRWMjJIN1YxOEg0VjE5Wk01IDEwSDZWNkg0VjdINVYxMFpNNCAxM0g1LjhMNCAxNS4xVjE2SDdWMTVINS4yTDcgMTIuOVYxMkg0VjEzWk05IDdWOUgyM1Y3SDlaTTkgMjFIMjNWMTlIOVYyMVpNOSAxNUgyM1YxM0g5VjE1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-offline-bolt: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDIuMDJjLTUuNTEgMC05Ljk4IDQuNDctOS45OCA5Ljk4czQuNDcgOS45OCA5Ljk4IDkuOTggOS45OC00LjQ3IDkuOTgtOS45OFMxNy41MSAyLjAyIDEyIDIuMDJ6TTExLjQ4IDIwdi02LjI2SDhMMTMgNHY2LjI2aDMuMzVMMTEuNDggMjB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-pdf: url(data:image/svg+xml;base64,PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiIgd2lkdGg9IjE2Ij4KICAgIDxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDQ1KSIgY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0ZGMkEyQSIKICAgICAgIGQ9Im0gMjIuMzQ0MzY5LC0zLjAxNjM2NDIgaCA1LjYzODYwNCB2IDEuNTc5MjQzMyBoIC0zLjU0OTIyNyB2IDEuNTA4NjkyOTkgaCAzLjMzNzU3NiBWIDEuNjUwODE1NCBoIC0zLjMzNzU3NiB2IDMuNDM1MjYxMyBoIC0yLjA4OTM3NyB6IG0gLTcuMTM2NDQ0LDEuNTc5MjQzMyB2IDQuOTQzOTU0MyBoIDAuNzQ4OTIgcSAxLjI4MDc2MSwwIDEuOTUzNzAzLC0wLjYzNDk1MzUgMC42NzgzNjksLTAuNjM0OTUzNSAwLjY3ODM2OSwtMS44NDUxNjQxIDAsLTEuMjA0NzgzNTUgLTAuNjcyOTQyLC0xLjgzNDMxMDExIC0wLjY3Mjk0MiwtMC42Mjk1MjY1OSAtMS45NTkxMywtMC42Mjk1MjY1OSB6IG0gLTIuMDg5Mzc3LC0xLjU3OTI0MzMgaCAyLjIwMzM0MyBxIDEuODQ1MTY0LDAgMi43NDYwMzksMC4yNjU5MjA3IDAuOTA2MzAxLDAuMjYwNDkzNyAxLjU1MjEwOCwwLjg5MDAyMDMgMC41Njk4MywwLjU0ODEyMjMgMC44NDY2MDUsMS4yNjQ0ODAwNiAwLjI3Njc3NCwwLjcxNjM1NzgxIDAuMjc2Nzc0LDEuNjIyNjU4OTQgMCwwLjkxNzE1NTEgLTAuMjc2Nzc0LDEuNjM4OTM5OSAtMC4yNzY3NzUsMC43MTYzNTc4IC0wLjg0NjYwNSwxLjI2NDQ4IC0wLjY1MTIzNCwwLjYyOTUyNjYgLTEuNTYyOTYyLDAuODk1NDQ3MyAtMC45MTE3MjgsMC4yNjA0OTM3IC0yLjczNTE4NSwwLjI2MDQ5MzcgaCAtMi4yMDMzNDMgeiBtIC04LjE0NTg1NjUsMCBoIDMuNDY3ODIzIHEgMS41NDY2ODE2LDAgMi4zNzE1Nzg1LDAuNjg5MjIzIDAuODMwMzI0LDAuNjgzNzk2MSAwLjgzMDMyNCwxLjk1MzcwMzE0IDAsMS4yNzUzMzM5NyAtMC44MzAzMjQsMS45NjQ1NTcwNiBRIDkuOTg3MTk2MSwyLjI3NDkxNSA4LjQ0MDUxNDUsMi4yNzQ5MTUgSCA3LjA2MjA2ODQgViA1LjA4NjA3NjcgSCA0Ljk3MjY5MTUgWiBtIDIuMDg5Mzc2OSwxLjUxNDExOTkgdiAyLjI2MzAzOTQzIGggMS4xNTU5NDEgcSAwLjYwNzgxODgsMCAwLjkzODg2MjksLTAuMjkzMDU1NDcgMC4zMzEwNDQxLC0wLjI5ODQ4MjQxIDAuMzMxMDQ0MSwtMC44NDExNzc3MiAwLC0wLjU0MjY5NTMxIC0wLjMzMTA0NDEsLTAuODM1NzUwNzQgLTAuMzMxMDQ0MSwtMC4yOTMwNTU1IC0wLjkzODg2MjksLTAuMjkzMDU1NSB6IgovPgo8L3N2Zz4K);
  --jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iLTEwIC0xMCAxMzEuMTYxMzYxNjk0MzM1OTQgMTMyLjM4ODk5OTkzODk2NDg0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzA2OTk4IiBkPSJNIDU0LjkxODc4NSw5LjE5Mjc0MjFlLTQgQyA1MC4zMzUxMzIsMC4wMjIyMTcyNyA0NS45NTc4NDYsMC40MTMxMzY5NyA0Mi4xMDYyODUsMS4wOTQ2NjkzIDMwLjc2MDA2OSwzLjA5OTE3MzEgMjguNzAwMDM2LDcuMjk0NzcxNCAyOC43MDAwMzUsMTUuMDMyMTY5IHYgMTAuMjE4NzUgaCAyNi44MTI1IHYgMy40MDYyNSBoIC0yNi44MTI1IC0xMC4wNjI1IGMgLTcuNzkyNDU5LDAgLTE0LjYxNTc1ODgsNC42ODM3MTcgLTE2Ljc0OTk5OTgsMTMuNTkzNzUgLTIuNDYxODE5OTgsMTAuMjEyOTY2IC0yLjU3MTAxNTA4LDE2LjU4NjAyMyAwLDI3LjI1IDEuOTA1OTI4Myw3LjkzNzg1MiA2LjQ1NzU0MzIsMTMuNTkzNzQ4IDE0LjI0OTk5OTgsMTMuNTkzNzUgaCA5LjIxODc1IHYgLTEyLjI1IGMgMCwtOC44NDk5MDIgNy42NTcxNDQsLTE2LjY1NjI0OCAxNi43NSwtMTYuNjU2MjUgaCAyNi43ODEyNSBjIDcuNDU0OTUxLDAgMTMuNDA2MjUzLC02LjEzODE2NCAxMy40MDYyNSwtMTMuNjI1IHYgLTI1LjUzMTI1IGMgMCwtNy4yNjYzMzg2IC02LjEyOTk4LC0xMi43MjQ3NzcxIC0xMy40MDYyNSwtMTMuOTM3NDk5NyBDIDY0LjI4MTU0OCwwLjMyNzk0Mzk3IDU5LjUwMjQzOCwtMC4wMjAzNzkwMyA1NC45MTg3ODUsOS4xOTI3NDIxZS00IFogbSAtMTQuNSw4LjIxODc1MDEyNTc5IGMgMi43Njk1NDcsMCA1LjAzMTI1LDIuMjk4NjQ1NiA1LjAzMTI1LDUuMTI0OTk5NiAtMmUtNiwyLjgxNjMzNiAtMi4yNjE3MDMsNS4wOTM3NSAtNS4wMzEyNSw1LjA5Mzc1IC0yLjc3OTQ3NiwtMWUtNiAtNS4wMzEyNSwtMi4yNzc0MTUgLTUuMDMxMjUsLTUuMDkzNzUgLTEwZS03LC0yLjgyNjM1MyAyLjI1MTc3NCwtNS4xMjQ5OTk2IDUuMDMxMjUsLTUuMTI0OTk5NiB6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2ZmZDQzYiIgZD0ibSA4NS42Mzc1MzUsMjguNjU3MTY5IHYgMTEuOTA2MjUgYyAwLDkuMjMwNzU1IC03LjgyNTg5NSwxNi45OTk5OTkgLTE2Ljc1LDE3IGggLTI2Ljc4MTI1IGMgLTcuMzM1ODMzLDAgLTEzLjQwNjI0OSw2LjI3ODQ4MyAtMTMuNDA2MjUsMTMuNjI1IHYgMjUuNTMxMjQ3IGMgMCw3LjI2NjM0NCA2LjMxODU4OCwxMS41NDAzMjQgMTMuNDA2MjUsMTMuNjI1MDA0IDguNDg3MzMxLDIuNDk1NjEgMTYuNjI2MjM3LDIuOTQ2NjMgMjYuNzgxMjUsMCA2Ljc1MDE1NSwtMS45NTQzOSAxMy40MDYyNTMsLTUuODg3NjEgMTMuNDA2MjUsLTEzLjYyNTAwNCBWIDg2LjUwMDkxOSBoIC0yNi43ODEyNSB2IC0zLjQwNjI1IGggMjYuNzgxMjUgMTMuNDA2MjU0IGMgNy43OTI0NjEsMCAxMC42OTYyNTEsLTUuNDM1NDA4IDEzLjQwNjI0MSwtMTMuNTkzNzUgMi43OTkzMywtOC4zOTg4ODYgMi42ODAyMiwtMTYuNDc1Nzc2IDAsLTI3LjI1IC0xLjkyNTc4LC03Ljc1NzQ0MSAtNS42MDM4NywtMTMuNTkzNzUgLTEzLjQwNjI0MSwtMTMuNTkzNzUgeiBtIC0xNS4wNjI1LDY0LjY1NjI1IGMgMi43Nzk0NzgsM2UtNiA1LjAzMTI1LDIuMjc3NDE3IDUuMDMxMjUsNS4wOTM3NDcgLTJlLTYsMi44MjYzNTQgLTIuMjUxNzc1LDUuMTI1MDA0IC01LjAzMTI1LDUuMTI1MDA0IC0yLjc2OTU1LDAgLTUuMDMxMjUsLTIuMjk4NjUgLTUuMDMxMjUsLTUuMTI1MDA0IDJlLTYsLTIuODE2MzMgMi4yNjE2OTcsLTUuMDkzNzQ3IDUuMDMxMjUsLTUuMDkzNzQ3IHoiLz4KPC9zdmc+Cg==);
  --jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);
  --jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-redo: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);
  --jp-icon-share: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTSAxOCAyIEMgMTYuMzU0OTkgMiAxNSAzLjM1NDk5MDQgMTUgNSBDIDE1IDUuMTkwOTUyOSAxNS4wMjE3OTEgNS4zNzcxMjI0IDE1LjA1NjY0MSA1LjU1ODU5MzggTCA3LjkyMTg3NSA5LjcyMDcwMzEgQyA3LjM5ODUzOTkgOS4yNzc4NTM5IDYuNzMyMDc3MSA5IDYgOSBDIDQuMzU0OTkwNCA5IDMgMTAuMzU0OTkgMyAxMiBDIDMgMTMuNjQ1MDEgNC4zNTQ5OTA0IDE1IDYgMTUgQyA2LjczMjA3NzEgMTUgNy4zOTg1Mzk5IDE0LjcyMjE0NiA3LjkyMTg3NSAxNC4yNzkyOTcgTCAxNS4wNTY2NDEgMTguNDM5NDUzIEMgMTUuMDIxNTU1IDE4LjYyMTUxNCAxNSAxOC44MDgzODYgMTUgMTkgQyAxNSAyMC42NDUwMSAxNi4zNTQ5OSAyMiAxOCAyMiBDIDE5LjY0NTAxIDIyIDIxIDIwLjY0NTAxIDIxIDE5IEMgMjEgMTcuMzU0OTkgMTkuNjQ1MDEgMTYgMTggMTYgQyAxNy4yNjc0OCAxNiAxNi42MDE1OTMgMTYuMjc5MzI4IDE2LjA3ODEyNSAxNi43MjI2NTYgTCA4Ljk0MzM1OTQgMTIuNTU4NTk0IEMgOC45NzgyMDk1IDEyLjM3NzEyMiA5IDEyLjE5MDk1MyA5IDEyIEMgOSAxMS44MDkwNDcgOC45NzgyMDk1IDExLjYyMjg3OCA4Ljk0MzM1OTQgMTEuNDQxNDA2IEwgMTYuMDc4MTI1IDcuMjc5Mjk2OSBDIDE2LjYwMTQ2IDcuNzIyMTQ2MSAxNy4yNjc5MjMgOCAxOCA4IEMgMTkuNjQ1MDEgOCAyMSA2LjY0NTAwOTYgMjEgNSBDIDIxIDMuMzU0OTkwNCAxOS42NDUwMSAyIDE4IDIgeiBNIDE4IDQgQyAxOC41NjQxMjkgNCAxOSA0LjQzNTg3MDYgMTkgNSBDIDE5IDUuNTY0MTI5NCAxOC41NjQxMjkgNiAxOCA2IEMgMTcuNDM1ODcxIDYgMTcgNS41NjQxMjk0IDE3IDUgQyAxNyA0LjQzNTg3MDYgMTcuNDM1ODcxIDQgMTggNCB6IE0gNiAxMSBDIDYuNTY0MTI5NCAxMSA3IDExLjQzNTg3MSA3IDEyIEMgNyAxMi41NjQxMjkgNi41NjQxMjk0IDEzIDYgMTMgQyA1LjQzNTg3MDYgMTMgNSAxMi41NjQxMjkgNSAxMiBDIDUgMTEuNDM1ODcxIDUuNDM1ODcwNiAxMSA2IDExIHogTSAxOCAxOCBDIDE4LjU2NDEyOSAxOCAxOSAxOC40MzU4NzEgMTkgMTkgQyAxOSAxOS41NjQxMjkgMTguNTY0MTI5IDIwIDE4IDIwIEMgMTcuNDM1ODcxIDIwIDE3IDE5LjU2NDEyOSAxNyAxOSBDIDE3IDE4LjQzNTg3MSAxNy40MzU4NzEgMTggMTggMTggeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-table-rows: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMSw4SDNWNGgxOFY4eiBNMjEsMTBIM3Y0aDE4VjEweiBNMjEsMTZIM3Y0aDE4VjE2eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-tag: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MyAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTI4LjgzMzIgMTIuMzM0TDMyLjk5OTggMTYuNTAwN0wzNy4xNjY1IDEyLjMzNEgyOC44MzMyWiIvPgoJCTxwYXRoIGQ9Ik0xNi4yMDk1IDIxLjYxMDRDMTUuNjg3MyAyMi4xMjk5IDE0Ljg0NDMgMjIuMTI5OSAxNC4zMjQ4IDIxLjYxMDRMNi45ODI5IDE0LjcyNDVDNi41NzI0IDE0LjMzOTQgNi4wODMxMyAxMy42MDk4IDYuMDQ3ODYgMTMuMDQ4MkM1Ljk1MzQ3IDExLjUyODggNi4wMjAwMiA4LjYxOTQ0IDYuMDY2MjEgNy4wNzY5NUM2LjA4MjgxIDYuNTE0NzcgNi41NTU0OCA2LjA0MzQ3IDcuMTE4MDQgNi4wMzA1NUM5LjA4ODYzIDUuOTg0NzMgMTMuMjYzOCA1LjkzNTc5IDEzLjY1MTggNi4zMjQyNUwyMS43MzY5IDEzLjYzOUMyMi4yNTYgMTQuMTU4NSAyMS43ODUxIDE1LjQ3MjQgMjEuMjYyIDE1Ljk5NDZMMTYuMjA5NSAyMS42MTA0Wk05Ljc3NTg1IDguMjY1QzkuMzM1NTEgNy44MjU2NiA4LjYyMzUxIDcuODI1NjYgOC4xODI4IDguMjY1QzcuNzQzNDYgOC43MDU3MSA3Ljc0MzQ2IDkuNDE3MzMgOC4xODI4IDkuODU2NjdDOC42MjM4MiAxMC4yOTY0IDkuMzM1ODIgMTAuMjk2NCA5Ljc3NTg1IDkuODU2NjdDMTAuMjE1NiA5LjQxNzMzIDEwLjIxNTYgOC43MDUzMyA5Ljc3NTg1IDguMjY1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDIpIiBmaWxsPSIjMzMzMzMzIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUtaW52ZXJzZSIgZD0iTTUuMDU2NjQgOC43NjE3MkM1LjA1NjY0IDguNTk3NjYgNS4wMzEyNSA4LjQ1MzEyIDQuOTgwNDcgOC4zMjgxMkM0LjkzMzU5IDguMTk5MjIgNC44NTU0NyA4LjA4MjAzIDQuNzQ2MDkgNy45NzY1NkM0LjY0MDYyIDcuODcxMDkgNC41IDcuNzc1MzkgNC4zMjQyMiA3LjY4OTQ1QzQuMTUyMzQgNy41OTk2MSAzLjk0MzM2IDcuNTExNzIgMy42OTcyNyA3LjQyNTc4QzMuMzAyNzMgNy4yODUxNiAyLjk0MzM2IDcuMTM2NzIgMi42MTkxNCA2Ljk4MDQ3QzIuMjk0OTIgNi44MjQyMiAyLjAxNzU4IDYuNjQyNTggMS43ODcxMSA2LjQzNTU1QzEuNTYwNTUgNi4yMjg1MiAxLjM4NDc3IDUuOTg4MjggMS4yNTk3NyA1LjcxNDg0QzEuMTM0NzcgNS40Mzc1IDEuMDcyMjcgNS4xMDkzOCAxLjA3MjI3IDQuNzMwNDdDMS4wNzIyNyA0LjM5ODQ0IDEuMTI4OTEgNC4wOTU3IDEuMjQyMTkgMy44MjIyN0MxLjM1NTQ3IDMuNTQ0OTIgMS41MTU2MiAzLjMwNDY5IDEuNzIyNjYgMy4xMDE1NkMxLjkyOTY5IDIuODk4NDQgMi4xNzk2OSAyLjczNDM3IDIuNDcyNjYgMi42MDkzOEMyLjc2NTYyIDIuNDg0MzggMy4wOTE4IDIuNDA0MyAzLjQ1MTE3IDIuMzY5MTRWMS4xMDkzOEg0LjM4ODY3VjIuMzgwODZDNC43NDAyMyAyLjQyNzczIDUuMDU2NjQgMi41MjM0NCA1LjMzNzg5IDIuNjY3OTdDNS42MTkxNCAyLjgxMjUgNS44NTc0MiAzLjAwMTk1IDYuMDUyNzMgMy4yMzYzM0M2LjI1MTk1IDMuNDY2OCA2LjQwNDMgMy43NDAyMyA2LjUwOTc3IDQuMDU2NjRDNi42MTkxNCA0LjM2OTE0IDYuNjczODMgNC43MjA3IDYuNjczODMgNS4xMTEzM0g1LjA0NDkyQzUuMDQ0OTIgNC42Mzg2NyA0LjkzNzUgNC4yODEyNSA0LjcyMjY2IDQuMDM5MDZDNC41MDc4MSAzLjc5Mjk3IDQuMjE2OCAzLjY2OTkyIDMuODQ5NjEgMy42Njk5MkMzLjY1MDM5IDMuNjY5OTIgMy40NzY1NiAzLjY5NzI3IDMuMzI4MTIgMy43NTE5NUMzLjE4MzU5IDMuODAyNzMgMy4wNjQ0NSAzLjg3Njk1IDIuOTcwNyAzLjk3NDYxQzIuODc2OTUgNC4wNjgzNiAyLjgwNjY0IDQuMTc5NjkgMi43NTk3NyA0LjMwODU5QzIuNzE2OCA0LjQzNzUgMi42OTUzMSA0LjU3ODEyIDIuNjk1MzEgNC43MzA0N0MyLjY5NTMxIDQuODgyODEgMi43MTY4IDUuMDE5NTMgMi43NTk3NyA1LjE0MDYyQzIuODA2NjQgNS4yNTc4MSAyLjg4MjgxIDUuMzY3MTkgMi45ODgyOCA1LjQ2ODc1QzMuMDk3NjYgNS41NzAzMSAzLjI0MDIzIDUuNjY3OTcgMy40MTYwMiA1Ljc2MTcyQzMuNTkxOCA1Ljg1MTU2IDMuODEwNTUgNS45NDMzNiA0LjA3MjI3IDYuMDM3MTFDNC40NjY4IDYuMTg1NTUgNC44MjQyMiA2LjMzOTg0IDUuMTQ0NTMgNi41QzUuNDY0ODQgNi42NTYyNSA1LjczODI4IDYuODM5ODQgNS45NjQ4NCA3LjA1MDc4QzYuMTk1MzEgNy4yNTc4MSA2LjM3MTA5IDcuNSA2LjQ5MjE5IDcuNzc3MzRDNi42MTcxOSA4LjA1MDc4IDYuNjc5NjkgOC4zNzUgNi42Nzk2OSA4Ljc1QzYuNjc5NjkgOS4wOTM3NSA2LjYyMzA1IDkuNDA0MyA2LjUwOTc3IDkuNjgxNjRDNi4zOTY0OCA5Ljk1NTA4IDYuMjM0MzggMTAuMTkxNCA2LjAyMzQ0IDEwLjM5MDZDNS44MTI1IDEwLjU4OTggNS41NTg1OSAxMC43NSA1LjI2MTcyIDEwLjg3MTFDNC45NjQ4NCAxMC45ODgzIDQuNjMyODEgMTEuMDY0NSA0LjI2NTYyIDExLjA5OTZWMTIuMjQ4SDMuMzMzOThWMTEuMDk5NkMzLjAwMTk1IDExLjA2ODQgMi42Nzk2OSAxMC45OTYxIDIuMzY3MTkgMTAuODgyOEMyLjA1NDY5IDEwLjc2NTYgMS43NzczNCAxMC41OTc3IDEuNTM1MTYgMTAuMzc4OUMxLjI5Njg4IDEwLjE2MDIgMS4xMDU0NyA5Ljg4NDc3IDAuOTYwOTM4IDkuNTUyNzNDMC44MTY0MDYgOS4yMTY4IDAuNzQ0MTQxIDguODE0NDUgMC43NDQxNDEgOC4zNDU3SDIuMzc4OTFDMi4zNzg5MSA4LjYyNjk1IDIuNDE5OTIgOC44NjMyOCAyLjUwMTk1IDkuMDU0NjlDMi41ODM5OCA5LjI0MjE5IDIuNjg5NDUgOS4zOTI1OCAyLjgxODM2IDkuNTA1ODZDMi45NTExNyA5LjYxNTIzIDMuMTAxNTYgOS42OTMzNiAzLjI2OTUzIDkuNzQwMjNDMy40Mzc1IDkuNzg3MTEgMy42MDkzOCA5LjgxMDU1IDMuNzg1MTYgOS44MTA1NUM0LjIwMzEyIDkuODEwNTUgNC41MTk1MyA5LjcxMjg5IDQuNzM0MzggOS41MTc1OEM0Ljk0OTIyIDkuMzIyMjcgNS4wNTY2NCA5LjA3MDMxIDUuMDU2NjQgOC43NjE3MlpNMTMuNDE4IDEyLjI3MTVIOC4wNzQyMlYxMUgxMy40MThWMTIuMjcxNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuOTUyNjQgNikiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=);
  --jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtdGV4dC1lZGl0b3ItaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xNSAxNUgzdjJoMTJ2LTJ6bTAtOEgzdjJoMTJWN3pNMyAxM2gxOHYtMkgzdjJ6bTAgOGgxOHYtMkgzdjJ6TTMgM3YyaDE4VjNIM3oiLz4KPC9zdmc+Cg==);
  --jp-icon-toc: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik03LDVIMjFWN0g3VjVNNywxM1YxMUgyMVYxM0g3TTQsNC41QTEuNSwxLjUgMCAwLDEgNS41LDZBMS41LDEuNSAwIDAsMSA0LDcuNUExLjUsMS41IDAgMCwxIDIuNSw2QTEuNSwxLjUgMCAwLDEgNCw0LjVNNCwxMC41QTEuNSwxLjUgMCAwLDEgNS41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMy41QTEuNSwxLjUgMCAwLDEgMi41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMC41TTcsMTlWMTdIMjFWMTlIN000LDE2LjVBMS41LDEuNSAwIDAsMSA1LjUsMThBMS41LDEuNSAwIDAsMSA0LDE5LjVBMS41LDEuNSAwIDAsMSAyLjUsMThBMS41LDEuNSAwIDAsMSA0LDE2LjVaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tree-view: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMiAxMVYzaC03djNIOVYzSDJ2OGg3VjhoMnYxMGg0djNoN3YtOGgtN3YzaC0yVjhoMnYzeiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);
  --jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-user: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-users: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM2IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGcgY2xhc3M9ImpwLWljb24zIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjczMjcgMCAwIDEuNzMyNyAtMy42MjgyIC4wOTk1NzcpIiBmaWxsPSIjNjE2MTYxIj4KICA8cGF0aCB0cmFuc2Zvcm09Im1hdHJpeCgxLjUsMCwwLDEuNSwwLC02KSIgZD0ibTEyLjE4NiA3LjUwOThjLTEuMDUzNSAwLTEuOTc1NyAwLjU2NjUtMi40Nzg1IDEuNDEwMiAwLjc1MDYxIDAuMzEyNzcgMS4zOTc0IDAuODI2NDggMS44NzMgMS40NzI3aDMuNDg2M2MwLTEuNTkyLTEuMjg4OS0yLjg4MjgtMi44ODA5LTIuODgyOHoiLz4KICA8cGF0aCBkPSJtMjAuNDY1IDIuMzg5NWEyLjE4ODUgMi4xODg1IDAgMCAxLTIuMTg4NCAyLjE4ODUgMi4xODg1IDIuMTg4NSAwIDAgMS0yLjE4ODUtMi4xODg1IDIuMTg4NSAyLjE4ODUgMCAwIDEgMi4xODg1LTIuMTg4NSAyLjE4ODUgMi4xODg1IDAgMCAxIDIuMTg4NCAyLjE4ODV6Ii8+CiAgPHBhdGggdHJhbnNmb3JtPSJtYXRyaXgoMS41LDAsMCwxLjUsMCwtNikiIGQ9Im0zLjU4OTggOC40MjE5Yy0xLjExMjYgMC0yLjAxMzcgMC45MDExMS0yLjAxMzcgMi4wMTM3aDIuODE0NWMwLjI2Nzk3LTAuMzczMDkgMC41OTA3LTAuNzA0MzUgMC45NTg5OC0wLjk3ODUyLTAuMzQ0MzMtMC42MTY4OC0xLjAwMzEtMS4wMzUyLTEuNzU5OC0xLjAzNTJ6Ii8+CiAgPHBhdGggZD0ibTYuOTE1NCA0LjYyM2ExLjUyOTQgMS41Mjk0IDAgMCAxLTEuNTI5NCAxLjUyOTQgMS41Mjk0IDEuNTI5NCAwIDAgMS0xLjUyOTQtMS41Mjk0IDEuNTI5NCAxLjUyOTQgMCAwIDEgMS41Mjk0LTEuNTI5NCAxLjUyOTQgMS41Mjk0IDAgMCAxIDEuNTI5NCAxLjUyOTR6Ii8+CiAgPHBhdGggZD0ibTYuMTM1IDEzLjUzNWMwLTMuMjM5MiAyLjYyNTktNS44NjUgNS44NjUtNS44NjUgMy4yMzkyIDAgNS44NjUgMi42MjU5IDUuODY1IDUuODY1eiIvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMy43Njg1IiByPSIyLjk2ODUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-word: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KIDxnIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzQxNDE0MSI+CiAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiA8L2c+CiA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNDMgLjA0MDEpIiBmaWxsPSIjZmZmIj4KICA8cGF0aCBkPSJtNC4xNCA4Ljc2cTAuMDY4Mi0xLjg5IDIuNDItMS44OSAxLjE2IDAgMS42OCAwLjQyIDAuNTY3IDAuNDEgMC41NjcgMS4xNnYzLjQ3cTAgMC40NjIgMC41MTQgMC40NjIgMC4xMDMgMCAwLjItMC4wMjMxdjAuNzE0cS0wLjM5OSAwLjEwMy0wLjY1MSAwLjEwMy0wLjQ1MiAwLTAuNjkzLTAuMjItMC4yMzEtMC4yLTAuMjg0LTAuNjYyLTAuOTU2IDAuODcyLTIgMC44NzItMC45MDMgMC0xLjQ3LTAuNDcyLTAuNTI1LTAuNDcyLTAuNTI1LTEuMjYgMC0wLjI2MiAwLjA0NTItMC40NzIgMC4wNTY3LTAuMjIgMC4xMTYtMC4zNzggMC4wNjgyLTAuMTY4IDAuMjMxLTAuMzA0IDAuMTU4LTAuMTQ3IDAuMjYyLTAuMjQyIDAuMTE2LTAuMDkxNCAwLjM2OC0wLjE2OCAwLjI2Mi0wLjA5MTQgMC4zOTktMC4xMjYgMC4xMzYtMC4wNDUyIDAuNDcyLTAuMTAzIDAuMzM2LTAuMDU3OCAwLjUwNC0wLjA3OTggMC4xNTgtMC4wMjMxIDAuNTY3LTAuMDc5OCAwLjU1Ni0wLjA2ODIgMC43NzctMC4yMjEgMC4yMi0wLjE1MiAwLjIyLTAuNDQxdi0wLjI1MnEwLTAuNDMtMC4zNTctMC42NjItMC4zMzYtMC4yMzEtMC45NzYtMC4yMzEtMC42NjIgMC0wLjk5OCAwLjI2Mi0wLjMzNiAwLjI1Mi0wLjM5OSAwLjc5OHptMS44OSAzLjY4cTAuNzg4IDAgMS4yNi0wLjQxIDAuNTA0LTAuNDIgMC41MDQtMC45MDN2LTEuMDVxLTAuMjg0IDAuMTM2LTAuODYxIDAuMjMxLTAuNTY3IDAuMDkxNC0wLjk4NyAwLjE1OC0wLjQyIDAuMDY4Mi0wLjc2NiAwLjMyNi0wLjMzNiAwLjI1Mi0wLjMzNiAwLjcwNHQwLjMwNCAwLjcwNCAwLjg2MSAwLjI1MnoiIHN0cm9rZS13aWR0aD0iMS4wNSIvPgogIDxwYXRoIGQ9Im0xMCA0LjU2aDAuOTQ1djMuMTVxMC42NTEtMC45NzYgMS44OS0wLjk3NiAxLjE2IDAgMS44OSAwLjg0IDAuNjgyIDAuODQgMC42ODIgMi4zMSAwIDEuNDctMC43MDQgMi40Mi0wLjcwNCAwLjg4Mi0xLjg5IDAuODgyLTEuMjYgMC0xLjg5LTEuMDJ2MC43NjZoLTAuODV6bTIuNjIgMy4wNHEtMC43NDYgMC0xLjE2IDAuNjQtMC40NTIgMC42My0wLjQ1MiAxLjY4IDAgMS4wNSAwLjQ1MiAxLjY4dDEuMTYgMC42M3EwLjc3NyAwIDEuMjYtMC42MyAwLjQ5NC0wLjY0IDAuNDk0LTEuNjggMC0xLjA1LTAuNDcyLTEuNjgtMC40NjItMC42NC0xLjI2LTAuNjR6IiBzdHJva2Utd2lkdGg9IjEuMDUiLz4KICA8cGF0aCBkPSJtMi43MyAxNS44IDEzLjYgMC4wMDgxYzAuMDA2OSAwIDAtMi42IDAtMi42IDAtMC4wMDc4LTEuMTUgMC0xLjE1IDAtMC4wMDY5IDAtMC4wMDgzIDEuNS0wLjAwODMgMS41LTJlLTMgLTAuMDAxNC0xMS4zLTAuMDAxNC0xMS4zLTAuMDAxNGwtMC4wMDU5Mi0xLjVjMC0wLjAwNzgtMS4xNyAwLjAwMTMtMS4xNyAwLjAwMTN6IiBzdHJva2Utd2lkdGg9Ii45NzUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K);
}

/* Icon CSS class declarations */

.jp-AddAboveIcon {
  background-image: var(--jp-icon-add-above);
}

.jp-AddBelowIcon {
  background-image: var(--jp-icon-add-below);
}

.jp-AddIcon {
  background-image: var(--jp-icon-add);
}

.jp-BellIcon {
  background-image: var(--jp-icon-bell);
}

.jp-BugDotIcon {
  background-image: var(--jp-icon-bug-dot);
}

.jp-BugIcon {
  background-image: var(--jp-icon-bug);
}

.jp-BuildIcon {
  background-image: var(--jp-icon-build);
}

.jp-CaretDownEmptyIcon {
  background-image: var(--jp-icon-caret-down-empty);
}

.jp-CaretDownEmptyThinIcon {
  background-image: var(--jp-icon-caret-down-empty-thin);
}

.jp-CaretDownIcon {
  background-image: var(--jp-icon-caret-down);
}

.jp-CaretLeftIcon {
  background-image: var(--jp-icon-caret-left);
}

.jp-CaretRightIcon {
  background-image: var(--jp-icon-caret-right);
}

.jp-CaretUpEmptyThinIcon {
  background-image: var(--jp-icon-caret-up-empty-thin);
}

.jp-CaretUpIcon {
  background-image: var(--jp-icon-caret-up);
}

.jp-CaseSensitiveIcon {
  background-image: var(--jp-icon-case-sensitive);
}

.jp-CheckIcon {
  background-image: var(--jp-icon-check);
}

.jp-CircleEmptyIcon {
  background-image: var(--jp-icon-circle-empty);
}

.jp-CircleIcon {
  background-image: var(--jp-icon-circle);
}

.jp-ClearIcon {
  background-image: var(--jp-icon-clear);
}

.jp-CloseIcon {
  background-image: var(--jp-icon-close);
}

.jp-CodeCheckIcon {
  background-image: var(--jp-icon-code-check);
}

.jp-CodeIcon {
  background-image: var(--jp-icon-code);
}

.jp-CollapseAllIcon {
  background-image: var(--jp-icon-collapse-all);
}

.jp-ConsoleIcon {
  background-image: var(--jp-icon-console);
}

.jp-CopyIcon {
  background-image: var(--jp-icon-copy);
}

.jp-CopyrightIcon {
  background-image: var(--jp-icon-copyright);
}

.jp-CutIcon {
  background-image: var(--jp-icon-cut);
}

.jp-DeleteIcon {
  background-image: var(--jp-icon-delete);
}

.jp-DownloadIcon {
  background-image: var(--jp-icon-download);
}

.jp-DuplicateIcon {
  background-image: var(--jp-icon-duplicate);
}

.jp-EditIcon {
  background-image: var(--jp-icon-edit);
}

.jp-EllipsesIcon {
  background-image: var(--jp-icon-ellipses);
}

.jp-ErrorIcon {
  background-image: var(--jp-icon-error);
}

.jp-ExpandAllIcon {
  background-image: var(--jp-icon-expand-all);
}

.jp-ExtensionIcon {
  background-image: var(--jp-icon-extension);
}

.jp-FastForwardIcon {
  background-image: var(--jp-icon-fast-forward);
}

.jp-FileIcon {
  background-image: var(--jp-icon-file);
}

.jp-FileUploadIcon {
  background-image: var(--jp-icon-file-upload);
}

.jp-FilterDotIcon {
  background-image: var(--jp-icon-filter-dot);
}

.jp-FilterIcon {
  background-image: var(--jp-icon-filter);
}

.jp-FilterListIcon {
  background-image: var(--jp-icon-filter-list);
}

.jp-FolderFavoriteIcon {
  background-image: var(--jp-icon-folder-favorite);
}

.jp-FolderIcon {
  background-image: var(--jp-icon-folder);
}

.jp-HomeIcon {
  background-image: var(--jp-icon-home);
}

.jp-Html5Icon {
  background-image: var(--jp-icon-html5);
}

.jp-ImageIcon {
  background-image: var(--jp-icon-image);
}

.jp-InfoIcon {
  background-image: var(--jp-icon-info);
}

.jp-InspectorIcon {
  background-image: var(--jp-icon-inspector);
}

.jp-JsonIcon {
  background-image: var(--jp-icon-json);
}

.jp-JuliaIcon {
  background-image: var(--jp-icon-julia);
}

.jp-JupyterFaviconIcon {
  background-image: var(--jp-icon-jupyter-favicon);
}

.jp-JupyterIcon {
  background-image: var(--jp-icon-jupyter);
}

.jp-JupyterlabWordmarkIcon {
  background-image: var(--jp-icon-jupyterlab-wordmark);
}

.jp-KernelIcon {
  background-image: var(--jp-icon-kernel);
}

.jp-KeyboardIcon {
  background-image: var(--jp-icon-keyboard);
}

.jp-LaunchIcon {
  background-image: var(--jp-icon-launch);
}

.jp-LauncherIcon {
  background-image: var(--jp-icon-launcher);
}

.jp-LineFormIcon {
  background-image: var(--jp-icon-line-form);
}

.jp-LinkIcon {
  background-image: var(--jp-icon-link);
}

.jp-ListIcon {
  background-image: var(--jp-icon-list);
}

.jp-MarkdownIcon {
  background-image: var(--jp-icon-markdown);
}

.jp-MoveDownIcon {
  background-image: var(--jp-icon-move-down);
}

.jp-MoveUpIcon {
  background-image: var(--jp-icon-move-up);
}

.jp-NewFolderIcon {
  background-image: var(--jp-icon-new-folder);
}

.jp-NotTrustedIcon {
  background-image: var(--jp-icon-not-trusted);
}

.jp-NotebookIcon {
  background-image: var(--jp-icon-notebook);
}

.jp-NumberingIcon {
  background-image: var(--jp-icon-numbering);
}

.jp-OfflineBoltIcon {
  background-image: var(--jp-icon-offline-bolt);
}

.jp-PaletteIcon {
  background-image: var(--jp-icon-palette);
}

.jp-PasteIcon {
  background-image: var(--jp-icon-paste);
}

.jp-PdfIcon {
  background-image: var(--jp-icon-pdf);
}

.jp-PythonIcon {
  background-image: var(--jp-icon-python);
}

.jp-RKernelIcon {
  background-image: var(--jp-icon-r-kernel);
}

.jp-ReactIcon {
  background-image: var(--jp-icon-react);
}

.jp-RedoIcon {
  background-image: var(--jp-icon-redo);
}

.jp-RefreshIcon {
  background-image: var(--jp-icon-refresh);
}

.jp-RegexIcon {
  background-image: var(--jp-icon-regex);
}

.jp-RunIcon {
  background-image: var(--jp-icon-run);
}

.jp-RunningIcon {
  background-image: var(--jp-icon-running);
}

.jp-SaveIcon {
  background-image: var(--jp-icon-save);
}

.jp-SearchIcon {
  background-image: var(--jp-icon-search);
}

.jp-SettingsIcon {
  background-image: var(--jp-icon-settings);
}

.jp-ShareIcon {
  background-image: var(--jp-icon-share);
}

.jp-SpreadsheetIcon {
  background-image: var(--jp-icon-spreadsheet);
}

.jp-StopIcon {
  background-image: var(--jp-icon-stop);
}

.jp-TabIcon {
  background-image: var(--jp-icon-tab);
}

.jp-TableRowsIcon {
  background-image: var(--jp-icon-table-rows);
}

.jp-TagIcon {
  background-image: var(--jp-icon-tag);
}

.jp-TerminalIcon {
  background-image: var(--jp-icon-terminal);
}

.jp-TextEditorIcon {
  background-image: var(--jp-icon-text-editor);
}

.jp-TocIcon {
  background-image: var(--jp-icon-toc);
}

.jp-TreeViewIcon {
  background-image: var(--jp-icon-tree-view);
}

.jp-TrustedIcon {
  background-image: var(--jp-icon-trusted);
}

.jp-UndoIcon {
  background-image: var(--jp-icon-undo);
}

.jp-UserIcon {
  background-image: var(--jp-icon-user);
}

.jp-UsersIcon {
  background-image: var(--jp-icon-users);
}

.jp-VegaIcon {
  background-image: var(--jp-icon-vega);
}

.jp-WordIcon {
  background-image: var(--jp-icon-word);
}

.jp-YamlIcon {
  background-image: var(--jp-icon-yaml);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

.jp-Icon,
.jp-MaterialIcon {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/**
 * (DEPRECATED) Support for specific CSS icon sizes
 */

.jp-Icon-16 {
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-18 {
  background-size: 18px;
  min-width: 18px;
  min-height: 18px;
}

.jp-Icon-20 {
  background-size: 20px;
  min-width: 20px;
  min-height: 20px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.lm-TabBar .lm-TabBar-addButton {
  align-items: center;
  display: flex;
  padding: 4px;
  padding-bottom: 5px;
  margin-right: 1px;
  background-color: var(--jp-layout-color2);
}

.lm-TabBar .lm-TabBar-addButton:hover {
  background-color: var(--jp-layout-color1);
}

.lm-DockPanel-tabBar .lm-TabBar-tab {
  width: var(--jp-private-horizontal-tab-width);
}

.lm-DockPanel-tabBar .lm-TabBar-content {
  flex: unset;
}

.lm-DockPanel-tabBar[data-orientation='horizontal'] {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for icons as inline SVG HTMLElements
 */

/* recolor the primary elements of an icon */
.jp-icon0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-accent0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-accent1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-accent2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-accent3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-accent4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-accent0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-accent1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-accent2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-accent3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-accent4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-none[fill] {
  fill: none;
}

.jp-icon-none[stroke] {
  stroke: none;
}

/* brand icon colors. Same for light and dark */
.jp-icon-brand0[fill] {
  fill: var(--jp-brand-color0);
}

.jp-icon-brand1[fill] {
  fill: var(--jp-brand-color1);
}

.jp-icon-brand2[fill] {
  fill: var(--jp-brand-color2);
}

.jp-icon-brand3[fill] {
  fill: var(--jp-brand-color3);
}

.jp-icon-brand4[fill] {
  fill: var(--jp-brand-color4);
}

.jp-icon-brand0[stroke] {
  stroke: var(--jp-brand-color0);
}

.jp-icon-brand1[stroke] {
  stroke: var(--jp-brand-color1);
}

.jp-icon-brand2[stroke] {
  stroke: var(--jp-brand-color2);
}

.jp-icon-brand3[stroke] {
  stroke: var(--jp-brand-color3);
}

.jp-icon-brand4[stroke] {
  stroke: var(--jp-brand-color4);
}

/* warn icon colors. Same for light and dark */
.jp-icon-warn0[fill] {
  fill: var(--jp-warn-color0);
}

.jp-icon-warn1[fill] {
  fill: var(--jp-warn-color1);
}

.jp-icon-warn2[fill] {
  fill: var(--jp-warn-color2);
}

.jp-icon-warn3[fill] {
  fill: var(--jp-warn-color3);
}

.jp-icon-warn0[stroke] {
  stroke: var(--jp-warn-color0);
}

.jp-icon-warn1[stroke] {
  stroke: var(--jp-warn-color1);
}

.jp-icon-warn2[stroke] {
  stroke: var(--jp-warn-color2);
}

.jp-icon-warn3[stroke] {
  stroke: var(--jp-warn-color3);
}

/* icon colors that contrast well with each other and most backgrounds */
.jp-icon-contrast0[fill] {
  fill: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[fill] {
  fill: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[fill] {
  fill: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[fill] {
  fill: var(--jp-icon-contrast-color3);
}

.jp-icon-contrast0[stroke] {
  stroke: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[stroke] {
  stroke: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[stroke] {
  stroke: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[stroke] {
  stroke: var(--jp-icon-contrast-color3);
}

.jp-icon-dot[fill] {
  fill: var(--jp-warn-color0);
}

.jp-jupyter-icon-color[fill] {
  fill: var(--jp-jupyter-icon-color, var(--jp-warn-color0));
}

.jp-notebook-icon-color[fill] {
  fill: var(--jp-notebook-icon-color, var(--jp-warn-color0));
}

.jp-json-icon-color[fill] {
  fill: var(--jp-json-icon-color, var(--jp-warn-color1));
}

.jp-console-icon-color[fill] {
  fill: var(--jp-console-icon-color, white);
}

.jp-console-icon-background-color[fill] {
  fill: var(--jp-console-icon-background-color, var(--jp-brand-color1));
}

.jp-terminal-icon-color[fill] {
  fill: var(--jp-terminal-icon-color, var(--jp-layout-color2));
}

.jp-terminal-icon-background-color[fill] {
  fill: var(
    --jp-terminal-icon-background-color,
    var(--jp-inverse-layout-color2)
  );
}

.jp-text-editor-icon-color[fill] {
  fill: var(--jp-text-editor-icon-color, var(--jp-inverse-layout-color3));
}

.jp-inspector-icon-color[fill] {
  fill: var(--jp-inspector-icon-color, var(--jp-inverse-layout-color3));
}

/* CSS for icons in selected filebrowser listing items */
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

.jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* stylelint-disable selector-max-class, selector-max-compound-selectors */

/**
* TODO: come up with non css-hack solution for showing the busy icon on top
*  of the close icon
* CSS for complex behavior of close icon of tabs in the main area tabbar
*/
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}

.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

/* stylelint-enable selector-max-class, selector-max-compound-selectors */

/* CSS for icons in status bar */
#jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

#jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* special handling for splash icon CSS. While the theme CSS reloads during
   splash, the splash icon can loose theming. To prevent that, we set a
   default for its color variable */
:root {
  --jp-warn-color0: var(--md-orange-700);
}

/* not sure what to do with this one, used in filebrowser listing */
.jp-DragIcon {
  margin-right: 4px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for alt colors for icons as inline SVG HTMLElements
 */

/* alt recolor the primary elements of an icon */
.jp-icon-alt .jp-icon0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-alt .jp-icon0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* alt recolor the accent elements of an icon */
.jp-icon-alt .jp-icon-accent0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-alt .jp-icon-accent0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-icon-hoverShow:not(:hover) .jp-icon-hoverShow-content {
  display: none !important;
}

/**
 * Support for hover colors for icons as inline SVG HTMLElements
 */

/**
 * regular colors
 */

/* recolor the primary elements of an icon */
.jp-icon-hover :hover .jp-icon0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-hover :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-hover :hover .jp-icon-none-hover[fill] {
  fill: none;
}

.jp-icon-hover :hover .jp-icon-none-hover[stroke] {
  stroke: none;
}

/**
 * inverse colors
 */

/* inverse recolor the primary elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* inverse recolor the accent elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-IFrame {
  width: 100%;
  height: 100%;
}

.jp-IFrame > iframe {
  border: none;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-IFrame {
  position: relative;
}

body.lm-mod-override-cursor .jp-IFrame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-HoverBox {
  position: fixed;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FormGroup-content fieldset {
  border: none;
  padding: 0;
  min-width: 0;
  width: 100%;
}

/* stylelint-disable selector-max-type */

.jp-FormGroup-content fieldset .jp-inputFieldWrapper input,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper select,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper textarea {
  font-size: var(--jp-content-font-size2);
  border-color: var(--jp-input-border-color);
  border-style: solid;
  border-radius: var(--jp-border-radius);
  border-width: 1px;
  padding: 6px 8px;
  background: none;
  color: var(--jp-ui-font-color0);
  height: inherit;
}

.jp-FormGroup-content fieldset input[type='checkbox'] {
  position: relative;
  top: 2px;
  margin-left: 0;
}

.jp-FormGroup-content button.jp-mod-styled {
  cursor: pointer;
}

.jp-FormGroup-content .checkbox label {
  cursor: pointer;
  font-size: var(--jp-content-font-size1);
}

.jp-FormGroup-content .jp-root > fieldset > legend {
  display: none;
}

.jp-FormGroup-content .jp-root > fieldset > p {
  display: none;
}

/** copy of `input.jp-mod-styled:focus` style */
.jp-FormGroup-content fieldset input:focus,
.jp-FormGroup-content fieldset select:focus {
  -moz-outline-radius: unset;
  outline: var(--jp-border-width) solid var(--md-blue-500);
  outline-offset: -1px;
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-FormGroup-content fieldset input:hover:not(:focus),
.jp-FormGroup-content fieldset select:hover:not(:focus) {
  background-color: var(--jp-border-color2);
}

/* stylelint-enable selector-max-type */

.jp-FormGroup-content .checkbox .field-description {
  /* Disable default description field for checkbox:
   because other widgets do not have description fields,
   we add descriptions to each widget on the field level.
  */
  display: none;
}

.jp-FormGroup-content #root__description {
  display: none;
}

.jp-FormGroup-content .jp-modifiedIndicator {
  width: 5px;
  background-color: var(--jp-brand-color2);
  margin-top: 0;
  margin-left: calc(var(--jp-private-settingeditor-modifier-indent) * -1);
  flex-shrink: 0;
}

.jp-FormGroup-content .jp-modifiedIndicator.jp-errorIndicator {
  background-color: var(--jp-error-color0);
  margin-right: 0.5em;
}

/* RJSF ARRAY style */

.jp-arrayFieldWrapper legend {
  font-size: var(--jp-content-font-size2);
  color: var(--jp-ui-font-color0);
  flex-basis: 100%;
  padding: 4px 0;
  font-weight: var(--jp-content-heading-font-weight);
  border-bottom: 1px solid var(--jp-border-color2);
}

.jp-arrayFieldWrapper .field-description {
  padding: 4px 0;
  white-space: pre-wrap;
}

.jp-arrayFieldWrapper .array-item {
  width: 100%;
  border: 1px solid var(--jp-border-color2);
  border-radius: 4px;
  margin: 4px;
}

.jp-ArrayOperations {
  display: flex;
  margin-left: 8px;
}

.jp-ArrayOperationsButton {
  margin: 2px;
}

.jp-ArrayOperationsButton .jp-icon3[fill] {
  fill: var(--jp-ui-font-color0);
}

button.jp-ArrayOperationsButton.jp-mod-styled:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* RJSF form validation error */

.jp-FormGroup-content .validationErrors {
  color: var(--jp-error-color0);
}

/* Hide panel level error as duplicated the field level error */
.jp-FormGroup-content .panel.errors {
  display: none;
}

/* RJSF normal content (settings-editor) */

.jp-FormGroup-contentNormal {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-FormGroup-contentItem {
  margin-left: 7px;
  color: var(--jp-ui-font-color0);
}

.jp-FormGroup-contentNormal .jp-FormGroup-description {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-default {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-fieldLabel {
  font-size: var(--jp-content-font-size1);
  font-weight: normal;
  min-width: 120px;
}

.jp-FormGroup-contentNormal fieldset:not(:first-child) {
  margin-left: 7px;
}

.jp-FormGroup-contentNormal .field-array-of-string .array-item {
  /* Display `jp-ArrayOperations` buttons side-by-side with content except
    for small screens where flex-wrap will place them one below the other.
  */
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-objectFieldWrapper .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

/* RJSF compact content (metadata-form) */

.jp-FormGroup-content.jp-FormGroup-contentCompact {
  width: 100%;
}

.jp-FormGroup-contentCompact .form-group {
  display: flex;
  padding: 0.5em 0.2em 0.5em 0;
}

.jp-FormGroup-contentCompact
  .jp-FormGroup-compactTitle
  .jp-FormGroup-description {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color2);
}

.jp-FormGroup-contentCompact .jp-FormGroup-fieldLabel {
  padding-bottom: 0.3em;
}

.jp-FormGroup-contentCompact .jp-inputFieldWrapper .form-control {
  width: 100%;
  box-sizing: border-box;
}

.jp-FormGroup-contentCompact .jp-arrayFieldWrapper .jp-FormGroup-compactTitle {
  padding-bottom: 7px;
}

.jp-FormGroup-contentCompact
  .jp-objectFieldWrapper
  .jp-objectFieldWrapper
  .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

.jp-FormGroup-contentCompact ul.error-detail {
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
  padding-inline-start: 1em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-SidePanel {
  display: flex;
  flex-direction: column;
  min-width: var(--jp-sidebar-min-width);
  overflow-y: auto;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  font-size: var(--jp-ui-font-size1);
}

.jp-SidePanel-header {
  flex: 0 0 auto;
  display: flex;
  border-bottom: var(--jp-border-width) solid var(--jp-border-color2);
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin: 0;
  padding: 2px;
  text-transform: uppercase;
}

.jp-SidePanel-toolbar {
  flex: 0 0 auto;
}

.jp-SidePanel-content {
  flex: 1 1 auto;
}

.jp-SidePanel-toolbar,
.jp-AccordionPanel-toolbar {
  height: var(--jp-private-toolbar-height);
}

.jp-SidePanel-toolbar.jp-Toolbar-micro {
  display: none;
}

.lm-AccordionPanel .jp-AccordionPanel-title {
  box-sizing: border-box;
  line-height: 25px;
  margin: 0;
  display: flex;
  align-items: center;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  font-size: var(--jp-ui-font-size0);
}

.jp-AccordionPanel-title {
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  text-transform: uppercase;
}

.lm-AccordionPanel[data-orientation='horizontal'] > .jp-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleLabel {
  user-select: none;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleCollapser {
  transform: rotate(-90deg);
  margin: auto 0;
  height: 16px;
}

.jp-AccordionPanel-title.lm-mod-expanded .lm-AccordionPanel-titleCollapser {
  transform: rotate(0deg);
}

.lm-AccordionPanel .jp-AccordionPanel-toolbar {
  background: none;
  box-shadow: none;
  border: none;
  margin-left: auto;
}

.lm-AccordionPanel .lm-SplitPanel-handle:hover {
  background: var(--jp-layout-color3);
}

.jp-text-truncated {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Spinner {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-layout-color0);
  outline: none;
}

.jp-SpinnerContent {
  font-size: 10px;
  margin: 50px auto;
  text-indent: -9999em;
  width: 3em;
  height: 3em;
  border-radius: 50%;
  background: var(--jp-brand-color3);
  background: linear-gradient(
    to right,
    #f37626 10%,
    rgba(255, 255, 255, 0) 42%
  );
  position: relative;
  animation: load3 1s infinite linear, fadeIn 1s;
}

.jp-SpinnerContent::before {
  width: 50%;
  height: 50%;
  background: #f37626;
  border-radius: 100% 0 0;
  position: absolute;
  top: 0;
  left: 0;
  content: '';
}

.jp-SpinnerContent::after {
  background: var(--jp-layout-color0);
  width: 75%;
  height: 75%;
  border-radius: 50%;
  content: '';
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes load3 {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

button.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: none;
  box-sizing: border-box;
  text-align: center;
  line-height: 32px;
  height: 32px;
  padding: 0 12px;
  letter-spacing: 0.8px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input.jp-mod-styled {
  background: var(--jp-input-background);
  height: 28px;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color1);
  padding-left: 7px;
  padding-right: 7px;
  font-size: var(--jp-ui-font-size2);
  color: var(--jp-ui-font-color0);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input[type='checkbox'].jp-mod-styled {
  appearance: checkbox;
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  height: auto;
}

input.jp-mod-styled:focus {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-select-wrapper {
  display: flex;
  position: relative;
  flex-direction: column;
  padding: 1px;
  background-color: var(--jp-layout-color1);
  box-sizing: border-box;
  margin-bottom: 12px;
}

.jp-select-wrapper:not(.multiple) {
  height: 28px;
}

.jp-select-wrapper.jp-mod-focused select.jp-mod-styled {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-input-active-background);
}

select.jp-mod-styled:hover {
  cursor: pointer;
  color: var(--jp-ui-font-color0);
  background-color: var(--jp-input-hover-background);
  box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.5);
}

select.jp-mod-styled {
  flex: 1 1 auto;
  width: 100%;
  font-size: var(--jp-ui-font-size2);
  background: var(--jp-input-background);
  color: var(--jp-ui-font-color0);
  padding: 0 25px 0 8px;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

select.jp-mod-styled:not([multiple]) {
  height: 32px;
}

select.jp-mod-styled[multiple] {
  max-height: 200px;
  overflow-y: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-switch {
  display: flex;
  align-items: center;
  padding-left: 4px;
  padding-right: 4px;
  font-size: var(--jp-ui-font-size1);
  background-color: transparent;
  color: var(--jp-ui-font-color1);
  border: none;
  height: 20px;
}

.jp-switch:hover {
  background-color: var(--jp-layout-color2);
}

.jp-switch-label {
  margin-right: 5px;
  font-family: var(--jp-ui-font-family);
}

.jp-switch-track {
  cursor: pointer;
  background-color: var(--jp-switch-color, var(--jp-border-color1));
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 34px;
  height: 16px;
  width: 35px;
  position: relative;
}

.jp-switch-track::before {
  content: '';
  position: absolute;
  height: 10px;
  width: 10px;
  margin: 3px;
  left: 0;
  background-color: var(--jp-ui-inverse-font-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 50%;
}

.jp-switch[aria-checked='true'] .jp-switch-track {
  background-color: var(--jp-switch-true-position-color, var(--jp-warn-color0));
}

.jp-switch[aria-checked='true'] .jp-switch-track::before {
  /* track width (35) - margins (3 + 3) - thumb width (10) */
  left: 19px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toolbar-height: calc(
    28px + var(--jp-border-width)
  ); /* leave 28px for content */
}

.jp-Toolbar {
  color: var(--jp-ui-font-color1);
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: 2px;
  z-index: 8;
  overflow-x: hidden;
}

/* Toolbar items */

.jp-Toolbar > .jp-Toolbar-item.jp-Toolbar-spacer {
  flex-grow: 1;
  flex-shrink: 1;
}

.jp-Toolbar-item.jp-Toolbar-kernelStatus {
  display: inline-block;
  width: 32px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 16px;
}

.jp-Toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  display: flex;
  padding-left: 1px;
  padding-right: 1px;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-private-toolbar-height);
  height: 100%;
}

/* Toolbar buttons */

/* This is the div we use to wrap the react component into a Widget */
div.jp-ToolbarButton {
  color: transparent;
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0;
  margin: 0;
}

button.jp-ToolbarButtonComponent {
  background: var(--jp-layout-color1);
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0 6px;
  margin: 0;
  height: 24px;
  border-radius: var(--jp-border-radius);
  display: flex;
  align-items: center;
  text-align: center;
  font-size: 14px;
  min-width: unset;
  min-height: unset;
}

button.jp-ToolbarButtonComponent:disabled {
  opacity: 0.4;
}

button.jp-ToolbarButtonComponent > span {
  padding: 0;
  flex: 0 0 auto;
}

button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label {
  font-size: var(--jp-ui-font-size1);
  line-height: 100%;
  padding-left: 2px;
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar.jp-Toolbar-micro {
  padding: 0;
  min-height: 0;
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar {
  border: none;
  box-shadow: none;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-WindowedPanel-outer {
  position: relative;
  overflow-y: auto;
}

.jp-WindowedPanel-inner {
  position: relative;
}

.jp-WindowedPanel-window {
  position: absolute;
  left: 0;
  right: 0;
  overflow: visible;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* Sibling imports */

body {
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
}

/* Disable native link decoration styles everywhere outside of dialog boxes */
a {
  text-decoration: unset;
  color: unset;
}

a:hover {
  text-decoration: unset;
  color: unset;
}

/* Accessibility for links inside dialog box text */
.jp-Dialog-content a {
  text-decoration: revert;
  color: var(--jp-content-link-color);
}

.jp-Dialog-content a:hover {
  text-decoration: revert;
}

/* Styles for ui-components */
.jp-Button {
  color: var(--jp-ui-font-color2);
  border-radius: var(--jp-border-radius);
  padding: 0 12px;
  font-size: var(--jp-ui-font-size1);

  /* Copy from blueprint 3 */
  display: inline-flex;
  flex-direction: row;
  border: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  text-align: left;
  vertical-align: middle;
  min-height: 30px;
  min-width: 30px;
}

.jp-Button:disabled {
  cursor: not-allowed;
}

.jp-Button:empty {
  padding: 0 !important;
}

.jp-Button.jp-mod-small {
  min-height: 24px;
  min-width: 24px;
  font-size: 12px;
  padding: 0 7px;
}

/* Use our own theme for hover styles */
.jp-Button.jp-mod-minimal:hover {
  background-color: var(--jp-layout-color2);
}

.jp-Button.jp-mod-minimal {
  background: none;
}

.jp-InputGroup {
  display: block;
  position: relative;
}

.jp-InputGroup input {
  box-sizing: border-box;
  border: none;
  border-radius: 0;
  background-color: transparent;
  color: var(--jp-ui-font-color0);
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 10px;
  padding-right: 28px;
  position: relative;
  width: 100%;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  font-size: 14px;
  font-weight: 400;
  height: 30px;
  line-height: 30px;
  outline: none;
  vertical-align: middle;
}

.jp-InputGroup input:focus {
  box-shadow: inset 0 0 0 var(--jp-border-width)
      var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-InputGroup input:disabled {
  cursor: not-allowed;
  resize: block;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input:disabled ~ span {
  cursor: not-allowed;
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input::placeholder,
input::placeholder {
  color: var(--jp-ui-font-color2);
}

.jp-InputGroupAction {
  position: absolute;
  bottom: 1px;
  right: 0;
  padding: 6px;
}

.jp-HTMLSelect.jp-DefaultStyle select {
  background-color: initial;
  border: none;
  border-radius: 0;
  box-shadow: none;
  color: var(--jp-ui-font-color0);
  display: block;
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  height: 24px;
  line-height: 14px;
  padding: 0 25px 0 10px;
  text-align: left;
  -moz-appearance: none;
  -webkit-appearance: none;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
  cursor: not-allowed;
  resize: block;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled ~ span {
  cursor: not-allowed;
}

/* Use our own theme for hover and option styles */
/* stylelint-disable-next-line selector-max-type */
.jp-HTMLSelect.jp-DefaultStyle select:hover,
.jp-HTMLSelect.jp-DefaultStyle select > option {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color0);
}

select {
  box-sizing: border-box;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-StatusBar-Widget {
  display: flex;
  align-items: center;
  background: var(--jp-layout-color2);
  min-height: var(--jp-statusbar-height);
  justify-content: space-between;
  padding: 0 10px;
}

.jp-StatusBar-Left {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-StatusBar-Middle {
  display: flex;
  align-items: center;
}

.jp-StatusBar-Right {
  display: flex;
  align-items: center;
  flex-direction: row-reverse;
}

.jp-StatusBar-Item {
  max-height: var(--jp-statusbar-height);
  margin: 0 2px;
  height: var(--jp-statusbar-height);
  white-space: nowrap;
  text-overflow: ellipsis;
  color: var(--jp-ui-font-color1);
  padding: 0 6px;
}

.jp-mod-highlighted:hover {
  background-color: var(--jp-layout-color3);
}

.jp-mod-clicked {
  background-color: var(--jp-brand-color1);
}

.jp-mod-clicked:hover {
  background-color: var(--jp-brand-color0);
}

.jp-mod-clicked .jp-StatusBar-TextItem {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-StatusBar-HoverItem {
  box-shadow: '0px 4px 4px rgba(0, 0, 0, 0.25)';
}

.jp-StatusBar-TextItem {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  line-height: 24px;
  color: var(--jp-ui-font-color1);
}

.jp-StatusBar-GroupItem {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-Statusbar-ProgressCircle svg {
  display: block;
  margin: 0 auto;
  width: 16px;
  height: 24px;
  align-self: normal;
}

.jp-Statusbar-ProgressCircle path {
  fill: var(--jp-inverse-layout-color3);
}

.jp-Statusbar-ProgressBar-progress-bar {
  height: 10px;
  width: 100px;
  border: solid 0.25px var(--jp-brand-color2);
  border-radius: 3px;
  overflow: hidden;
  align-self: center;
}

.jp-Statusbar-ProgressBar-progress-bar > div {
  background-color: var(--jp-brand-color2);
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px;
  float: left;
  width: 0%;
  height: 100%;
  font-size: 12px;
  line-height: 14px;
  color: #fff;
  text-align: center;
  animation: jp-Statusbar-ExecutionTime-progress-bar 2s linear infinite;
}

.jp-Statusbar-ProgressBar-progress-bar p {
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 10px;
  width: 100px;
}

@keyframes jp-Statusbar-ExecutionTime-progress-bar {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 40px 40px;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-commandpalette-search-height: 28px;
}

/*-----------------------------------------------------------------------------
| Overall styles
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  padding-bottom: 0;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Modal variant
|----------------------------------------------------------------------------*/

.jp-ModalCommandPalette {
  position: absolute;
  z-index: 10000;
  top: 38px;
  left: 30%;
  margin: 0;
  padding: 4px;
  width: 40%;
  box-shadow: var(--jp-elevation-z4);
  border-radius: 4px;
  background: var(--jp-layout-color0);
}

.jp-ModalCommandPalette .lm-CommandPalette {
  max-height: 40vh;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-close-icon::after {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-header {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-item {
  margin-left: 4px;
  margin-right: 4px;
}

.jp-ModalCommandPalette
  .lm-CommandPalette
  .lm-CommandPalette-item.lm-mod-disabled {
  display: none;
}

/*-----------------------------------------------------------------------------
| Search
|----------------------------------------------------------------------------*/

.lm-CommandPalette-search {
  padding: 4px;
  background-color: var(--jp-layout-color1);
  z-index: 2;
}

.lm-CommandPalette-wrapper {
  overflow: overlay;
  padding: 0 9px;
  background-color: var(--jp-input-active-background);
  height: 30px;
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper {
  box-shadow: inset 0 0 0 1px var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-SearchIconGroup {
  color: white;
  background-color: var(--jp-brand-color1);
  position: absolute;
  top: 4px;
  right: 4px;
  padding: 5px 5px 1px;
}

.jp-SearchIconGroup svg {
  height: 20px;
  width: 20px;
}

.jp-SearchIconGroup .jp-icon3[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-input {
  background: transparent;
  width: calc(100% - 18px);
  float: left;
  border: none;
  outline: none;
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  line-height: var(--jp-private-commandpalette-search-height);
}

.lm-CommandPalette-input::-webkit-input-placeholder,
.lm-CommandPalette-input::-moz-placeholder,
.lm-CommandPalette-input:-ms-input-placeholder {
  color: var(--jp-ui-font-color2);
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Results
|----------------------------------------------------------------------------*/

.lm-CommandPalette-header:first-child {
  margin-top: 0;
}

.lm-CommandPalette-header {
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin-top: 8px;
  padding: 8px 0 8px 12px;
  text-transform: uppercase;
}

.lm-CommandPalette-header.lm-mod-active {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-header > mark {
  background-color: transparent;
  font-weight: bold;
  color: var(--jp-ui-font-color1);
}

.lm-CommandPalette-item {
  padding: 4px 12px 4px 4px;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  font-weight: 400;
  display: flex;
}

.lm-CommandPalette-item.lm-mod-disabled {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item.lm-mod-active {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active .jp-icon-selectable[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled) {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-itemContent {
  overflow: hidden;
}

.lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.lm-CommandPalette-item.lm-mod-disabled mark {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item .lm-CommandPalette-itemIcon {
  margin: 0 4px 0 0;
  position: relative;
  width: 16px;
  top: 2px;
  flex: 0 0 auto;
}

.lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon {
  opacity: 0.6;
}

.lm-CommandPalette-item .lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemCaption {
  display: none;
}

.lm-CommandPalette-content {
  background-color: var(--jp-layout-color1);
}

.lm-CommandPalette-content:empty::after {
  content: 'No results';
  margin: auto;
  margin-top: 20px;
  width: 100px;
  display: block;
  font-size: var(--jp-ui-font-size2);
  font-family: var(--jp-ui-font-family);
  font-weight: lighter;
}

.lm-CommandPalette-emptyMessage {
  text-align: center;
  margin-top: 24px;
  line-height: 1.32;
  padding: 0 8px;
  color: var(--jp-content-font-color3);
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Dialog {
  position: absolute;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-dialog-background);
}

.jp-Dialog-content {
  display: flex;
  flex-direction: column;
  margin-left: auto;
  margin-right: auto;
  background: var(--jp-layout-color1);
  padding: 24px 24px 12px;
  min-width: 300px;
  min-height: 150px;
  max-width: 1000px;
  max-height: 500px;
  box-sizing: border-box;
  box-shadow: var(--jp-elevation-z20);
  word-wrap: break-word;
  border-radius: var(--jp-border-radius);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color1);
  resize: both;
}

.jp-Dialog-content.jp-Dialog-content-small {
  max-width: 500px;
}

.jp-Dialog-button {
  overflow: visible;
}

button.jp-Dialog-button:focus {
  outline: 1px solid var(--jp-brand-color1);
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button:focus::-moz-focus-inner {
  border: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus {
  outline: 1px solid var(--jp-accept-color-normal, var(--jp-brand-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus {
  outline: 1px solid var(--jp-warn-color-normal, var(--jp-error-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline: 1px solid var(--jp-reject-color-normal, var(--md-grey-600));
}

button.jp-Dialog-close-button {
  padding: 0;
  height: 100%;
  min-width: unset;
  min-height: unset;
}

.jp-Dialog-header {
  display: flex;
  justify-content: space-between;
  flex: 0 0 auto;
  padding-bottom: 12px;
  font-size: var(--jp-ui-font-size3);
  font-weight: 400;
  color: var(--jp-ui-font-color1);
}

.jp-Dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  font-size: var(--jp-ui-font-size1);
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

.jp-Dialog-footer {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
  flex: 0 0 auto;
  margin-left: -12px;
  margin-right: -12px;
  padding: 12px;
}

.jp-Dialog-checkbox {
  padding-right: 5px;
}

.jp-Dialog-checkbox > input:focus-visible {
  outline: 1px solid var(--jp-input-active-border-color);
  outline-offset: 1px;
}

.jp-Dialog-spacer {
  flex: 1 1 auto;
}

.jp-Dialog-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.jp-Dialog-body > .jp-select-wrapper {
  width: 100%;
}

.jp-Dialog-body > button {
  padding: 0 16px;
}

.jp-Dialog-body > label {
  line-height: 1.4;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-button.jp-mod-styled:not(:last-child) {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Input-Boolean-Dialog {
  flex-direction: row-reverse;
  align-items: end;
  width: 100%;
}

.jp-Input-Boolean-Dialog > label {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MainAreaWidget > :focus {
  outline: none;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error {
  padding: 6px;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error > pre {
  width: auto;
  padding: 10px;
  background: var(--jp-error-color3);
  border: var(--jp-border-width) solid var(--jp-error-color1);
  border-radius: var(--jp-border-radius);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  white-space: pre-wrap;
  word-wrap: break-word;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
:root {
  --md-red-50: #ffebee;
  --md-red-100: #ffcdd2;
  --md-red-200: #ef9a9a;
  --md-red-300: #e57373;
  --md-red-400: #ef5350;
  --md-red-500: #f44336;
  --md-red-600: #e53935;
  --md-red-700: #d32f2f;
  --md-red-800: #c62828;
  --md-red-900: #b71c1c;
  --md-red-A100: #ff8a80;
  --md-red-A200: #ff5252;
  --md-red-A400: #ff1744;
  --md-red-A700: #d50000;
  --md-pink-50: #fce4ec;
  --md-pink-100: #f8bbd0;
  --md-pink-200: #f48fb1;
  --md-pink-300: #f06292;
  --md-pink-400: #ec407a;
  --md-pink-500: #e91e63;
  --md-pink-600: #d81b60;
  --md-pink-700: #c2185b;
  --md-pink-800: #ad1457;
  --md-pink-900: #880e4f;
  --md-pink-A100: #ff80ab;
  --md-pink-A200: #ff4081;
  --md-pink-A400: #f50057;
  --md-pink-A700: #c51162;
  --md-purple-50: #f3e5f5;
  --md-purple-100: #e1bee7;
  --md-purple-200: #ce93d8;
  --md-purple-300: #ba68c8;
  --md-purple-400: #ab47bc;
  --md-purple-500: #9c27b0;
  --md-purple-600: #8e24aa;
  --md-purple-700: #7b1fa2;
  --md-purple-800: #6a1b9a;
  --md-purple-900: #4a148c;
  --md-purple-A100: #ea80fc;
  --md-purple-A200: #e040fb;
  --md-purple-A400: #d500f9;
  --md-purple-A700: #a0f;
  --md-deep-purple-50: #ede7f6;
  --md-deep-purple-100: #d1c4e9;
  --md-deep-purple-200: #b39ddb;
  --md-deep-purple-300: #9575cd;
  --md-deep-purple-400: #7e57c2;
  --md-deep-purple-500: #673ab7;
  --md-deep-purple-600: #5e35b1;
  --md-deep-purple-700: #512da8;
  --md-deep-purple-800: #4527a0;
  --md-deep-purple-900: #311b92;
  --md-deep-purple-A100: #b388ff;
  --md-deep-purple-A200: #7c4dff;
  --md-deep-purple-A400: #651fff;
  --md-deep-purple-A700: #6200ea;
  --md-indigo-50: #e8eaf6;
  --md-indigo-100: #c5cae9;
  --md-indigo-200: #9fa8da;
  --md-indigo-300: #7986cb;
  --md-indigo-400: #5c6bc0;
  --md-indigo-500: #3f51b5;
  --md-indigo-600: #3949ab;
  --md-indigo-700: #303f9f;
  --md-indigo-800: #283593;
  --md-indigo-900: #1a237e;
  --md-indigo-A100: #8c9eff;
  --md-indigo-A200: #536dfe;
  --md-indigo-A400: #3d5afe;
  --md-indigo-A700: #304ffe;
  --md-blue-50: #e3f2fd;
  --md-blue-100: #bbdefb;
  --md-blue-200: #90caf9;
  --md-blue-300: #64b5f6;
  --md-blue-400: #42a5f5;
  --md-blue-500: #2196f3;
  --md-blue-600: #1e88e5;
  --md-blue-700: #1976d2;
  --md-blue-800: #1565c0;
  --md-blue-900: #0d47a1;
  --md-blue-A100: #82b1ff;
  --md-blue-A200: #448aff;
  --md-blue-A400: #2979ff;
  --md-blue-A700: #2962ff;
  --md-light-blue-50: #e1f5fe;
  --md-light-blue-100: #b3e5fc;
  --md-light-blue-200: #81d4fa;
  --md-light-blue-300: #4fc3f7;
  --md-light-blue-400: #29b6f6;
  --md-light-blue-500: #03a9f4;
  --md-light-blue-600: #039be5;
  --md-light-blue-700: #0288d1;
  --md-light-blue-800: #0277bd;
  --md-light-blue-900: #01579b;
  --md-light-blue-A100: #80d8ff;
  --md-light-blue-A200: #40c4ff;
  --md-light-blue-A400: #00b0ff;
  --md-light-blue-A700: #0091ea;
  --md-cyan-50: #e0f7fa;
  --md-cyan-100: #b2ebf2;
  --md-cyan-200: #80deea;
  --md-cyan-300: #4dd0e1;
  --md-cyan-400: #26c6da;
  --md-cyan-500: #00bcd4;
  --md-cyan-600: #00acc1;
  --md-cyan-700: #0097a7;
  --md-cyan-800: #00838f;
  --md-cyan-900: #006064;
  --md-cyan-A100: #84ffff;
  --md-cyan-A200: #18ffff;
  --md-cyan-A400: #00e5ff;
  --md-cyan-A700: #00b8d4;
  --md-teal-50: #e0f2f1;
  --md-teal-100: #b2dfdb;
  --md-teal-200: #80cbc4;
  --md-teal-300: #4db6ac;
  --md-teal-400: #26a69a;
  --md-teal-500: #009688;
  --md-teal-600: #00897b;
  --md-teal-700: #00796b;
  --md-teal-800: #00695c;
  --md-teal-900: #004d40;
  --md-teal-A100: #a7ffeb;
  --md-teal-A200: #64ffda;
  --md-teal-A400: #1de9b6;
  --md-teal-A700: #00bfa5;
  --md-green-50: #e8f5e9;
  --md-green-100: #c8e6c9;
  --md-green-200: #a5d6a7;
  --md-green-300: #81c784;
  --md-green-400: #66bb6a;
  --md-green-500: #4caf50;
  --md-green-600: #43a047;
  --md-green-700: #388e3c;
  --md-green-800: #2e7d32;
  --md-green-900: #1b5e20;
  --md-green-A100: #b9f6ca;
  --md-green-A200: #69f0ae;
  --md-green-A400: #00e676;
  --md-green-A700: #00c853;
  --md-light-green-50: #f1f8e9;
  --md-light-green-100: #dcedc8;
  --md-light-green-200: #c5e1a5;
  --md-light-green-300: #aed581;
  --md-light-green-400: #9ccc65;
  --md-light-green-500: #8bc34a;
  --md-light-green-600: #7cb342;
  --md-light-green-700: #689f38;
  --md-light-green-800: #558b2f;
  --md-light-green-900: #33691e;
  --md-light-green-A100: #ccff90;
  --md-light-green-A200: #b2ff59;
  --md-light-green-A400: #76ff03;
  --md-light-green-A700: #64dd17;
  --md-lime-50: #f9fbe7;
  --md-lime-100: #f0f4c3;
  --md-lime-200: #e6ee9c;
  --md-lime-300: #dce775;
  --md-lime-400: #d4e157;
  --md-lime-500: #cddc39;
  --md-lime-600: #c0ca33;
  --md-lime-700: #afb42b;
  --md-lime-800: #9e9d24;
  --md-lime-900: #827717;
  --md-lime-A100: #f4ff81;
  --md-lime-A200: #eeff41;
  --md-lime-A400: #c6ff00;
  --md-lime-A700: #aeea00;
  --md-yellow-50: #fffde7;
  --md-yellow-100: #fff9c4;
  --md-yellow-200: #fff59d;
  --md-yellow-300: #fff176;
  --md-yellow-400: #ffee58;
  --md-yellow-500: #ffeb3b;
  --md-yellow-600: #fdd835;
  --md-yellow-700: #fbc02d;
  --md-yellow-800: #f9a825;
  --md-yellow-900: #f57f17;
  --md-yellow-A100: #ffff8d;
  --md-yellow-A200: #ff0;
  --md-yellow-A400: #ffea00;
  --md-yellow-A700: #ffd600;
  --md-amber-50: #fff8e1;
  --md-amber-100: #ffecb3;
  --md-amber-200: #ffe082;
  --md-amber-300: #ffd54f;
  --md-amber-400: #ffca28;
  --md-amber-500: #ffc107;
  --md-amber-600: #ffb300;
  --md-amber-700: #ffa000;
  --md-amber-800: #ff8f00;
  --md-amber-900: #ff6f00;
  --md-amber-A100: #ffe57f;
  --md-amber-A200: #ffd740;
  --md-amber-A400: #ffc400;
  --md-amber-A700: #ffab00;
  --md-orange-50: #fff3e0;
  --md-orange-100: #ffe0b2;
  --md-orange-200: #ffcc80;
  --md-orange-300: #ffb74d;
  --md-orange-400: #ffa726;
  --md-orange-500: #ff9800;
  --md-orange-600: #fb8c00;
  --md-orange-700: #f57c00;
  --md-orange-800: #ef6c00;
  --md-orange-900: #e65100;
  --md-orange-A100: #ffd180;
  --md-orange-A200: #ffab40;
  --md-orange-A400: #ff9100;
  --md-orange-A700: #ff6d00;
  --md-deep-orange-50: #fbe9e7;
  --md-deep-orange-100: #ffccbc;
  --md-deep-orange-200: #ffab91;
  --md-deep-orange-300: #ff8a65;
  --md-deep-orange-400: #ff7043;
  --md-deep-orange-500: #ff5722;
  --md-deep-orange-600: #f4511e;
  --md-deep-orange-700: #e64a19;
  --md-deep-orange-800: #d84315;
  --md-deep-orange-900: #bf360c;
  --md-deep-orange-A100: #ff9e80;
  --md-deep-orange-A200: #ff6e40;
  --md-deep-orange-A400: #ff3d00;
  --md-deep-orange-A700: #dd2c00;
  --md-brown-50: #efebe9;
  --md-brown-100: #d7ccc8;
  --md-brown-200: #bcaaa4;
  --md-brown-300: #a1887f;
  --md-brown-400: #8d6e63;
  --md-brown-500: #795548;
  --md-brown-600: #6d4c41;
  --md-brown-700: #5d4037;
  --md-brown-800: #4e342e;
  --md-brown-900: #3e2723;
  --md-grey-50: #fafafa;
  --md-grey-100: #f5f5f5;
  --md-grey-200: #eee;
  --md-grey-300: #e0e0e0;
  --md-grey-400: #bdbdbd;
  --md-grey-500: #9e9e9e;
  --md-grey-600: #757575;
  --md-grey-700: #616161;
  --md-grey-800: #424242;
  --md-grey-900: #212121;
  --md-blue-grey-50: #eceff1;
  --md-blue-grey-100: #cfd8dc;
  --md-blue-grey-200: #b0bec5;
  --md-blue-grey-300: #90a4ae;
  --md-blue-grey-400: #78909c;
  --md-blue-grey-500: #607d8b;
  --md-blue-grey-600: #546e7a;
  --md-blue-grey-700: #455a64;
  --md-blue-grey-800: #37474f;
  --md-blue-grey-900: #263238;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| RenderedText
|----------------------------------------------------------------------------*/

:root {
  /* This is the padding value to fill the gaps between lines containing spans with background color. */
  --jp-private-code-span-padding: calc(
    (var(--jp-code-line-height) - 1) * var(--jp-code-font-size) / 2
  );
}

.jp-RenderedText {
  text-align: left;
  padding-left: var(--jp-code-padding);
  line-height: var(--jp-code-line-height);
  font-family: var(--jp-code-font-family);
}

.jp-RenderedText pre,
.jp-RenderedJavaScript pre,
.jp-RenderedHTMLCommon pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
  border: none;
  margin: 0;
  padding: 0;
}

.jp-RenderedText pre a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* console foregrounds and backgrounds */
.jp-RenderedText pre .ansi-black-fg {
  color: #3e424d;
}

.jp-RenderedText pre .ansi-red-fg {
  color: #e75c58;
}

.jp-RenderedText pre .ansi-green-fg {
  color: #00a250;
}

.jp-RenderedText pre .ansi-yellow-fg {
  color: #ddb62b;
}

.jp-RenderedText pre .ansi-blue-fg {
  color: #208ffb;
}

.jp-RenderedText pre .ansi-magenta-fg {
  color: #d160c4;
}

.jp-RenderedText pre .ansi-cyan-fg {
  color: #60c6c8;
}

.jp-RenderedText pre .ansi-white-fg {
  color: #c5c1b4;
}

.jp-RenderedText pre .ansi-black-bg {
  background-color: #3e424d;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-bg {
  background-color: #e75c58;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-bg {
  background-color: #00a250;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-bg {
  background-color: #ddb62b;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-bg {
  background-color: #208ffb;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-bg {
  background-color: #d160c4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-bg {
  background-color: #60c6c8;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-bg {
  background-color: #c5c1b4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-black-intense-fg {
  color: #282c36;
}

.jp-RenderedText pre .ansi-red-intense-fg {
  color: #b22b31;
}

.jp-RenderedText pre .ansi-green-intense-fg {
  color: #007427;
}

.jp-RenderedText pre .ansi-yellow-intense-fg {
  color: #b27d12;
}

.jp-RenderedText pre .ansi-blue-intense-fg {
  color: #0065ca;
}

.jp-RenderedText pre .ansi-magenta-intense-fg {
  color: #a03196;
}

.jp-RenderedText pre .ansi-cyan-intense-fg {
  color: #258f8f;
}

.jp-RenderedText pre .ansi-white-intense-fg {
  color: #a1a6b2;
}

.jp-RenderedText pre .ansi-black-intense-bg {
  background-color: #282c36;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-intense-bg {
  background-color: #b22b31;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-intense-bg {
  background-color: #007427;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-intense-bg {
  background-color: #b27d12;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-intense-bg {
  background-color: #0065ca;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-intense-bg {
  background-color: #a03196;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-intense-bg {
  background-color: #258f8f;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-intense-bg {
  background-color: #a1a6b2;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-default-inverse-fg {
  color: var(--jp-ui-inverse-font-color0);
}

.jp-RenderedText pre .ansi-default-inverse-bg {
  background-color: var(--jp-inverse-layout-color0);
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-bold {
  font-weight: bold;
}

.jp-RenderedText pre .ansi-underline {
  text-decoration: underline;
}

.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: var(--jp-rendermime-error-background);
  padding-top: var(--jp-code-padding);
}

/*-----------------------------------------------------------------------------
| RenderedLatex
|----------------------------------------------------------------------------*/

.jp-RenderedLatex {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
}

/* Left-justify outputs.*/
.jp-OutputArea-output.jp-RenderedLatex {
  padding: var(--jp-code-padding);
  text-align: left;
}

/*-----------------------------------------------------------------------------
| RenderedHTML
|----------------------------------------------------------------------------*/

.jp-RenderedHTMLCommon {
  color: var(--jp-content-font-color1);
  font-family: var(--jp-content-font-family);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);

  /* Give a bit more R padding on Markdown text to keep line lengths reasonable */
  padding-right: 20px;
}

.jp-RenderedHTMLCommon em {
  font-style: italic;
}

.jp-RenderedHTMLCommon strong {
  font-weight: bold;
}

.jp-RenderedHTMLCommon u {
  text-decoration: underline;
}

.jp-RenderedHTMLCommon a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* Headings */

.jp-RenderedHTMLCommon h1,
.jp-RenderedHTMLCommon h2,
.jp-RenderedHTMLCommon h3,
.jp-RenderedHTMLCommon h4,
.jp-RenderedHTMLCommon h5,
.jp-RenderedHTMLCommon h6 {
  line-height: var(--jp-content-heading-line-height);
  font-weight: var(--jp-content-heading-font-weight);
  font-style: normal;
  margin: var(--jp-content-heading-margin-top) 0
    var(--jp-content-heading-margin-bottom) 0;
}

.jp-RenderedHTMLCommon h1:first-child,
.jp-RenderedHTMLCommon h2:first-child,
.jp-RenderedHTMLCommon h3:first-child,
.jp-RenderedHTMLCommon h4:first-child,
.jp-RenderedHTMLCommon h5:first-child,
.jp-RenderedHTMLCommon h6:first-child {
  margin-top: calc(0.5 * var(--jp-content-heading-margin-top));
}

.jp-RenderedHTMLCommon h1:last-child,
.jp-RenderedHTMLCommon h2:last-child,
.jp-RenderedHTMLCommon h3:last-child,
.jp-RenderedHTMLCommon h4:last-child,
.jp-RenderedHTMLCommon h5:last-child,
.jp-RenderedHTMLCommon h6:last-child {
  margin-bottom: calc(0.5 * var(--jp-content-heading-margin-bottom));
}

.jp-RenderedHTMLCommon h1 {
  font-size: var(--jp-content-font-size5);
}

.jp-RenderedHTMLCommon h2 {
  font-size: var(--jp-content-font-size4);
}

.jp-RenderedHTMLCommon h3 {
  font-size: var(--jp-content-font-size3);
}

.jp-RenderedHTMLCommon h4 {
  font-size: var(--jp-content-font-size2);
}

.jp-RenderedHTMLCommon h5 {
  font-size: var(--jp-content-font-size1);
}

.jp-RenderedHTMLCommon h6 {
  font-size: var(--jp-content-font-size0);
}

/* Lists */

/* stylelint-disable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon ul:not(.list-inline),
.jp-RenderedHTMLCommon ol:not(.list-inline) {
  padding-left: 2em;
}

.jp-RenderedHTMLCommon ul {
  list-style: disc;
}

.jp-RenderedHTMLCommon ul ul {
  list-style: square;
}

.jp-RenderedHTMLCommon ul ul ul {
  list-style: circle;
}

.jp-RenderedHTMLCommon ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol ol {
  list-style: upper-alpha;
}

.jp-RenderedHTMLCommon ol ol ol {
  list-style: lower-alpha;
}

.jp-RenderedHTMLCommon ol ol ol ol {
  list-style: lower-roman;
}

.jp-RenderedHTMLCommon ol ol ol ol ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol,
.jp-RenderedHTMLCommon ul {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon ul ul,
.jp-RenderedHTMLCommon ul ol,
.jp-RenderedHTMLCommon ol ul,
.jp-RenderedHTMLCommon ol ol {
  margin-bottom: 0;
}

/* stylelint-enable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon hr {
  color: var(--jp-border-color2);
  background-color: var(--jp-border-color1);
  margin-top: 1em;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon > pre {
  margin: 1.5em 2em;
}

.jp-RenderedHTMLCommon pre,
.jp-RenderedHTMLCommon code {
  border: 0;
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  line-height: var(--jp-code-line-height);
  padding: 0;
  white-space: pre-wrap;
}

.jp-RenderedHTMLCommon :not(pre) > code {
  background-color: var(--jp-layout-color2);
  padding: 1px 5px;
}

/* Tables */

.jp-RenderedHTMLCommon table {
  border-collapse: collapse;
  border-spacing: 0;
  border: none;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  table-layout: fixed;
  margin-left: auto;
  margin-bottom: 1em;
  margin-right: auto;
}

.jp-RenderedHTMLCommon thead {
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  vertical-align: bottom;
}

.jp-RenderedHTMLCommon td,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon tr {
  vertical-align: middle;
  padding: 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}

.jp-RenderedMarkdown.jp-RenderedHTMLCommon td,
.jp-RenderedMarkdown.jp-RenderedHTMLCommon th {
  max-width: none;
}

:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon td,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon th,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon tr {
  text-align: right;
}

.jp-RenderedHTMLCommon th {
  font-weight: bold;
}

.jp-RenderedHTMLCommon tbody tr:nth-child(odd) {
  background: var(--jp-layout-color0);
}

.jp-RenderedHTMLCommon tbody tr:nth-child(even) {
  background: var(--jp-rendermime-table-row-background);
}

.jp-RenderedHTMLCommon tbody tr:hover {
  background: var(--jp-rendermime-table-row-hover-background);
}

.jp-RenderedHTMLCommon p {
  text-align: left;
  margin: 0;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon img {
  -moz-force-broken-image-icon: 1;
}

/* Restrict to direct children as other images could be nested in other content. */
.jp-RenderedHTMLCommon > img {
  display: block;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 1em;
}

/* Change color behind transparent images if they need it... */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-light-background {
  background-color: var(--jp-inverse-layout-color1);
}

[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-dark-background {
  background-color: var(--jp-inverse-layout-color1);
}

.jp-RenderedHTMLCommon img,
.jp-RenderedImage img,
.jp-RenderedHTMLCommon svg,
.jp-RenderedSVG svg {
  max-width: 100%;
  height: auto;
}

.jp-RenderedHTMLCommon img.jp-mod-unconfined,
.jp-RenderedImage img.jp-mod-unconfined,
.jp-RenderedHTMLCommon svg.jp-mod-unconfined,
.jp-RenderedSVG svg.jp-mod-unconfined {
  max-width: none;
}

.jp-RenderedHTMLCommon .alert {
  padding: var(--jp-notebook-padding);
  border: var(--jp-border-width) solid transparent;
  border-radius: var(--jp-border-radius);
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon .alert-info {
  color: var(--jp-info-color0);
  background-color: var(--jp-info-color3);
  border-color: var(--jp-info-color2);
}

.jp-RenderedHTMLCommon .alert-info hr {
  border-color: var(--jp-info-color3);
}

.jp-RenderedHTMLCommon .alert-info > p:last-child,
.jp-RenderedHTMLCommon .alert-info > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-warning {
  color: var(--jp-warn-color0);
  background-color: var(--jp-warn-color3);
  border-color: var(--jp-warn-color2);
}

.jp-RenderedHTMLCommon .alert-warning hr {
  border-color: var(--jp-warn-color3);
}

.jp-RenderedHTMLCommon .alert-warning > p:last-child,
.jp-RenderedHTMLCommon .alert-warning > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-success {
  color: var(--jp-success-color0);
  background-color: var(--jp-success-color3);
  border-color: var(--jp-success-color2);
}

.jp-RenderedHTMLCommon .alert-success hr {
  border-color: var(--jp-success-color3);
}

.jp-RenderedHTMLCommon .alert-success > p:last-child,
.jp-RenderedHTMLCommon .alert-success > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-danger {
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
  border-color: var(--jp-error-color2);
}

.jp-RenderedHTMLCommon .alert-danger hr {
  border-color: var(--jp-error-color3);
}

.jp-RenderedHTMLCommon .alert-danger > p:last-child,
.jp-RenderedHTMLCommon .alert-danger > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon blockquote {
  margin: 1em 2em;
  padding: 0 1em;
  border-left: 5px solid var(--jp-border-color2);
}

a.jp-InternalAnchorLink {
  visibility: hidden;
  margin-left: 8px;
  color: var(--md-blue-800);
}

h1:hover .jp-InternalAnchorLink,
h2:hover .jp-InternalAnchorLink,
h3:hover .jp-InternalAnchorLink,
h4:hover .jp-InternalAnchorLink,
h5:hover .jp-InternalAnchorLink,
h6:hover .jp-InternalAnchorLink {
  visibility: visible;
}

.jp-RenderedHTMLCommon kbd {
  background-color: var(--jp-rendermime-table-row-background);
  border: 1px solid var(--jp-border-color0);
  border-bottom-color: var(--jp-border-color2);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  display: inline-block;
  font-size: var(--jp-ui-font-size0);
  line-height: 1em;
  padding: 0.2em 0.5em;
}

/* Most direct children of .jp-RenderedHTMLCommon have a margin-bottom of 1.0.
 * At the bottom of cells this is a bit too much as there is also spacing
 * between cells. Going all the way to 0 gets too tight between markdown and
 * code cells.
 */
.jp-RenderedHTMLCommon > *:last-child {
  margin-bottom: 0.5em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-cursor-backdrop {
  position: fixed;
  width: 200px;
  height: 200px;
  margin-top: -100px;
  margin-left: -100px;
  will-change: transform;
  z-index: 100;
}

.lm-mod-drag-image {
  will-change: transform;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-lineFormSearch {
  padding: 4px 12px;
  background-color: var(--jp-layout-color2);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
  font-size: var(--jp-ui-font-size1);
}

.jp-lineFormCaption {
  font-size: var(--jp-ui-font-size0);
  line-height: var(--jp-ui-font-size1);
  margin-top: 4px;
  color: var(--jp-ui-font-color0);
}

.jp-baseLineForm {
  border: none;
  border-radius: 0;
  position: absolute;
  background-size: 16px;
  background-repeat: no-repeat;
  background-position: center;
  outline: none;
}

.jp-lineFormButtonContainer {
  top: 4px;
  right: 8px;
  height: 24px;
  padding: 0 12px;
  width: 12px;
}

.jp-lineFormButtonIcon {
  top: 0;
  right: 0;
  background-color: var(--jp-brand-color1);
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 4px 6px;
}

.jp-lineFormButton {
  top: 0;
  right: 0;
  background-color: transparent;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}

.jp-lineFormWrapper {
  overflow: hidden;
  padding: 0 8px;
  border: 1px solid var(--jp-border-color0);
  background-color: var(--jp-input-active-background);
  height: 22px;
}

.jp-lineFormWrapperFocusWithin {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-lineFormInput {
  background: transparent;
  width: 200px;
  height: 100%;
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  line-height: 28px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-JSONEditor {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.jp-JSONEditor-host {
  flex: 1 1 auto;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  background: var(--jp-layout-color0);
  min-height: 50px;
  padding: 1px;
}

.jp-JSONEditor.jp-mod-error .jp-JSONEditor-host {
  border-color: red;
  outline-color: red;
}

.jp-JSONEditor-header {
  display: flex;
  flex: 1 0 auto;
  padding: 0 0 0 12px;
}

.jp-JSONEditor-header label {
  flex: 0 0 auto;
}

.jp-JSONEditor-commitButton {
  height: 16px;
  width: 16px;
  background-size: 18px;
  background-repeat: no-repeat;
  background-position: center;
}

.jp-JSONEditor-host.jp-mod-focused {
  background-color: var(--jp-input-active-background);
  border: 1px solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

.jp-Editor.jp-mod-dropTarget {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/
.jp-DocumentSearch-input {
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  font-size: var(--jp-ui-font-size1);
  background-color: var(--jp-layout-color0);
  font-family: var(--jp-ui-font-family);
  padding: 2px 1px;
  resize: none;
}

.jp-DocumentSearch-overlay {
  position: absolute;
  background-color: var(--jp-toolbar-background);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  border-left: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  top: 0;
  right: 0;
  z-index: 7;
  min-width: 405px;
  padding: 2px;
  font-size: var(--jp-ui-font-size1);

  --jp-private-document-search-button-height: 20px;
}

.jp-DocumentSearch-overlay button {
  background-color: var(--jp-toolbar-background);
  outline: 0;
}

.jp-DocumentSearch-overlay button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-overlay button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-overlay-row {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
}

.jp-DocumentSearch-button-content {
  display: inline-block;
  cursor: pointer;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-button-content svg {
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-input-wrapper {
  border: var(--jp-border-width) solid var(--jp-border-color0);
  display: flex;
  background-color: var(--jp-layout-color0);
  margin: 2px;
}

.jp-DocumentSearch-input-wrapper:focus-within {
  border-color: var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper {
  all: initial;
  overflow: hidden;
  display: inline-block;
  border: none;
  box-sizing: border-box;
}

.jp-DocumentSearch-toggle-wrapper {
  width: 14px;
  height: 14px;
}

.jp-DocumentSearch-button-wrapper {
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
}

.jp-DocumentSearch-toggle-wrapper:focus,
.jp-DocumentSearch-button-wrapper:focus {
  outline: var(--jp-border-width) solid
    var(--jp-cell-editor-active-border-color);
  outline-offset: -1px;
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper,
.jp-DocumentSearch-button-content:focus {
  outline: none;
}

.jp-DocumentSearch-toggle-placeholder {
  width: 5px;
}

.jp-DocumentSearch-input-button::before {
  display: block;
  padding-top: 100%;
}

.jp-DocumentSearch-input-button-off {
  opacity: var(--jp-search-toggle-off-opacity);
}

.jp-DocumentSearch-input-button-off:hover {
  opacity: var(--jp-search-toggle-hover-opacity);
}

.jp-DocumentSearch-input-button-on {
  opacity: var(--jp-search-toggle-on-opacity);
}

.jp-DocumentSearch-index-counter {
  padding-left: 10px;
  padding-right: 10px;
  user-select: none;
  min-width: 35px;
  display: inline-block;
}

.jp-DocumentSearch-up-down-wrapper {
  display: inline-block;
  padding-right: 2px;
  margin-left: auto;
  white-space: nowrap;
}

.jp-DocumentSearch-spacer {
  margin-left: auto;
}

.jp-DocumentSearch-up-down-wrapper button {
  outline: 0;
  border: none;
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
  vertical-align: middle;
  margin: 1px 5px 2px;
}

.jp-DocumentSearch-up-down-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-up-down-button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-filter-button {
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-filter-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled:hover {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-search-options {
  padding: 0 8px;
  margin-left: 3px;
  width: 100%;
  display: grid;
  justify-content: start;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  justify-items: stretch;
}

.jp-DocumentSearch-search-filter-disabled {
  color: var(--jp-ui-font-color2);
}

.jp-DocumentSearch-search-filter {
  display: flex;
  align-items: center;
  user-select: none;
}

.jp-DocumentSearch-regex-error {
  color: var(--jp-error-color0);
}

.jp-DocumentSearch-replace-button-wrapper {
  overflow: hidden;
  display: inline-block;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color0);
  margin: auto 2px;
  padding: 1px 4px;
  height: calc(var(--jp-private-document-search-button-height) + 2px);
}

.jp-DocumentSearch-replace-button-wrapper:focus {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-replace-button {
  display: inline-block;
  text-align: center;
  cursor: pointer;
  box-sizing: border-box;
  color: var(--jp-ui-font-color1);

  /* height - 2 * (padding of wrapper) */
  line-height: calc(var(--jp-private-document-search-button-height) - 2px);
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-replace-button:focus {
  outline: none;
}

.jp-DocumentSearch-replace-wrapper-class {
  margin-left: 14px;
  display: flex;
}

.jp-DocumentSearch-replace-toggle {
  border: none;
  background-color: var(--jp-toolbar-background);
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-replace-toggle:hover {
  background-color: var(--jp-layout-color2);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.cm-editor {
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  border: 0;
  border-radius: 0;
  height: auto;

  /* Changed to auto to autogrow */
}

.cm-editor pre {
  padding: 0 var(--jp-code-padding);
}

.jp-CodeMirrorEditor[data-type='inline'] .cm-dialog {
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

.jp-CodeMirrorEditor {
  cursor: text;
}

/* When zoomed out 67% and 33% on a screen of 1440 width x 900 height */
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width1) solid
      var(--jp-editor-cursor-color);
  }
}

/* When zoomed out less than 33% */
@media screen and (min-width: 4320px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width2) solid
      var(--jp-editor-cursor-color);
  }
}

.cm-editor.jp-mod-readOnly .cm-cursor {
  display: none;
}

.jp-CollaboratorCursor {
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: none;
  border-bottom: 3px solid;
  background-clip: content-box;
  margin-left: -5px;
  margin-right: -5px;
}

.cm-searching,
.cm-searching span {
  /* `.cm-searching span`: we need to override syntax highlighting */
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.cm-searching::selection,
.cm-searching span::selection {
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.jp-current-match > .cm-searching,
.jp-current-match > .cm-searching span,
.cm-searching > .jp-current-match,
.cm-searching > .jp-current-match span {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.jp-current-match > .cm-searching::selection,
.cm-searching > .jp-current-match::selection,
.jp-current-match > .cm-searching span::selection {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.cm-trailingspace {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAsElEQVQIHQGlAFr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+r3zKmT0/+pk9P/7+r3zAAAAAAAAAAABAAAAAAAAAAA6OPzM+/q9wAAAAAA6OPzMwAAAAAAAAAAAgAAAAAAAAAAGR8NiRQaCgAZIA0AGR8NiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQyoYJ/SY80UAAAAASUVORK5CYII=);
  background-position: center left;
  background-repeat: repeat-x;
}

.jp-CollaboratorCursor-hover {
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  color: white;
  border-radius: 3px;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 1px;
  padding-bottom: 1px;
  text-align: center;
  font-size: var(--jp-ui-font-size1);
  white-space: nowrap;
}

.jp-CodeMirror-ruler {
  border-left: 1px dashed var(--jp-border-color2);
}

/* Styles for shared cursors (remote cursor locations and selected ranges) */
.jp-CodeMirrorEditor .cm-ySelectionCaret {
  position: relative;
  border-left: 1px solid black;
  margin-left: -1px;
  margin-right: -1px;
  box-sizing: border-box;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret > .cm-ySelectionInfo {
  white-space: nowrap;
  position: absolute;
  top: -1.15em;
  padding-bottom: 0.05em;
  left: -1px;
  font-size: 0.95em;
  font-family: var(--jp-ui-font-family);
  font-weight: bold;
  line-height: normal;
  user-select: none;
  color: white;
  padding-left: 2px;
  padding-right: 2px;
  z-index: 101;
  transition: opacity 0.3s ease-in-out;
}

.jp-CodeMirrorEditor .cm-ySelectionInfo {
  transition-delay: 0.7s;
  opacity: 0;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret:hover > .cm-ySelectionInfo {
  opacity: 1;
  transition-delay: 0s;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MimeDocument {
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FileBrowser .jp-SidePanel-content {
  display: flex;
  flex-direction: column;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  flex-wrap: wrap;
  row-gap: 12px;
  border-bottom: none;
  height: auto;
  margin: 8px 12px 0;
  box-shadow: none;
  padding: 0;
  justify-content: flex-start;
}

.jp-FileBrowser-Panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 8px 12px;
}

.jp-BreadCrumbs-item {
  margin: 0 2px;
  padding: 0 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0;
  padding-right: 2px;
  align-items: center;
  height: unset;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item .jp-ToolbarButtonComponent {
  width: 40px;
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-LastModified-hidden {
  display: none;
}

.jp-FileSize-hidden {
  display: none;
}

.jp-FileBrowser .lm-AccordionPanel > h3:first-child {
  display: none;
}

/*-----------------------------------------------------------------------------
| DirListing
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  border-top: var(--jp-border-width) solid var(--jp-border-color2);
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px;
  font-weight: 500;
}

.jp-DirListing-headerItem:hover {
  background: var(--jp-layout-color2);
}

.jp-DirListing-headerItem.jp-id-name {
  flex: 1 0 84px;
}

.jp-DirListing-headerItem.jp-id-modified {
  flex: 0 0 112px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-DirListing-headerItem.jp-id-filesize {
  flex: 0 0 75px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-id-narrow {
  display: none;
  flex: 0 0 5px;
  padding: 4px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
  color: var(--jp-border-color2);
}

.jp-DirListing-narrow .jp-id-narrow {
  display: block;
}

.jp-DirListing-narrow .jp-id-modified,
.jp-DirListing-narrow .jp-DirListing-itemModified {
  display: none;
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-DirListing-checkboxWrapper {
  /* Increases hit area of checkbox. */
  padding: 4px;
}

.jp-DirListing-header
  .jp-DirListing-checkboxWrapper
  + .jp-DirListing-headerItem {
  padding-left: 4px;
}

.jp-DirListing-content .jp-DirListing-checkboxWrapper {
  position: relative;
  left: -4px;
  margin: -4px 0 -4px -8px;
}

.jp-DirListing-checkboxWrapper.jp-mod-visible {
  visibility: visible;
}

/* For devices that support hovering, hide checkboxes until hovered, selected...
*/
@media (hover: hover) {
  .jp-DirListing-checkboxWrapper {
    visibility: hidden;
  }

  .jp-DirListing-item:hover .jp-DirListing-checkboxWrapper,
  .jp-DirListing-item.jp-mod-selected .jp-DirListing-checkboxWrapper {
    visibility: visible;
  }
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

.jp-DirListing-item.jp-mod-selected {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: var(--jp-brand-color3);
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: var(--jp-layout-color2);
}

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 4px;
}

.jp-DirListing-itemText {
  flex: 1 0 64px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.jp-DirListing-itemText:focus {
  outline-width: 2px;
  outline-color: var(--jp-inverse-layout-color1);
  outline-style: solid;
  outline-offset: 1px;
}

.jp-DirListing-item.jp-mod-selected .jp-DirListing-itemText:focus {
  outline-color: var(--jp-layout-color1);
}

.jp-DirListing-itemModified {
  flex: 0 0 125px;
  text-align: right;
}

.jp-DirListing-itemFileSize {
  flex: 0 0 90px;
  text-align: right;
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: var(--jp-success-color1);
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon::before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Main OutputArea
| OutputArea has a list of Outputs
|----------------------------------------------------------------------------*/

.jp-OutputArea {
  overflow-y: auto;
}

.jp-OutputArea-child {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-OutputPrompt {
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-outprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-OutputArea-prompt {
  display: table-cell;
  vertical-align: top;
}

.jp-OutputArea-output {
  display: table-cell;
  width: 100%;
  height: auto;
  overflow: auto;
  user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
}

.jp-OutputArea .jp-RenderedText {
  padding-left: 1ch;
}

/**
 * Prompt overlay.
 */

.jp-OutputArea-promptOverlay {
  position: absolute;
  top: 0;
  width: var(--jp-cell-prompt-width);
  height: 100%;
  opacity: 0.5;
}

.jp-OutputArea-promptOverlay:hover {
  background: var(--jp-layout-color2);
  box-shadow: inset 0 0 1px var(--jp-inverse-layout-color0);
  cursor: zoom-out;
}

.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay:hover {
  cursor: zoom-in;
}

/**
 * Isolated output.
 */
.jp-OutputArea-output.jp-mod-isolated {
  width: 100%;
  display: block;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated {
  position: relative;
}

body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/* pre */

.jp-OutputArea-output pre {
  border: none;
  margin: 0;
  padding: 0;
  overflow-x: auto;
  overflow-y: auto;
  word-break: break-all;
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* tables */

.jp-OutputArea-output.jp-RenderedHTMLCommon table {
  margin-left: 0;
  margin-right: 0;
}

/* description lists */

.jp-OutputArea-output dl,
.jp-OutputArea-output dt,
.jp-OutputArea-output dd {
  display: block;
}

.jp-OutputArea-output dl {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dt {
  font-weight: bold;
  float: left;
  width: 20%;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dd {
  float: left;
  width: 80%;
  padding: 0;
  margin: 0;
}

.jp-TrimmedOutputs pre {
  background: var(--jp-layout-color3);
  font-size: calc(var(--jp-code-font-size) * 1.4);
  text-align: center;
  text-transform: uppercase;
}

/* Hide the gutter in case of
 *  - nested output areas (e.g. in the case of output widgets)
 *  - mirrored output areas
 */
.jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt {
  display: none;
}

/* Hide empty lines in the output area, for instance due to cleared widgets */
.jp-OutputArea-prompt:empty {
  padding: 0;
  border: 0;
}

/*-----------------------------------------------------------------------------
| executeResult is added to any Output-result for the display of the object
| returned by a cell
|----------------------------------------------------------------------------*/

.jp-OutputArea-output.jp-OutputArea-executeResult {
  margin-left: 0;
  width: 100%;
}

/* Text output with the Out[] prompt needs a top padding to match the
 * alignment of the Out[] prompt itself.
 */
.jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output {
  padding-top: var(--jp-code-padding);
  border-top: var(--jp-border-width) solid transparent;
}

/*-----------------------------------------------------------------------------
| The Stdin output
|----------------------------------------------------------------------------*/

.jp-Stdin-prompt {
  color: var(--jp-content-font-color0);
  padding-right: var(--jp-code-padding);
  vertical-align: baseline;
  flex: 0 0 auto;
}

.jp-Stdin-input {
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  width: 42%;
  min-width: 200px;

  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;

  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0 0.25em;
  margin: 0 0.25em;
  flex: 0 0 70%;
}

.jp-Stdin-input::placeholder {
  opacity: 0;
}

.jp-Stdin-input:focus {
  box-shadow: none;
}

.jp-Stdin-input:focus::placeholder {
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Output Area View
|----------------------------------------------------------------------------*/

.jp-LinkedOutputView .jp-OutputArea {
  height: 100%;
  display: block;
}

.jp-LinkedOutputView .jp-OutputArea-output:only-child {
  height: 100%;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

@media print {
  .jp-OutputArea-child {
    break-inside: avoid-page;
  }
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-OutputPrompt {
    display: table-row;
    text-align: left;
  }

  .jp-OutputArea-child .jp-OutputArea-output {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }
}

/* Trimmed outputs warning */
.jp-TrimmedOutputs > a {
  margin: 10px;
  text-decoration: none;
  cursor: pointer;
}

.jp-TrimmedOutputs > a:hover {
  text-decoration: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Table of Contents
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toc-active-width: 4px;
}

.jp-TableOfContents {
  display: flex;
  flex-direction: column;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  height: 100%;
}

.jp-TableOfContents-placeholder {
  text-align: center;
}

.jp-TableOfContents-placeholderContent {
  color: var(--jp-content-font-color2);
  padding: 8px;
}

.jp-TableOfContents-placeholderContent > h3 {
  margin-bottom: var(--jp-content-heading-margin-bottom);
}

.jp-TableOfContents .jp-SidePanel-content {
  overflow-y: auto;
}

.jp-TableOfContents-tree {
  margin: 4px;
}

.jp-TableOfContents ol {
  list-style-type: none;
}

/* stylelint-disable-next-line selector-max-type */
.jp-TableOfContents li > ol {
  /* Align left border with triangle icon center */
  padding-left: 11px;
}

.jp-TableOfContents-content {
  /* left margin for the active heading indicator */
  margin: 0 0 0 var(--jp-private-toc-active-width);
  padding: 0;
  background-color: var(--jp-layout-color1);
}

.jp-tocItem {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-tocItem-heading {
  display: flex;
  cursor: pointer;
}

.jp-tocItem-heading:hover {
  background-color: var(--jp-layout-color2);
}

.jp-tocItem-content {
  display: block;
  padding: 4px 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;
}

.jp-tocItem-collapser {
  height: 20px;
  margin: 2px 2px 0;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
}

.jp-tocItem-collapser:hover {
  background-color: var(--jp-layout-color3);
}

/* Active heading indicator */

.jp-tocItem-heading::before {
  content: ' ';
  background: transparent;
  width: var(--jp-private-toc-active-width);
  height: 24px;
  position: absolute;
  left: 0;
  border-radius: var(--jp-border-radius);
}

.jp-tocItem-heading.jp-tocItem-active::before {
  background-color: var(--jp-brand-color1);
}

.jp-tocItem-heading:hover.jp-tocItem-active::before {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapser {
  flex: 0 0 var(--jp-cell-collapser-width);
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
  border-radius: var(--jp-border-radius);
  opacity: 1;
}

.jp-Collapser-child {
  display: block;
  width: 100%;
  box-sizing: border-box;

  /* height: 100% doesn't work because the height of its parent is computed from content */
  position: absolute;
  top: 0;
  bottom: 0;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Hiding collapsers in print mode.

Note: input and output wrappers have "display: block" propery in print mode.
*/

@media print {
  .jp-Collapser {
    display: none;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Header/Footer
|----------------------------------------------------------------------------*/

/* Hidden by zero height by default */
.jp-CellHeader,
.jp-CellFooter {
  height: 0;
  width: 100%;
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Input
|----------------------------------------------------------------------------*/

/* All input areas */
.jp-InputArea {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-InputArea-editor {
  display: table-cell;
  overflow: hidden;
  vertical-align: top;

  /* This is the non-active, default styling */
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  background: var(--jp-cell-editor-background);
}

.jp-InputPrompt {
  display: table-cell;
  vertical-align: top;
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-inprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  opacity: var(--jp-cell-prompt-opacity);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-InputArea-editor {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }

  .jp-InputPrompt {
    display: table-row;
    text-align: left;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Placeholder {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.jp-Placeholder-prompt {
  display: table-cell;
  box-sizing: border-box;
}

.jp-Placeholder-content {
  display: table-cell;
  padding: 4px 6px;
  border: 1px solid transparent;
  border-radius: 0;
  background: none;
  box-sizing: border-box;
  cursor: pointer;
}

.jp-Placeholder-contentContainer {
  display: flex;
}

.jp-Placeholder-content:hover,
.jp-InputPlaceholder > .jp-Placeholder-content:hover {
  border-color: var(--jp-layout-color3);
}

.jp-Placeholder-content .jp-MoreHorizIcon {
  width: 32px;
  height: 16px;
  border: 1px solid transparent;
  border-radius: var(--jp-border-radius);
}

.jp-Placeholder-content .jp-MoreHorizIcon:hover {
  border: 1px solid var(--jp-border-color1);
  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.25);
  background-color: var(--jp-layout-color0);
}

.jp-PlaceholderText {
  white-space: nowrap;
  overflow-x: hidden;
  color: var(--jp-inverse-layout-color3);
  font-family: var(--jp-code-font-family);
}

.jp-InputPlaceholder > .jp-Placeholder-content {
  border-color: var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-cell-scrolling-output-offset: 5px;
}

/*-----------------------------------------------------------------------------
| Cell
|----------------------------------------------------------------------------*/

.jp-Cell {
  padding: var(--jp-cell-padding);
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Common input/output
|----------------------------------------------------------------------------*/

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: row;
  padding: 0;
  margin: 0;

  /* Added to reveal the box-shadow on the input and output collapsers. */
  overflow: visible;
}

/* Only input/output areas inside cells */
.jp-Cell-inputArea,
.jp-Cell-outputArea {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Collapser
|----------------------------------------------------------------------------*/

/* Make the output collapser disappear when there is not output, but do so
 * in a manner that leaves it in the layout and preserves its width.
 */
.jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser {
  border: none !important;
  background: transparent !important;
}

.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser {
  min-height: var(--jp-cell-collapser-min-height);
}

/*-----------------------------------------------------------------------------
| Output
|----------------------------------------------------------------------------*/

/* Put a space between input and output when there IS output */
.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 5px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea {
  overflow-y: auto;
  max-height: 24em;
  margin-left: var(--jp-private-cell-scrolling-output-offset);
  resize: vertical;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea[style*='height'] {
  max-height: unset;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea::after {
  content: ' ';
  box-shadow: inset 0 0 6px 2px rgb(0 0 0 / 30%);
  width: 100%;
  height: 100%;
  position: sticky;
  bottom: 0;
  top: 0;
  margin-top: -50%;
  float: left;
  display: block;
  pointer-events: none;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-child {
  padding-top: 6px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  width: calc(
    var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset)
  );
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay {
  left: calc(-1 * var(--jp-private-cell-scrolling-output-offset));
}

/*-----------------------------------------------------------------------------
| CodeCell
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| MarkdownCell
|----------------------------------------------------------------------------*/

.jp-MarkdownOutput {
  display: table-cell;
  width: 100%;
  margin-top: 0;
  margin-bottom: 0;
  padding-left: var(--jp-code-padding);
}

.jp-MarkdownOutput.jp-RenderedHTMLCommon {
  overflow: auto;
}

/* collapseHeadingButton (show always if hiddenCellsButton is _not_ shown) */
.jp-collapseHeadingButton {
  display: flex;
  min-height: var(--jp-cell-collapser-min-height);
  font-size: var(--jp-code-font-size);
  position: absolute;
  background-color: transparent;
  background-size: 25px;
  background-repeat: no-repeat;
  background-position-x: center;
  background-position-y: top;
  background-image: var(--jp-icon-caret-down);
  right: 0;
  top: 0;
  bottom: 0;
}

.jp-collapseHeadingButton.jp-mod-collapsed {
  background-image: var(--jp-icon-caret-right);
}

/*
 set the container font size to match that of content
 so that the nested collapse buttons have the right size
*/
.jp-MarkdownCell .jp-InputPrompt {
  font-size: var(--jp-content-font-size1);
}

/*
  Align collapseHeadingButton with cell top header
  The font sizes are identical to the ones in packages/rendermime/style/base.css
*/
.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='1'] {
  font-size: var(--jp-content-font-size5);
  background-position-y: calc(0.3 * var(--jp-content-font-size5));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='2'] {
  font-size: var(--jp-content-font-size4);
  background-position-y: calc(0.3 * var(--jp-content-font-size4));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='3'] {
  font-size: var(--jp-content-font-size3);
  background-position-y: calc(0.3 * var(--jp-content-font-size3));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='4'] {
  font-size: var(--jp-content-font-size2);
  background-position-y: calc(0.3 * var(--jp-content-font-size2));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='5'] {
  font-size: var(--jp-content-font-size1);
  background-position-y: top;
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='6'] {
  font-size: var(--jp-content-font-size0);
  background-position-y: top;
}

/* collapseHeadingButton (show only on (hover,active) if hiddenCellsButton is shown) */
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-collapseHeadingButton {
  display: none;
}

.jp-Notebook.jp-mod-showHiddenCellsButton
  :is(.jp-MarkdownCell:hover, .jp-mod-active)
  .jp-collapseHeadingButton {
  display: flex;
}

/* showHiddenCellsButton (only show if jp-mod-showHiddenCellsButton is set, which
is a consequence of the showHiddenCellsButton option in Notebook Settings)*/
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton {
  margin-left: calc(var(--jp-cell-prompt-width) + 2 * var(--jp-code-padding));
  margin-top: var(--jp-code-padding);
  border: 1px solid var(--jp-border-color2);
  background-color: var(--jp-border-color3) !important;
  color: var(--jp-content-font-color0) !important;
  display: flex;
}

.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton:hover {
  background-color: var(--jp-border-color2) !important;
}

.jp-showHiddenCellsButton {
  display: none;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Using block instead of flex to allow the use of the break-inside CSS property for
cell outputs.
*/

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-notebook-toolbar-padding: 2px 5px 2px 2px;
}

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-NotebookPanel-toolbar {
  padding: var(--jp-notebook-toolbar-padding);

  /* disable paint containment from lumino 2.0 default strict CSS containment */
  contain: style size !important;
}

.jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused {
  border: none;
  box-shadow: none;
}

.jp-Notebook-toolbarCellTypeDropdown select {
  height: 24px;
  font-size: var(--jp-ui-font-size1);
  line-height: 14px;
  border-radius: 0;
  display: block;
}

.jp-Notebook-toolbarCellTypeDropdown span {
  top: 5px !important;
}

.jp-Toolbar-responsive-popup {
  position: absolute;
  height: fit-content;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-end;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: var(--jp-notebook-toolbar-padding);
  z-index: 1;
  right: 0;
  top: 0;
}

.jp-Toolbar > .jp-Toolbar-responsive-opener {
  margin-left: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-Notebook-ExecutionIndicator {
  position: relative;
  display: inline-block;
  height: 100%;
  z-index: 9997;
}

.jp-Notebook-ExecutionIndicator-tooltip {
  visibility: hidden;
  height: auto;
  width: max-content;
  width: -moz-max-content;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color1);
  text-align: justify;
  border-radius: 6px;
  padding: 0 5px;
  position: fixed;
  display: table;
}

.jp-Notebook-ExecutionIndicator-tooltip.up {
  transform: translateX(-50%) translateY(-100%) translateY(-32px);
}

.jp-Notebook-ExecutionIndicator-tooltip.down {
  transform: translateX(calc(-100% + 16px)) translateY(5px);
}

.jp-Notebook-ExecutionIndicator-tooltip.hidden {
  display: none;
}

.jp-Notebook-ExecutionIndicator:hover .jp-Notebook-ExecutionIndicator-tooltip {
  visibility: visible;
}

.jp-Notebook-ExecutionIndicator span {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  color: var(--jp-ui-font-color1);
  line-height: 24px;
  display: block;
}

.jp-Notebook-ExecutionIndicator-progress-bar {
  display: flex;
  justify-content: center;
  height: 100%;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*
 * Execution indicator
 */
.jp-tocItem-content::after {
  content: '';

  /* Must be identical to form a circle */
  width: 12px;
  height: 12px;
  background: none;
  border: none;
  position: absolute;
  right: 0;
}

.jp-tocItem-content[data-running='0']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background: none;
}

.jp-tocItem-content[data-running='1']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background-color: var(--jp-inverse-layout-color3);
}

.jp-tocItem-content[data-running='0'],
.jp-tocItem-content[data-running='1'] {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Notebook-footer {
  height: 27px;
  margin-left: calc(
    var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
      var(--jp-cell-padding)
  );
  width: calc(
    100% -
      (
        var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
          var(--jp-cell-padding) + var(--jp-cell-padding)
      )
  );
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  color: var(--jp-ui-font-color3);
  margin-top: 6px;
  background: none;
  cursor: pointer;
}

.jp-Notebook-footer:focus {
  border-color: var(--jp-cell-editor-active-border-color);
}

/* For devices that support hovering, hide footer until hover */
@media (hover: hover) {
  .jp-Notebook-footer {
    opacity: 0;
  }

  .jp-Notebook-footer:focus,
  .jp-Notebook-footer:hover {
    opacity: 1;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Imports
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-side-by-side-output-size: 1fr;
  --jp-side-by-side-resized-cell: var(--jp-side-by-side-output-size);
  --jp-private-notebook-dragImage-width: 304px;
  --jp-private-notebook-dragImage-height: 36px;
  --jp-private-notebook-selected-color: var(--md-blue-400);
  --jp-private-notebook-active-color: var(--md-green-400);
}

/*-----------------------------------------------------------------------------
| Notebook
|----------------------------------------------------------------------------*/

/* stylelint-disable selector-max-class */

.jp-NotebookPanel {
  display: block;
  height: 100%;
}

.jp-NotebookPanel.jp-Document {
  min-width: 240px;
  min-height: 120px;
}

.jp-Notebook {
  padding: var(--jp-notebook-padding);
  outline: none;
  overflow: auto;
  background: var(--jp-layout-color0);
}

.jp-Notebook.jp-mod-scrollPastEnd::after {
  display: block;
  content: '';
  min-height: var(--jp-notebook-scroll-padding);
}

.jp-MainAreaWidget-ContainStrict .jp-Notebook * {
  contain: strict;
}

.jp-Notebook .jp-Cell {
  overflow: visible;
}

.jp-Notebook .jp-Cell .jp-InputPrompt {
  cursor: move;
}

/*-----------------------------------------------------------------------------
| Notebook state related styling
|
| The notebook and cells each have states, here are the possibilities:
|
| - Notebook
|   - Command
|   - Edit
| - Cell
|   - None
|   - Active (only one can be active)
|   - Selected (the cells actions are applied to)
|   - Multiselected (when multiple selected, the cursor)
|   - No outputs
|----------------------------------------------------------------------------*/

/* Command or edit modes */

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

/* cell is active */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser {
  background: var(--jp-brand-color1);
}

/* cell is dirty */
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt {
  color: var(--jp-warn-color1);
}

.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt::before {
  color: var(--jp-warn-color1);
  content: '•';
}

.jp-Notebook .jp-Cell.jp-mod-active.jp-mod-dirty .jp-Collapser {
  background: var(--jp-warn-color1);
}

/* collapser is hovered */
.jp-Notebook .jp-Cell .jp-Collapser:hover {
  box-shadow: var(--jp-elevation-z2);
  background: var(--jp-brand-color1);
  opacity: var(--jp-cell-collapser-not-active-hover-opacity);
}

/* cell is active and collapser is hovered */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/* Command mode */

.jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected {
  background: var(--jp-notebook-multiselected-color);
}

.jp-Notebook.jp-mod-commandMode
  .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected) {
  background: transparent;
}

/* Edit mode */

.jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-cell-editor-active-background);
}

/*-----------------------------------------------------------------------------
| Notebook drag and drop
|----------------------------------------------------------------------------*/

.jp-Notebook-cell.jp-mod-dropSource {
  opacity: 0.5;
}

.jp-Notebook-cell.jp-mod-dropTarget,
.jp-Notebook.jp-mod-commandMode
  .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget {
  border-top-color: var(--jp-private-notebook-selected-color);
  border-top-style: solid;
  border-top-width: 2px;
}

.jp-dragImage {
  display: block;
  flex-direction: row;
  width: var(--jp-private-notebook-dragImage-width);
  height: var(--jp-private-notebook-dragImage-height);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
  overflow: visible;
}

.jp-dragImage-singlePrompt {
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

.jp-dragImage .jp-dragImage-content {
  flex: 1 1 auto;
  z-index: 2;
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  line-height: var(--jp-code-line-height);
  padding: var(--jp-code-padding);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background-color);
  color: var(--jp-content-font-color3);
  text-align: left;
  margin: 4px 4px 4px 0;
}

.jp-dragImage .jp-dragImage-prompt {
  flex: 0 0 auto;
  min-width: 36px;
  color: var(--jp-cell-inprompt-font-color);
  padding: var(--jp-code-padding);
  padding-left: 12px;
  font-family: var(--jp-cell-prompt-font-family);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: 1.9;
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
}

.jp-dragImage-multipleBack {
  z-index: -1;
  position: absolute;
  height: 32px;
  width: 300px;
  top: 8px;
  left: 8px;
  background: var(--jp-layout-color2);
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

/*-----------------------------------------------------------------------------
| Cell toolbar
|----------------------------------------------------------------------------*/

.jp-NotebookTools {
  display: block;
  min-width: var(--jp-sidebar-min-width);
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
    * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  overflow: auto;
}

.jp-ActiveCellTool {
  padding: 12px 0;
  display: flex;
}

.jp-ActiveCellTool-Content {
  flex: 1 1 auto;
}

.jp-ActiveCellTool .jp-ActiveCellTool-CellContent {
  background: var(--jp-cell-editor-background);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  min-height: 29px;
}

.jp-ActiveCellTool .jp-InputPrompt {
  min-width: calc(var(--jp-cell-prompt-width) * 0.75);
}

.jp-ActiveCellTool-CellContent > pre {
  padding: 5px 4px;
  margin: 0;
  white-space: normal;
}

.jp-MetadataEditorTool {
  flex-direction: column;
  padding: 12px 0;
}

.jp-RankedPanel > :not(:first-child) {
  margin-top: 12px;
}

.jp-KeySelector select.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: var(--jp-border-width) solid var(--jp-border-color1);
}

.jp-KeySelector label,
.jp-MetadataEditorTool label,
.jp-NumberSetter label {
  line-height: 1.4;
}

.jp-NotebookTools .jp-select-wrapper {
  margin-top: 4px;
  margin-bottom: 0;
}

.jp-NumberSetter input {
  width: 100%;
  margin-top: 4px;
}

.jp-NotebookTools .jp-Collapse {
  margin-top: 16px;
}

/*-----------------------------------------------------------------------------
| Presentation Mode (.jp-mod-presentationMode)
|----------------------------------------------------------------------------*/

.jp-mod-presentationMode .jp-Notebook {
  --jp-content-font-size1: var(--jp-content-presentation-font-size1);
  --jp-code-font-size: var(--jp-code-presentation-font-size);
}

.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,
.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt {
  flex: 0 0 110px;
}

/*-----------------------------------------------------------------------------
| Side-by-side Mode (.jp-mod-sideBySide)
|----------------------------------------------------------------------------*/
.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell {
  margin-top: 3em;
  margin-bottom: 3em;
  margin-left: 5%;
  margin-right: 5%;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell {
  display: grid;
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-output-size)
    );
  grid-template-rows: auto minmax(0, 1fr) auto;
  grid-template-areas:
    'header header header'
    'input handle output'
    'footer footer footer';
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell.jp-mod-resizedCell {
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-resized-cell)
    );
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellHeader {
  grid-area: header;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-inputWrapper {
  grid-area: input;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-outputWrapper {
  /* overwrite the default margin (no vertical separation needed in side by side move */
  margin-top: 0;
  grid-area: output;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellFooter {
  grid-area: footer;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle {
  grid-area: handle;
  user-select: none;
  display: block;
  height: 100%;
  cursor: ew-resize;
  padding: 0 var(--jp-cell-padding);
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle::after {
  content: '';
  display: block;
  background: var(--jp-border-color2);
  height: 100%;
  width: 5px;
}

.jp-mod-sideBySide.jp-Notebook
  .jp-CodeCell.jp-mod-resizedCell
  .jp-CellResizeHandle::after {
  background: var(--jp-border-color0);
}

.jp-CellResizeHandle {
  display: none;
}

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Cell-Placeholder {
  padding-left: 55px;
}

.jp-Cell-Placeholder-wrapper {
  background: #fff;
  border: 1px solid;
  border-color: #e5e6e9 #dfe0e4 #d0d1d5;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  margin: 10px 15px;
}

.jp-Cell-Placeholder-wrapper-inner {
  padding: 15px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body {
  background-repeat: repeat;
  background-size: 50% auto;
}

.jp-Cell-Placeholder-wrapper-body div {
  background: #f6f7f8;
  background-image: -webkit-linear-gradient(
    left,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 104px;
  height: 104px;
  position: absolute;
  right: 15px;
  left: 15px;
  top: 15px;
}

div.jp-Cell-Placeholder-h1 {
  top: 20px;
  height: 20px;
  left: 15px;
  width: 150px;
}

div.jp-Cell-Placeholder-h2 {
  left: 15px;
  top: 50px;
  height: 10px;
  width: 100px;
}

div.jp-Cell-Placeholder-content-1,
div.jp-Cell-Placeholder-content-2,
div.jp-Cell-Placeholder-content-3 {
  left: 15px;
  right: 15px;
  height: 10px;
}

div.jp-Cell-Placeholder-content-1 {
  top: 100px;
}

div.jp-Cell-Placeholder-content-2 {
  top: 120px;
}

div.jp-Cell-Placeholder-content-3 {
  top: 140px;
}

</style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {
  /* Elevation
   *
   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
   *
   * https://github.com/material-components/material-components-web
   * https://material-components-web.appspot.com/elevation.html
   */

  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 2px 1px -1px var(--jp-shadow-umbra-color),
    0 1px 1px 0 var(--jp-shadow-penumbra-color),
    0 1px 3px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0 3px 1px -2px var(--jp-shadow-umbra-color),
    0 2px 2px 0 var(--jp-shadow-penumbra-color),
    0 1px 5px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0 2px 4px -1px var(--jp-shadow-umbra-color),
    0 4px 5px 0 var(--jp-shadow-penumbra-color),
    0 1px 10px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0 3px 5px -1px var(--jp-shadow-umbra-color),
    0 6px 10px 0 var(--jp-shadow-penumbra-color),
    0 1px 18px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0 5px 5px -3px var(--jp-shadow-umbra-color),
    0 8px 10px 1px var(--jp-shadow-penumbra-color),
    0 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0 7px 8px -4px var(--jp-shadow-umbra-color),
    0 12px 17px 2px var(--jp-shadow-penumbra-color),
    0 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0 8px 10px -5px var(--jp-shadow-umbra-color),
    0 16px 24px 2px var(--jp-shadow-penumbra-color),
    0 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0 10px 13px -6px var(--jp-shadow-umbra-color),
    0 20px 31px 3px var(--jp-shadow-penumbra-color),
    0 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0 11px 15px -7px var(--jp-shadow-umbra-color),
    0 24px 38px 3px var(--jp-shadow-penumbra-color),
    0 9px 46px 8px var(--jp-shadow-ambient-color);

  /* Borders
   *
   * The following variables, specify the visual styling of borders in JupyterLab.
   */

  --jp-border-width: 1px;
  --jp-border-color0: var(--md-grey-400);
  --jp-border-color1: var(--md-grey-400);
  --jp-border-color2: var(--md-grey-300);
  --jp-border-color3: var(--md-grey-200);
  --jp-inverse-border-color: var(--md-grey-600);
  --jp-border-radius: 2px;

  /* UI Fonts
   *
   * The UI font CSS variables are used for the typography all of the JupyterLab
   * user interface elements that are not directly user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px; /* Base font size */
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: system-ui, -apple-system, blinkmacsystemfont, 'Segoe UI',
    helvetica, arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /*
   * Use these font colors against the corresponding main layout colors.
   * In a light theme, these go from dark to light.
   */

  /* Defaults use Material Design specification */
  --jp-ui-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);

  /*
   * Use these against the brand/accent/warn/error colors.
   * These will typically go from light to darker, in both a dark and light theme.
   */

  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);

  /* Content Fonts
   *
   * Content font variables are used for typography of user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px; /* Base font size */
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Defaults use Material Design specification */
  --jp-content-font-color0: rgba(0, 0, 0, 1);
  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
  --jp-content-font-color3: rgba(0, 0, 0, 0.38);
  --jp-content-link-color: var(--md-blue-900);
  --jp-content-font-family: system-ui, -apple-system, blinkmacsystemfont,
    'Segoe UI', helvetica, arial, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol';

  /*
   * Code Fonts
   *
   * Code font variables are used for typography of code and other monospaces content.
   */

  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077; /* 17px for 13px base */
  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
  --jp-code-font-family-default: menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-code-presentation-font-size: 16px;

  /* may need to tweak cursor width if you change font size */
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout
   *
   * The following are the main layout colors use in JupyterLab. In a light
   * theme these would go from light to dark.
   */

  --jp-layout-color0: white;
  --jp-layout-color1: white;
  --jp-layout-color2: var(--md-grey-200);
  --jp-layout-color3: var(--md-grey-400);
  --jp-layout-color4: var(--md-grey-600);

  /* Inverse Layout
   *
   * The following are the inverse layout colors use in JupyterLab. In a light
   * theme these would go from dark to light.
   */

  --jp-inverse-layout-color0: #111;
  --jp-inverse-layout-color1: var(--md-grey-900);
  --jp-inverse-layout-color2: var(--md-grey-800);
  --jp-inverse-layout-color3: var(--md-grey-700);
  --jp-inverse-layout-color4: var(--md-grey-600);

  /* Brand/accent */

  --jp-brand-color0: var(--md-blue-900);
  --jp-brand-color1: var(--md-blue-700);
  --jp-brand-color2: var(--md-blue-300);
  --jp-brand-color3: var(--md-blue-100);
  --jp-brand-color4: var(--md-blue-50);
  --jp-accent-color0: var(--md-green-900);
  --jp-accent-color1: var(--md-green-700);
  --jp-accent-color2: var(--md-green-300);
  --jp-accent-color3: var(--md-green-100);

  /* State colors (warn, error, success, info) */

  --jp-warn-color0: var(--md-orange-900);
  --jp-warn-color1: var(--md-orange-700);
  --jp-warn-color2: var(--md-orange-300);
  --jp-warn-color3: var(--md-orange-100);
  --jp-error-color0: var(--md-red-900);
  --jp-error-color1: var(--md-red-700);
  --jp-error-color2: var(--md-red-300);
  --jp-error-color3: var(--md-red-100);
  --jp-success-color0: var(--md-green-900);
  --jp-success-color1: var(--md-green-700);
  --jp-success-color2: var(--md-green-300);
  --jp-success-color3: var(--md-green-100);
  --jp-info-color0: var(--md-cyan-900);
  --jp-info-color1: var(--md-cyan-700);
  --jp-info-color2: var(--md-cyan-300);
  --jp-info-color3: var(--md-cyan-100);

  /* Cell specific styles */

  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: var(--md-grey-100);
  --jp-cell-editor-border-color: var(--md-grey-300);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--jp-brand-color1);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);

  /* A custom blend of MD grey and blue 600
   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
  --jp-cell-inprompt-font-color: #307fc1;

  /* A custom blend of MD grey and orange 600
   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* Notebook specific styles */

  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: var(--md-blue-50);

  /* The scroll padding is calculated to fill enough space at the bottom of the
  notebook to show one single-line cell (with appropriate padding) at the top
  when the notebook is scrolled all the way to the bottom. We also subtract one
  pixel so that no scrollbar appears if we have just one single-line cell in the
  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
  */
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* Rendermime styles */

  --jp-rendermime-error-background: #fdd;
  --jp-rendermime-table-row-background: var(--md-grey-100);
  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);

  /* Dialog specific styles */

  --jp-dialog-background: rgba(0, 0, 0, 0.25);

  /* Console specific styles */

  --jp-console-padding: 10px;

  /* Toolbar specific styles */

  --jp-toolbar-border-color: var(--jp-border-color1);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.24);
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: var(--md-grey-300);

  /* Statusbar specific styles */

  --jp-statusbar-height: 24px;

  /* Input field styles */

  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-input-active-background: var(--jp-layout-color1);
  --jp-input-hover-background: var(--jp-layout-color1);
  --jp-input-background: var(--md-grey-100);
  --jp-input-border-color: var(--jp-inverse-border-color);
  --jp-input-active-border-color: var(--jp-brand-color1);
  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);

  /* General editor styles */

  --jp-editor-selected-background: #d9d9d9;
  --jp-editor-selected-focused-background: #d7d4f0;
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* Code mirror specific styles */

  --jp-mirror-editor-keyword-color: #008000;
  --jp-mirror-editor-atom-color: #88f;
  --jp-mirror-editor-number-color: #080;
  --jp-mirror-editor-def-color: #00f;
  --jp-mirror-editor-variable-color: var(--md-grey-900);
  --jp-mirror-editor-variable-2-color: rgb(0, 54, 109);
  --jp-mirror-editor-variable-3-color: #085;
  --jp-mirror-editor-punctuation-color: #05a;
  --jp-mirror-editor-property-color: #05a;
  --jp-mirror-editor-operator-color: #a2f;
  --jp-mirror-editor-comment-color: #408080;
  --jp-mirror-editor-string-color: #ba2121;
  --jp-mirror-editor-string-2-color: #708;
  --jp-mirror-editor-meta-color: #a2f;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #008000;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #170;
  --jp-mirror-editor-attribute-color: #00c;
  --jp-mirror-editor-header-color: blue;
  --jp-mirror-editor-quote-color: #090;
  --jp-mirror-editor-link-color: #00c;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /*
    RTC user specific colors.
    These colors are used for the cursor, username in the editor,
    and the icon of the user.
  */

  --jp-collaborator-color1: #ffad8e;
  --jp-collaborator-color2: #dac83d;
  --jp-collaborator-color3: #72dd76;
  --jp-collaborator-color4: #00e4d0;
  --jp-collaborator-color5: #45d4ff;
  --jp-collaborator-color6: #e2b1ff;
  --jp-collaborator-color7: #ff9de6;

  /* Vega extension styles */

  --jp-vega-background: white;

  /* Sidebar-related styles */

  --jp-sidebar-min-width: 250px;

  /* Search-related styles */

  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.8;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: rgb(245, 200, 0);
  --jp-search-selected-match-color: black;
  --jp-search-unselected-match-background-color: var(
    --jp-inverse-layout-color0
  );
  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);

  /* Icon colors that work well with light or dark backgrounds */
  --jp-icon-contrast-color0: var(--md-purple-600);
  --jp-icon-contrast-color1: var(--md-green-600);
  --jp-icon-contrast-color2: var(--md-pink-600);
  --jp-icon-contrast-color3: var(--md-blue-600);

  /* Button colors */
  --jp-accept-color-normal: var(--md-blue-700);
  --jp-accept-color-hover: var(--md-blue-800);
  --jp-accept-color-active: var(--md-blue-900);
  --jp-warn-color-normal: var(--md-red-700);
  --jp-warn-color-hover: var(--md-red-800);
  --jp-warn-color-active: var(--md-red-900);
  --jp-reject-color-normal: var(--md-grey-600);
  --jp-reject-color-hover: var(--md-grey-700);
  --jp-reject-color-active: var(--md-grey-800);

  /* File or activity icons and switch semantic variables */
  --jp-jupyter-icon-color: #f37626;
  --jp-notebook-icon-color: #f37626;
  --jp-json-icon-color: var(--md-orange-700);
  --jp-console-icon-background-color: var(--md-blue-700);
  --jp-console-icon-color: white;
  --jp-terminal-icon-background-color: var(--md-grey-800);
  --jp-terminal-icon-color: var(--md-grey-200);
  --jp-text-editor-icon-color: var(--md-grey-700);
  --jp-inspector-icon-color: var(--md-grey-700);
  --jp-switch-color: var(--md-grey-400);
  --jp-switch-true-position-color: var(--md-orange-900);
}
</style>
<style type="text/css">
/* Force rendering true colors when outputing to pdf */
* {
  -webkit-print-color-adjust: exact;
}

/* Misc */
a.anchor-link {
  display: none;
}

/* Input area styling */
.jp-InputArea {
  overflow: hidden;
}

.jp-InputArea-editor {
  overflow: hidden;
}

.cm-editor.cm-s-jupyter .highlight pre {
/* weird, but --jp-code-padding defined to be 5px but 4px horizontal padding is hardcoded for pre.cm-line */
  padding: var(--jp-code-padding) 4px;
  margin: 0;

  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;

}

.jp-OutputArea-output pre {
  line-height: inherit;
  font-family: inherit;
}

.jp-RenderedText pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
}

/* Hiding the collapser by default */
.jp-Collapser {
  display: none;
}

@page {
    margin: 0.5in; /* Margin for each printed piece of paper */
}

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}
</style>
<!-- Load mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>
<!-- MathJax configuration -->
<script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
<!-- End of mathjax configuration --><script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.0/mermaid.esm.min.mjs")).default;
    const parser = new DOMParser();

    mermaid.initialize({
      maxTextSize: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement("img");
      const doc = parser.parseFromString(svg, "image/svg+xml");
      const svgEl = doc.querySelector("svg");
      const { maxWidth } = svgEl?.style || {};
      const firstTitle = doc.querySelector("title");
      const firstDesc = doc.querySelector("desc");

      img.setAttribute("src", `data:image/svg+xml,${encodeURIComponent(svg)}`);
      if (maxWidth) {
        img.width = parseInt(maxWidth);
      }
      if (firstTitle) {
        img.setAttribute("alt", firstTitle.textContent);
      }
      if (firstDesc) {
        const caption = document.createElement("figcaption");
        caption.className = "sr-only";
        caption.textContent = firstDesc.textContent;
        return [img, caption];
      }
      return [img];
    }

    async function makeMermaidError(text) {
      let errorMessage = "";
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement("details");
      result.className = 'jp-RenderedMermaid-Details';
      const summary = document.createElement("summary");
      summary.className = 'jp-RenderedMermaid-Summary';
      const pre = document.createElement("pre");
      const code = document.createElement("code");
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement("pre");
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return [result];
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let results = null;
      let output = null;
      try {
        const { svg } = await mermaid.render(id, raw, el);
        results = makeMermaidImage(svg);
        output = document.createElement("figure");
        results.map(output.appendChild, output);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        results = await makeMermaidError(raw);
        output = results[0];
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(output);
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
</script>
<style>
  .jp-Mermaid:not(.jp-RenderedMermaid) {
    display: none;
  }

  .jp-RenderedMermaid {
    overflow: auto;
    display: flex;
  }

  .jp-RenderedMermaid.jp-mod-warning {
    width: auto;
    padding: 0.5em;
    margin-top: 0.5em;
    border: var(--jp-border-width) solid var(--jp-warn-color2);
    border-radius: var(--jp-border-radius);
    color: var(--jp-ui-font-color1);
    font-size: var(--jp-ui-font-size1);
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .jp-RenderedMermaid figure {
    margin: 0;
    overflow: auto;
    max-width: 100%;
  }

  .jp-RenderedMermaid img {
    max-width: 100%;
  }

  .jp-RenderedMermaid-Details > pre {
    margin-top: 1em;
  }

  .jp-RenderedMermaid-Summary {
    color: var(--jp-warn-color2);
  }

  .jp-RenderedMermaid:not(.jp-mod-warning) pre {
    display: none;
  }

  .jp-RenderedMermaid-Summary > pre {
    display: inline-block;
    white-space: normal;
  }
</style>
<!-- End of mermaid configuration --></head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=94cb1d2f-8d36-462e-aeb2-091e13a99f99">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman">Black-Scholes-Merton Model in Rust: with Delta Hedging<br/><br/>Southern Methodist University<br/><br/>By Barry Daemi<br/><br/>Updated: February 26, 2025<h2></h2>
$$\newcommand{\C}{\mathbb{C}} \newcommand{\R}{\mathbb{R}} \newcommand{\Z}{\mathbb{Z}} \newcommand{\Q}{\mathbb{Q}} \newcommand{\P}{\mathbb{P}}
\newcommand{\F}{\mathbb{F}} \newcommand{\N}{\mathbb{N}} \newcommand{\E}{\mathbb{E}}$$

</h2></div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=fd61a18a-2d9a-47ad-90f1-8282b280ad24">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman;">1. Introduction</h2>
<p style="text-align: justify;font-family: Times New Roman;">     In this research paper, we implemented the Black-Scholes-Merton model [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>, <a href="https://www.maths.tcd.ie/~dmcgowan/Merton.pdf" style='{{"color":"#95B9C7"}}' target="_blank">2</a>] in Rust. It is a European option pricing model based on the Black-Scholes partial differential equation and its associated analytical solution. In Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], Fischer Black and Myron Scholes derived their famous Black-Scholes partial differential equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial V(S_{t},t)}{\partial t} + rS_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2}\sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} -rV(S_{t},t) = 0. \tag{1}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Here, $V(S_{t},t)$ is a real-valued function, continuous and differentiable on the domain $\Omega = \R^{+} \times [0,T]$, where $S_{t} \in \mathbb{R}^{+}$ and $t \in [0,T]$. And hence it is assumed that $V(S_{t},t): \Omega \to \R$. The real-value function $V(S_{t},t)$ represents the value of the option, given the value of the underlying asset $S_{t}$ and at the given time $t$. The pricing dynamics of the underlying asset $S_{t}$ is represented by a <i>stationary</i> stochastic differential equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dS_{t} = \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t}, \tag{2}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">
where \(\mu S_{t}\) is the drift coefficient, and \(\sigma S_{t}\) is the volatility coefficient.<br/>
     An observant reader may note that, because Eq. (2) is a stochastic differential equation, it does not possess a deterministic solution but instead has a non-deterministic stochastic solution. Such a reader might also discern that Eq. (1) itself could, intuitively, be a stochastic differential equation with its own stochastic solution. However, for a specific mathematical reason, it is instead a partial differential equation. To understand why this is the case, we need to derive the famous Black-Scholes partial differential equation (Eq. 1) from the stochastic differential equation (Eq. 2). To begin this derivation, a Taylor expansion is applied to the real-value function $V(S_{t},t)$ at the given point $(S,t)$ where $V(S_{t}+dS_{t}, t+dt)$, so to attain the following:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} dV = V(S_{t}+dS_{t}, t+dt) &amp; + \frac{\partial V(S_{t}+dS_{t}, t+dt)}{\partial S_{t}} (S - S + dS_{t}) + \frac{\partial V(S_{t}+dS_{t}, t+dt)}{\partial t} (t - t + dt) \\ &amp; + \frac{1}{2} \frac{\partial^{2} V(S_{t}+dS_{t}) }{\partial S^{2}} (S_{t} - S_{t} + dS_{t} )^{2}  \\ &amp; + \frac{1}{2} \frac{\partial^{2} V(S_{t}+dS_{t}, t+dt)}{\partial S_{t} \partial t} (S_{t} - S_{t} + dS_{t}) (t - t + dt) \\ &amp; + \frac{1}{2} \frac{\partial^{2} V(S_{t}+dS_{t}, t+td)}{\partial t^{2}} (t - t + dt)^{2}. \end{align*} \tag{3}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">Computed the factor terms, and replaced $(S_{t}+dS_{t},t+dt)$ is with $(S,t)$ for notational simplicity.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} dV = V(S_{t},t) &amp; + \frac{\partial V(S_{t},t)}{\partial S_{t}} dS_{t} + \frac{\partial V(S_{t},t)}{\partial t} \mathop{} dt + \frac{1}{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} \mathop{} dS_{t}^{2} \\ &amp; + \frac{1}{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t} \partial t} \mathop{} dS_{t} dt + \frac{1}{2} \frac{\partial^{2} V(S_{t},t)}{\partial t^{2}} \mathop{} dt^{2} \end{align*} \tag{4}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">     The first, fifth and sixth terms are dominated by the second, third and fourth terms, and for this reason the first, fifth and sixth Taylor polynomial terms are dropped from Eq. (4).</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dV = \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dS_{t} + \frac{\partial V(S,t)}{\partial t} \mathop{} dt + \frac{1}{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} \mathop{} dS_{t}^{2} \tag{5}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Since $V(S,t)$ is a continuous and differentiable function over the domain $\Omega$, then its partial derivatives $\frac{\partial V}{\partial t}$, $\frac{\partial V}{\partial S_{t}}$ and $\frac{\partial^{2} V}{\partial S^{2}}$ exists, though this does not necessarily imply their continuity. And henceforth the collection of real-values functions that $V(S_{t},t)$ represents, must be narrowed down to those functions where these partial derivatives $\frac{\partial V}{\partial t}$, $\frac{\partial V}{\partial S_{t}}$ and $\frac{\partial^{2} V}{\partial S^{2}}$ exists and are continuous functions over the domain $\Omega$. With these conditions, Ito's Lemma is applicable, and we know for absolute certainty,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dW_{t}^{2} \to dt \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and therefore,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dW_{t} \to \sqrt{dt} \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and hence, we know that the smaller $dt$ becomes the closer $dW_{t}$ approximates $\sqrt{dt}$, e.g. $dW_{t} \approx \sqrt{dt}$.<br/>     To attain $dS_{t}^{2}$, simply square Eq. (2) and apply Ito's lemma.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$ \begin{align*} dS_{t}^{2} &amp; = \bigg( \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t} \bigg)^{2} = \mu^{2} S_{t}^{2} \mathop{} dt^{2} + \mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \sigma^{2} S_{t}^{2} dW_{t}^{2} \\ &amp; = \mu^{2} S_{t}^{2} \mathop{} dt^{2} + 2\mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \sigma^{2} S_{t}^{2} dW_{t}^{2} \end{align*} \tag{6}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Apply Ito's lemma to Eq. (8) to determine which terms vanish as $dt \to 0$. The third term of Eq. (8) contains $dW_{t}^{2}$, by Ito's Lemma $dW_{t}^{2} \to dt$ as $dt \to 0$, and therefore the third term order is $dt$. The second term contains $dtdW_{t}$, by Ito's Lemma $dW_{t} \to \sqrt{dt}$ as $dt \to 0$, and therefore $dtdW_{t} \to dt\sqrt{dt} = dt^{3/2}$ as $dt \to 0$, and so forth, the third term order is $dt^{3/2}$. The first term order is $dt^{2}$. Any order greater than $dt$ will vanish as $dt \to 0$, and therefore
</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dS^{2} \to \sigma^{2}S_{t}^{2}dt \;\; \text{ as } \;\; dt \to 0. \tag{7}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     Substitute equations (2) and (7) into Eq. (5), and simplify.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} dV &amp; = \frac{\partial V(S_{t},t)}{\partial S_{t}} \cdot \bigg( \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t} \bigg) + \frac{\partial V(S,t)}{\partial t} \mathop{} dt + \frac{1}{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} \cdot \bigg( \sigma^{2}S_{t}^{2}dt \bigg) \\ &amp; =\mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dt + \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} + \frac{V(S_{t},t)}{\partial t} \mathop{} dt + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} \mathop{} dt \\ &amp; = \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dV = \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \tag{8}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">With this derivation, we have obtained a stochastic differential equation that can be used to price an arbitrary option of an underlying asset without a dividend. To derive the famous Black-Scholes partial differential equation, further modifications of Eq. (8) are required.<br/>     A Delta hedge position must be constructed to modify Eq. (8) into the Black-Scholes partial differential equation. In Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], Fischer Black and Myron Scholes formulated the concept of the Delta hedge position, also known as a risk-neural hedge position, as a means to formulate their deterministic partial differential equation. Following the derivation in Wilmott et al. (1995) [<a href="https://doi.org/10.1017/CBO9780511812545" style='{{"color":"#95B9C7"}}' target="_blank">3</a>], pgs.40-44, consider a portfolio consisting of an option valued at $V$ and a quantity of the underlying asset, $\Delta$, priced at $S$. The portfolio value is represented as,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\Pi = V - \Delta S. \tag{9}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Further suppose that the quantity of the underlying asset is fixed at $\Delta$, but the values of the option and the underlying asset can vary. With that under consideration, the change in the value of the portfolio is represented by,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d\Pi = dV - \Delta dS. \tag{10}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substitute Eq. (2) and Eq.(8) into Eq. (10), and simplify.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} d\Pi &amp; = \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt - \Delta \bigg( \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t} \bigg) \\ &amp; = \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt - \mu S_{t} \Delta \mathop{} dt - \sigma S_{t} \Delta \mathop{} dW_{t} \\ &amp; = \sigma S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} \mathop{} dW_{t} - \sigma S_{t} \Delta \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2}S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt - \mu S_{t} \Delta \mathop{} dt \\ &amp; = \sigma S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \Delta \Bigg) \mathop{} dW_{t} + \Bigg( \mu S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{\partial V(S_{t},t)}{\partial t} - \mu S_{t} \Delta \Bigg) \mathop{} dt \\ &amp; = \sigma S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \Delta \Bigg) \mathop{} dW_{t} + \Bigg[ \mu S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \Delta \Bigg) + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{\partial V(S_{t},t)}{\partial t} \Bigg] \mathop{} dt \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">If $\Delta$ was set equal to $\frac{\partial V(S_{t},t)}{\partial S_{t}}$, then the stochastic component $dW_{t}$ would vanish from the stochastic differential equation, Eq. (8), causing it to become a partial differential equation. As mentioned in Wilmott et al. (1995) [<a href="https://doi.org/10.1017/CBO9780511812545" style='{{"color":"#95B9C7"}}' target="_blank">3</a>], pg. 31, the random walks from the underlying asset $S$ in Eq. (2) and the stochastic differential equation in Eq. (8) are correlated and not independent. And for that fact, the stochastic component $dW_{t}$ is able to be eliminated from Eq. (8) through the construction of the Delta hedge position, where the quantity of the underlying asset is $\Delta = \frac{\partial V(S_{t},t)}{\partial S_{t}}$ in the portfolio.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*}  &amp; = \sigma S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \Delta \Bigg) \mathop{} dW_{t} + \Bigg[ \mu S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \Delta \Bigg) + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{\partial V(S_{t},t)}{\partial t} \Bigg] \mathop{} dt \\ &amp; = \sigma S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \frac{\partial V(S_{t},t)}{\partial S_{t}} \Bigg) \mathop{} dW_{t} + \Bigg[ \mu S_{t} \Bigg( \frac{\partial V(S_{t},t)}{\partial S_{t}} - \frac{\partial V(S_{t},t)}{\partial S_{t}} \Bigg) + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{\partial V(S_{t},t)}{\partial t} \Bigg] \mathop{} dt \\ &amp; = \sigma \cdot 0 \cdot dW_{t} + \Bigg( \mu S_{t} \cdot 0 + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \\ &amp; = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d\Pi = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \tag{11}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Suppose that the value of the portfolio $\Pi$ was invested into a riskless asset that earned an interest rate of $r$ over $dt$ time. And thus assuming the logic from pg. 43 of Wilmott et al. (1995) [<a href="https://doi.org/10.1017/CBO9780511812545" style='{{"color":"#95B9C7"}}' target="_blank">3</a>], if concepts of arbitrage, and supply and demand remain true, alongside frictionless transactions for frictionless adjustment to the Delta hedge position, then the following equation</p>
<p style="text-align: justify;font-family: Times New Roman;">$$r\Pi dt = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt \tag{12}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">holds true. Substitute Eq. (9) and $\Delta = \frac{\partial V(S_{t},t)}{\partial S_{t}}$ into Eq. (12), and solve for the equation to equal zero.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$r \Bigg( V - S\Delta \Bigg) \mathop{} dt = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to r \Bigg( V(S_{t},t) - S \frac{\partial V(S_{t},t)}{\partial S_{t}} \Bigg) \mathop{} dt = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to  \frac{1}{dt} \cdot r \Bigg( V(S_{t},t) - S \frac{\partial V(S_{t},t)}{\partial S_{t}} \Bigg) \mathop{} dt = \frac{1}{dt} \cdot \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to rV(S_{t},t) - rS_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} =  \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to 0 = - rV(S_{t},t) + rS_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">With that derivation complete we arrive at the famed Black-Scholes partial differential equation from Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>]. Specifically Eq. (13) is used to price a European call or put option with an underlying asset that does not pay a dividend.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial V(S_{t},t)}{\partial t} + rS_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} -rV(S_{t},t) = 0. \tag{13}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In Merton (1973) [<a href="https://www.maths.tcd.ie/~dmcgowan/Merton.pdf" style='{{"color":"#95B9C7"}}' target="_blank">2</a>], Robert C. Merton extended the Black-Scholes option pricing model to include European options with a dividend-paying security equity and American options. The modified Black-Scholes partial differential equation with a security equity dividend-payment takes the following form:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial V(S_{t},t)}{\partial t} + \big( r - q \big)S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} -rV(S_{t},t) = 0. \tag{14}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Eq. (14) solution differs based upon its boundary conditions; the boundary conditions are dependent upon which type of option is being priced. Regardless of option type, Eq. (14) does not possess a closed-form solution, the only method to solve it are numerical methods. Unfortunately these numerical methods are outside the scope of this research project, we are going to leave the derivation and numerical implementation of these numerical methods to later research project.<br/>     In Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], on pages 642-643, Fischer Black and Myron Scholes derived their Black-Scholes partial differential equation, and presented it as their seventh equation in the publication. On pages 643-644, they presented their approach to solving their Black-Scholes partial differential equation. This is the function and the boundary conditions they set to price a European call option:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{array} {lcl} V(S,t) &amp; = &amp; S-K &amp; \text{if } \; S \geq K \\ \\ &amp; = &amp; 0 &amp; \text{if } \; S &lt; K. \end{array}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the closed-formed solution that Fischer Black and Myron Scholes derived in Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], and presented as their thirteen equation on pg. 644:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$C(S_{t},t) = S_{t}\mathcal{N}(d_{1})-Ke^{-r(T-t)}\mathcal{N}(d_{2}), \tag{15}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d_{1} = \frac{\ln\bigg( \frac{S_{t}}{K} \bigg) + \bigg(r+\frac{1}{2}\sigma^{2} \bigg) (T-t)}{\sigma\sqrt{T-t}} \tag{16}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d_{2} = d_{1} - \sigma \sqrt{T-t}, \tag{17}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and where $S_{t}$ denotes the price of the security equity at time $t$, $K$ denotes the strike price, $T$ denotes the maturation date of the European call option, r denotes the riskless interest rate, and $\mathcal{N}(\cdot)$ is the cumulative density function of the standard gauss distrubution, e.g. $\Phi(x) = N(0,1)$, since $\mu = 0$ and $\sigma^{2}=1$.<br/>     The purpose of this research article is an exploratory study of quantitative and mathematical aspects of the Black-Scholes-Merton model [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>, <a href="https://www.maths.tcd.ie/~dmcgowan/Merton.pdf" style='{{"color":"#95B9C7"}}' target="_blank">2</a>], and its numerical implementation specifically in the Rust programming language. And specifically we hope to implement a plausible Monte Carlo simulation of the Delta hedging trading strategy to discern it real-world application and potential profitability. In <b>section 1. Introduction</b>, we have derived from stratch the Black-Scholes partial differential equation Eq. (14), and then presented the closed-form solution from Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], which is the Black-Scholes-Merton model that prices European options without dividend payments. In <b>Section 2. Rust Implementation</b> we aim to delve into the mathematics and the implementation process of the various numerical and statistical methods required to implement in abstraction the Black-Scholes-Merton model. Coincided with the Rust implementation and Rust code of these various methods. <b>Section 3. Delta Hedge Simulation</b> will cover the Delta Hedge simulation and it Rust implementation, and a specific contexted scenarion. In addition, this section will explain the performance of the Delta Hedge simulation in the given contexted scenario, and the reason behind its performance. <b>Section 4. Conclusion</b> will just have some closing remarks.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=83bf2fb2-7854-4124-a684-b2c93d7c5881">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman;">2. Rust Implementation</h2>
<p style="text-align: justify;font-family: Times New Roman;">     This research project was written in a Rust notebook, of which functions similarly to its Jupyter Notebook counterpart. However, instead of the kernal being a Python compiler, it is a Rust compiler in its stead. The switch from a high-level programming language in Python to a middle-level programming language in Rust comes with certain trade-offs. Notably, it results in the loss of access to dynamic libraries such as Numpy, Pandas, and IPython, as well, as a loss in abiity to inject custom CSS using tools like <code>IPython.core.display.HTML</code>. Despite these limitations, the Markdown cells in a Rust notebook still utilizies the Markdown parser, <code>marked.js</code>, to interpret and render HTML and CSS content. And since Markdown cell have retained their functionily, the creaion of aestethically pleasing documentation through the implementation of traditional HTML and CSS is still possible, though a bit more laborous.<br/>     The importation of code dependencies is quite different between Python and Rust. In the case of Python, the dependency is downloaded to a local directory through the use of the Python standard package installer, <code>pip</code>, the local importation of the dependency occurs in the Python script itself. A Jupyter Notebook does not inherently use the <code>requirements.txt</code> for dependency management, but it does exist as a means to manage the versions of dependencies. The <code>requirements.txt</code> file is commonly utilized in Python software. In Rust, the Rust package manager, <code>cargo</code> uses a TOML file, <code>Cargo.toml</code>, to import and compile the dependencies. The importation and compilation of dependencies occurs during compile time. As Cargo imports and compiles during compile time, the Rust notebook itself must possess its own <code>Cargo.toml</code> file to manage dependencies. To write to the Rust notebook's <code>Cargo.toml</code> file, use the command <code>:dep</code>
alongside the normal syntax <code>&lt;name of dependency&gt; = {version = "0.0.0"}</code>; this will add the dependency to the <code>Cargo.toml</code> file. The syntax to bring a dependency into scope is the same as another Rust program, <code>use &lt;name of dependency&gt;</code>.<br/>     Evcxr Jupyter Kernel is the name of the Jupyter Rust kernal. Older version of Evcxr Jupyter Kernel before 2018, required an additional command to bring dependencies into scope: <code>extern crate &lt;name of dependency&gt;;</code>. This statement invokes a procedural macro <code>#[macro_use] extern crate &lt;name of dependency &gt;</code>, which brings the macros of dependencies into scope. Versions after 2018 have mostly made this statement obsolete, as the <code>use</code> command, by large can handle most modern dependency importations.<br/>     The code implementation required seven dependencies: <code>chrono</code>, <code>plotly</code>, <code>polars</code>, <code>rand</code>, <code>reqwest</code>, <code>serde</code> and <code>std</code>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e3958eec-50cd-4d46-a8d7-c2181ca8f5dd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [24]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span>:<span class="nc">dep</span><span class="w"> </span><span class="n">plotly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.4.0"</span><span class="p">}</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.8"</span><span class="p">}</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">reqwest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.11"</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">"blocking"</span><span class="p">,</span><span class="w"> </span><span class="s">"json"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">tokio</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2.4.0"</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">tokio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1.42"</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">"full"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1.0"</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">"derive"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">serde_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1.0"</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">chrono</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.4"</span>
:<span class="nc">dep</span><span class="w"> </span><span class="n">polars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.34"</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">"lazy"</span><span class="p">,</span><span class="w"> </span><span class="s">"strings"</span><span class="p">,</span><span class="w"> </span><span class="s">"dtype-categorical"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>

<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">plotly</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">rand</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">tokio</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">serde</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">reqwest</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">serde_json</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">chrono</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">polars</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=168b0373-ca4a-47f0-b3ee-b382dea36774">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [20]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">plotly</span>::<span class="p">{</span><span class="n">Plot</span><span class="p">,</span><span class="w"> </span><span class="n">Scatter</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">plotly</span>::<span class="n">common</span>::<span class="p">{</span><span class="n">Mode</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">fs</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">rand</span>::<span class="n">Rng</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">reqwest</span>::<span class="n">Error</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">serde</span>::<span class="n">Deserialize</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">collections</span>::<span class="n">HashMap</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">chrono</span>::<span class="p">{</span><span class="n">Local</span><span class="p">,</span><span class="w"> </span><span class="n">NaiveDate</span><span class="p">,</span><span class="w"> </span><span class="n">Datelike</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">polars</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">collections</span>::<span class="n">HashMap</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">hash</span>::<span class="n">Hash</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">cell</span>::<span class="n">RefCell</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=1dc7507e-c0a4-4688-8b78-d860cfc5f6cc">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Despite Rust being a "entry-point requirement" and "function-oriented" programming language, the Evcxr Jupyter Kernel provides the functionality of "module-level scope" variable declaration and assignment. In the following example, the variable <code>a</code> was declared by the <code>let</code> command and was assigned the value 5.0. Similar to the conventional Jupyter Notebook, invoking a variable or returning a function's output results in its value being printed to console.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e1a5fa40-3261-4ba4-8738-1829eba02f0b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [19]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="p">;</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[19]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>5.0</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c85b7653-438d-4165-9f5a-db97fb2689b3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">The next example demonstrates that the Evcxr Jupyter Kernel allows for the execution of functions independent of the "entry point", e.g. the <code>main()</code> function. However, despite the availability of this functionality, we chose to conform to the "entry-point requirement" in our implementation of the Black-Scholes-Merton model in Rust. In the following paragraphs, we will outline the various functions that were created for this Rust implementation.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=d91229d0-961e-4fbc-86c2-82f5111beb6b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [26]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">returns_string</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Word</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="nb">String</span>::<span class="n">from</span><span class="p">(</span><span class="s">"Hello there!"</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Word</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">test_function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">introduction</span>: <span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="nb">String</span>::<span class="n">from</span><span class="p">(</span><span class="s">"My name is Barry."</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">combined_string</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"{} {}"</span><span class="p">,</span><span class="w"> </span><span class="n">returns_string</span><span class="p">(),</span><span class="w"> </span><span class="n">introduction</span><span class="p">);</span>
<span class="w">    </span><span class="n">combined_string</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">It is a fine day!"</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">combined_string</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">test_function</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Hello there! My name is Barry.
It is a fine day!
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=576be8eb-609a-4b4c-9d04-e7ffe2485989">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Although the Black-Scholes-Merton model itself does not require the calcalution of central tendency and dipersion, the Delta hedge simulation does, and for that reason the first two Rust implementations to be addressed are sample mean and sample variance. The sample mean is an unbiased estimator of the population, this estimate will be used to calculate expected return and volatility of the underlying equity security, and used in the Methods of Moments esimation of parameters for an implementation of a Cox-Ingersoll-Ross Model [<a href="https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf" style='{{"color":"#95B9C7"}}'>3</a>, <a href="https://en.wikipedia.org/wiki/Cox%E2%80%93Ingersoll%E2%80%93Ross_model" style='{{"color":"#95B9C7"}}'>4</a>]. The sample mean formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\bar{x} = \frac{1}{n} \sum_{i=1}^{n} x_{i}, \tag{14}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $x_{i}$ is an observation from a dataset, and $n$ is the size of that dataset. Suppose the dataset was a <code>Vec<f64></f64></code> vector. To calculate the sum of the vector, apply <code>.iter()</code> to make the collection iterable, and then <code>.sum::&lt;f64&gt;()</code> to sum the $f64$ elements. To compute $n$ and have it divide the sum: add <code>/(data.len() as f64)</code> to the last code statement. The <code>/</code> symbol is the division operator, and <code>data.len()</code> returns the length of the vector. To cast the return value of <code>data.len()</code> as a <code>f64</code> add <code>as f64</code> to the statement.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ad66532a-47fc-48bc-ba7b-0ecf8f10fb13">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [28]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">mean</span><span class="p">(</span><span class="n">data</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=442c6ebb-bb65-4e03-97de-17236b132e4e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The sample variance is the unbiased estimator of population variance, its formulation is the following:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\bar{\sigma^{2}} = \frac{1}{n-1} \sum_{i=1}^{n} \big( \bar{x} - x_{i} \big)^{2}. \tag{15}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">As a sample variance cannot be computed for a dataset with fewer than two elements, the <code>var()</code> function returns an <code>Option&lt;f64&gt;</code> datatype. When the dataset contain fewer than two elements, <code>None</code> is returned; otherwise the variance is returned as <code>Some(f64)</code>. To handle return of the <code>Option&lt;f64&gt;</code>, a <code>match</code> statement is used to process the value appropriately. The Rust implementation of the sample variance is shown below, alongside how to generate variable for the variance:</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">1</span><span class="w">     </span><span class="k">fn</span> <span class="nf">var</span><span class="p">(</span><span class="n">data</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="mi">2</span><span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span>
<span class="mi">3</span><span class="w">             </span><span class="k">return</span><span class="w"> </span><span class="nb">None</span><span class="p">;</span>
<span class="mi">4</span><span class="w">        </span><span class="p">}</span>
<span class="mi">5</span><span class="w">         </span><span class="kd">let</span><span class="w"> </span><span class="n">average</span>: <span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span>
<span class="mi">6</span><span class="w">         </span><span class="nb">Some</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">average</span><span class="p">).</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">))</span>
<span class="mi">7</span><span class="w">     </span><span class="p">}</span>
<span class="mi">8</span><span class="w">     </span>
<span class="mi">9</span><span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="n">data_array2</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">7.0</span><span class="p">];</span>
<span class="mi">11</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">variance2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">var</span><span class="p">(</span><span class="n">data_array2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="mi">12</span><span class="w">         </span><span class="nb">Some</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">variance</span><span class="p">,</span>
<span class="mi">13</span><span class="w">         </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="mi">14</span><span class="w">             </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Not enough data to calculate a variance."</span><span class="p">);</span>
<span class="mi">15</span><span class="w">             </span><span class="mf">0.0</span><span class="w"> </span><span class="c1">// Provides a default value</span>
<span class="mi">16</span><span class="w">         </span><span class="p">}</span>
<span class="mi">17</span><span class="w">     </span><span class="p">};</span>
<span class="mi">18</span><span class="w">     </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Variance: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">variance2</span><span class="p">);</span>
</pre></div>
<hr/>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=5eed496e-4b5c-47c5-ab3d-6c0d2705a30d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [30]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">var</span><span class="p">(</span><span class="n">data</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">None</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">average</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">average</span><span class="p">).</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a238c2ea-1e75-41f1-b1a5-69917bca9f3f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Borrowing a useful function from MATLAB [<a href="https://www.mathworks.com/help/matlab/ref/double.linspace.html" style='{{"color":"#95B9C7"}}'>5</a>] and Numpy [<a href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html" style='{{"color":"#95B9C7"}}'>6</a>], the <code>Linspace</code> function generates a linearly spaced collection of values. Conventionally used in computational mathematics as a means to compute a discretized x-domain, this is our use case in this context. The algorithm is rather simple: suppose a closed-interval $[a,b]$ and $n \in \N$ as the number of partitions that will be made to that closed-interval. The step-size $h$ is calculated as follows:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h=\frac{b-a}{n}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Then the following formulation generates the discretized x-doman:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\{ x_{i} \in [a,b] | x_{i} = a + h \cdot i, i \in \{0,1,2,\ldots,n-1, n\}\}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To generate the discrete $x$-domain, an empty vector is initialized. The step size $h$ is computed, and the $x_{i}$ values are computed and pushed iteratively into the vector, which is later returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=28e1055a-3b7e-47f2-aa08-26bcca0d0cc8">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [32]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">linspace</span><span class="p">(</span><span class="n">lower_boundary</span>: <span class="kt">f64</span><span class="p">,</span><span class="n">upper_boundary</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">n</span>: <span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">array</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">upper_boundary</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lower_boundary</span><span class="p">)</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">lower_boundary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=f29e3501-b3ae-4313-8bbb-a17f28c5529e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The closed-form solution of the Black-Scholes partial differential equation, Eq. (15), has two cumulative probabilities from the standard Gaussian cumulative density function, $\mathcal{N}(d_{1})$ and $\mathcal{N}(d_{2})$, their mathematical representations are as follows:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) = \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t} \;\; \text{ and } \;\; \mathcal{N}(d_{2}) = \int_{-\infty}^{d_{2}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">These two definite integrals cannot be computed analytically; instead, a numerical integration method must be used approximate their definite antiderivatives. The first numerical integration method chosen was the composite Trapezoid rule. Recollecting the concepts of Reimann sum [<a href="https://en.wikipedia.org/wiki/Riemann_sum" style='{{"color":"#95B9C7"}}'>7</a>] and Riemann integration [<a href="https://en.wikipedia.org/wiki/Riemann_integral" style='{{"color":"#95B9C7"}}'>8</a>, <a href="https://www.themathdoctors.org/writing-a-riemann-sum-as-an-integral/" style='{{"color":"#95B9C7"}}'>9</a>]: consider a function $f(x)$ and a closed-interval $[a,b]$. The integral of $f(x)$ over $[a,b]$ can be represented as,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx = \lim_{n \to \infty} \sum^{n}_{i=0} f(x_{i})\Delta x,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\Delta x= \frac{b-a}{n} \;\; \text{ and } \;\; x_{i}=a+i \cdot \Delta x.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">With Riemann integration the closed-interval $[a,b]$ is partitioned into segments of legnth $\Delta x$, forming the partitions ${x_{0}=a, x_{2}, x_{3}, \ldots, x_{n-1}, x_{n}=b}$. Each partition point $x_{i}$ is evaluated by the function $f(x)$, and the result is multiplied by the segment width $\Delta x$. Conceptionally, $f(x_{i}) \Delta x$ represents the area of a rectangle under the curve $f(x)$, and the sum of these rectangles equals the definite antiderivative. In term of numerical implementation, the number of partitions, $n$, is finite, and therefore the partition width, $\Delta x$ cannot become an infinitesimal. And since the partition width, $\Delta x$ is greater than a infinitesimal, the Rieman integration can only approximate the definite antiderivative:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \sum_{i=0}^{n} f(x_{i}) \cdot h, \tag{16}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b-a}{n} \;\; \text{ and } \;\; x_{i} = a + i \cdot h.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     For example let's try to numerically approximate $\mathcal{N}(d_{1})$ using left-side Riemann integration. Consider a closed-interval of $[a,b] = [-5.0,0.4]$, with the number of partitions, $n=10$. The partitions of the closed-interval is $\{x_{0}, x_{1}, x_{2}, x_{3}, x_{4}, x_{5}, x_{6}, x_{7}, x_{8}, x_{9}\}$. Computing the partition width:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b - a}{n} = \frac{0.4 - -5.0}{10} = 0.54.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Computing partition values, $\{ x_{i} \in [a,b] | x_{i} = a + h \cdot i, i \in \{0,1,2,\ldots,n-1, n\}\}$ yields $\{-5.0, -4.46, -3.92, -3.38, -2.84, -2.30, -1.76, -1.22, -0.68, -0.14\}$. Using these partition values, we computed the approximation of $\mathcal{N}(d_{1})$ with Eq. (16):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \sum_{i=0}^{n} f(x_{i}) \cdot h.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Expanding the summation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=f(x_{0}) \cdot h + f(x_{1}) \cdot h + f(x_{2}) \cdot h + f(x_{3}) \cdot h + f(x_{4}) \cdot h + f(x_{5}) \cdot h + f(x_{6}) \cdot h + f(x_{7}) \cdot h + f(x_{8}) \cdot h + f(x_{9}) \cdot h.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substituting the numerical values for $f(x_{i})$ and $h=0.54$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*}=0.0000002368 \cdot 0.54 + 0.0000040535 \cdot 0.54 + 0.0000442354 \cdot 0.54 + 0.0003623955 \cdot 0.54 + 0.0022556489 \cdot 0.54 \\ + 0.0107240887 \cdot 0.54 + 0.0392038895 \cdot 0.54 + 0.1112324311 \cdot 0.54 + 0.2482522291 \cdot 0.54 + 0.4443299951. \cdot 0.54.\end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Simplication through computation.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*}=0.0000001279 + 0.0000021889 + 0.0000238871 + 0.0001956936 + 0.0012180504 \\\ + 0.0057910079 + 0.0211701003 + 0.0600655128 + 0.1340562037 + 0.2399381974. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) \approx 0.4624609699.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     The true value of $\mathcal{N}(d_{1})$ is $0.6554217416$ and our left-side Riemann integration algorithm approximated 0.4624609699. With too few partitions, the size of the rectangles are too large to provider for a good approximation. There exists significant gaps between these large rectangles and the curve of the standard Gaussian cumulative density function. Additionally, the left-side Riemann integration algorithm tends to under-approximate, and the fewer the number of partitions, the more pronounce becomes with this method of numerical integration. The following diagram illustrate the geometric perspective of the Riemann integration algorithm, and how it computes the approximation.</p>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="Left Side Riemann Integration" height="600" src="Left_Side_Riemann_Integration.PNG" width="550"/>
<figcaption>Figure 1 - Riemann Integration.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<p style="text-align: justify;font-family: Times New Roman;">     Consider an arbitrary trapezoid.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=989caaa4-3d53-4c97-a978-2b7ee183d039">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="An arbitrary Trapezoid" height="500" src="Trapezoid_diagram2.PNG" width="450"/>
<figcaption>Figure 2 - An arbitrary Trapezoid.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=acba7938-08b1-458b-b143-2b6ea61567ec">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">Recall the trapezoid area formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{matrix} \text{Area} \\  \text{of a} \\ \text{trapezoid} \end{matrix} = \frac{\bar{a} + \bar{b}}{2} \cdot \bar{h}. \tag{17}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Suppose that $\bar{a} = f(x_{i-1})$, $\bar{b}=f(x_{i})$ and $\bar{h} = \frac{b-a}{n}$ in Eq. (17). Instead of approximating the definite antiderivative with rectangles, the approximation can be based around trapezoids. Substituting the previous supplantation into Eq. (16) yields:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \sum_{i=1}^{n} \frac{f(x_{i-1}+f(x_{i}))}{2} \cdot h. \tag{18}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Computing Eq. (18) and rearranging. Note that $a=x_{0}$ and $b=x_{n}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sum_{i=1}^{n} \frac{f(x_{i-1})+f(x_{i})}{2} \cdot h = \frac{f(x_{0})+f(x_{1})}{2} \cdot h + \frac{f(x_{1})+f(x_{2})}{2} \cdot h + \cdots + \frac{f(x_{n-2})+f(x_{n-1})}{2} \cdot h + \frac{f(x_{n-1})+f(x_{n})}{2} \cdot h$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{f(a)+f(x_{1})}{2} \cdot h + \frac{f(x_{1})+f(x_{2})}{2} \cdot h + \cdots + \frac{f(x_{n-2})+f(x_{n-1})}{2} \cdot h + \frac{f(x_{n-1})+f(b)}{2} \cdot h$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \bigg( \frac{f(a)}{2} + \frac{f(x_{1})}{2} \bigg) \cdot h + \bigg( \frac{f(x_{1})}{2} + \frac{f(x_{2})}{2} \bigg) \cdot h + \cdots + \bigg( \frac{f(x_{n-2}))}{2} + \frac{f(x_{n-1}}{2} \bigg) \cdot h + \bigg( \frac{f(x_{n-1})}{2} + \frac{f(b)}{2} \bigg) \cdot h$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{f(a)}{2} \cdot h + \frac{f(b)}{2} \cdot h + \frac{f(x_{1})}{2} \cdot h + 2 \cdot \frac{f(x_{2})}{2} \cdot h + \cdots + 2 \cdot \frac{f(x_{n-2})}{2} \cdot h + \frac{f(x_{n-1})}{2} \cdot h$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \frac{f(a)}{2} \cdot h + \frac{f(b)}{2} \cdot h + h\sum_{i=1}^{n-1} f(x_{i})$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{h}{2} [f(a)+f(b)] + h\sum_{i=1}^{n-1} f(x_{i}).$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the composite Trapezoid rule for numerical integration:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} [f(a)+f(b)] + h\sum_{i=1}^{n-1} f(x_{i}), \tag{19}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b - a}{n} \;\; \text{ and } \;\; x_{i} = a + i \cdot h.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     let's implement the composite Trapezoid rule to approximate $\mathcal{N}(d_{1})$. Suppose a closed-interval $[a,b]=[-5.0,0.4]$, with $n+1$ partitions. Consider $n=10$, then the partitions of the closed-interval is $\{[x_{0},x_{1}], [x_{1},x_{2}], [x_{2},x_{3}], [x_{3},x_{4}], [x_{4},x_{5}], [x_{5},x_{6}], [x_{6},x_{7}], [x_{7},x_{8}], [x_{8},x_{9}], [x_{9},x_{10}]\}$. Computing the partition width,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b - a}{n} = \frac{0.4 - -5.0}{10} = 0.54.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Computing partition values, $\{ x_{i} \in [a,b] | x_{i} = a + h \cdot i, i \in \{0,1,2,\ldots,n-1, n\}\}$ yields $\{-5.0, -4.46, -3.92, -3.38, -2.84, -2.30, -1.76, -1.22, -0.68, -0.14\}$. Using Eq. (19), we computed the approximation to $\mathcal{N}(d_{1})$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} [f(a)+f(b)] + h\sum_{i=1}^{n-1} f(x_{i}).$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Expanding the summation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \frac{h}{2} [f(a)+f(b)] + h \cdot \big( f(x_{1}) + f(x_{2}) + f(x_{3}) + f(x_{4}) + f(x_{5}) + f(x_{6}) + f(x_{7}) + f(x_{8}) + f(x_{9}) \big).$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substituting the numerical values for $f(a)$, $f(b)$, $f(x_{i})$ and $h=0.54$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} = \frac{0.54}{2} \big[ 0.0000014867 + 3682701403 \big] + 0.54 \big( 0.0000191207 +   0.0001837125 + 0.0013186609 + 0.0070711049 \\ + 0.0283270377 + 0.08477636 + 0.18954316 + 0.31659291 + 0.39505174 \big) \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Simplifying.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \frac{0.54}{2} \big[ 0.0000014867 + 3682701403 \big] + 0.5523572545.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) \approx 0.6517905938.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     Recall that the true value of $\mathcal{N}(d_{1})$ is $0.6554217416$, and the composite Trapezoid rule approximated 0.6517905938. This approximation is much closer to the exact value than the Riemann integration method approximation. And although the number of partitions were not increased between the two methods, the tighter fit of the trapezoids to the curve of standard Gaussian cumulative density function provides for a more accurate approximation. For better visualization, the following diagram illustrates the geometric perspective of the composite Trapezoid rule.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=ae7ea081-41b4-4ef9-8bd3-ab47d53577d3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="Numerical Integration by Composite Trapezoid Rule" height="600" src="Numerical_Integration_by_Composite_Trapezoid_Rule.PNG" width="550"/>
<figcaption>Figure 3 - Numerical Integration with composite Trapezoid rule.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=84d074ab-c06b-4f0b-acca-79746887894f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Since the closed-interval $[a,b]$ has the set order of $b &gt; a$, and since, integration expects a set order of $b &gt; a$, a boolean condition checking for this set order was implemented. If set order is found to be violated, the <code>composite_trapezoid_rule</code> function return $0.0$ and two error messages. A second conditional was implemented to check on the number of partitions: the number of partition $n$ cannot be negative and must be equal to or greater than $1$. To improve computational efficiency, a more optimitized formulation of Eq. (19) was used. This formulation is given in Eq. (20), it simplifies the computation by removing a multiplication operation:</p>
<p style="text-align: justify;font-family: Times New Roman;">\begin{align*} \int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} [f(a)+f(b)] + h\sum_{i=1}^{n-1} f(x_{i}) &amp; = \frac{h}{2} [f(a)+f(b)] + \frac{h}{2} \cdot 2  \sum_{i=1}^{n} f(x_{i}) \\ &amp; = \frac{h}{2} \bigg[ f(a) + f(b) + 2 \sum_{i=1}^{n} f(x_{i}) \bigg]. \end{align*}\begin{align*} \int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} [f(a)+f(b)] + h\sum_{i=1}^{n-1} f(x_{i}) &amp; = \frac{h}{2} [f(a)+f(b)] + \frac{h}{2} \cdot 2  \sum_{i=1}^{n} f(x_{i}) \\ &amp; = \frac{h}{2} \bigg[ f(a) + f(b) + 2 \sum_{i=1}^{n} f(x_{i}) \bigg]. \end{align*}</p>
<p style="text-align: justify;font-family: Times New Roman;">and therefore,
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} \bigg[ f(a) + f(b) + 2 \sum_{i=1}^{n} f(x_{i}) \bigg]. \tag{20}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To implement this algorithm, a variable <code>sum</code> was initiated and its value was set to zero. A <code>for</code> loop was used to compute the $\sum_{i=1}^{n} f(x_{i})$. For each iteration, the loop generated a partition value $x_{i}$, and passed that partition value into $f(x)$, then added the resulting value with the <code>sum</code> variable. Lately, a variable <code>integral</code> was initiated to store the result of Eq. (20). This <code>integral</code> variable is what is returned as the output of the function.</p>
</p></div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=cbfb2965-2115-42dc-9478-7900a7a5ebe9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [34]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">composite_trapezoid_rule</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>: <span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">b</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">n</span>: <span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span>
<span class="nc">where</span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error: b &lt; a. Trapezoid rule failed."</span><span class="p">);</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"a = {}, b = {}"</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error: The partition size must be greater than 1.</span><span class="se">\n</span><span class="s">Partition size set to 10."</span><span class="p">);</span>
<span class="w">        </span><span class="mi">10</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">n</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="o">+=</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="o">*</span><span class="n">h</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">+</span><span class="n">f</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="mf">2.0</span><span class="o">*</span><span class="n">sum</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">integral</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=bd220bcf-dfe7-4bcf-850f-98d820fa0f99">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Postulate a dataset $\mathcal{D}=\{ S_{t} \mid t = 1,2,\cdots,T \}$, where $S_{t}$ represents the price of a security equity at time $t$, and $T$ is the total number of observed time-steps. This dataset encapulates the temporoal dynamics of the security equity's price as its elements. To compute the expected return and historical volatility for $\mathcal{D}$, the logarithmic returns of the security equity must be computed first. The logarithmic return of the security equity at time-step $t$, denoted by $r_{t}$, is given by the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$r_{t} = \ln\bigg( \frac{S_{t}}{S_{t-1}} \bigg), \tag{21}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $S_{t}$ is the price at time-step $t$, and $S_{t-1}$ is the price at time-step $t-1$. Using Eq. (14) and Eq. (21) the sample mean can be comuted for $\mathcal{D}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\bar{r} = \frac{1}{T} \sum_{i=1}^{T} r_{t}. \tag{22}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Using Eq. (15) and Eq. (22) the sample variance of $\mathcal{D}$ can be computed.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t}^{2} = \frac{1}{T-1} \sum_{i=1}^{T} (r_{t} - \bar{r})^{2}. \tag{23}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The square root of the sample variance is referred to as the <i>realized</i> volatility of the security equity. To compute the historical volatility, e.g. annualized volatility, the <i>realized</i> volatility is scaled by the square of the number of trading day in a given year. As there are 252 trading days in a given year, the <i>historical</i> volatility is given by,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t} = \sqrt{\frac{1}{T-1} \sum_{i=1}^{T} (r_{t} - \bar{r})^{2}} \cdot \sqrt{252}. \tag{24}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In essence, <i>historical</i> volatility is a measurement of the actual past price movement of the security equity. If the <i>historical</i> volatility over a given time interval $[0,T]$ is high, it implies that large price fluctuations occurred in the past. Although, this measurement does not reveal whether those price fluctuations were predominatly upwards, or downwards - it only indicates their magnitude. Conversely low volatility indicates that the security equity experienced small price fluctuations during the given time period $[0,T]$.<br/>     The market's expectation of future volatility is quantified in <i>implied</i> volatility, which is approximated using numerical optimization methods or Monte Carlo simulations. <i>Implied</i> volatility serves as a measure of the current market interest in the security equity and as an indicator of the demand for the security equity. We chose Newton-Raphson method as the numerical method to approximate <i>Implied</i> volatility of the security equity. There are significant limitations to this approach, but we are only concerned with one of those limitations. The formulation of Newton-Raphson method: consider $f(x)$ a real-value continuous and differentiable function over the domain $\R$. Suppose three values $x_{t}, x_{t+1}, \Delta x \in \R$, where $x_{t+1} = x_{t}+\Delta x$. Evaluate $f(x)$ at $x_{t}$ and $x_{t+1}$, e.g., $y_{t} = f(x_{t})$ and $y_{t+1} = f(x_{t+1})$. Recall the formula of a slope:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$m = \frac{y_{t+1} - y_{t}}{x_{t+1} - x_{x}}, \tag{25}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Recall that the slope variable $m = f^{'}(x_{t})$, and note that $f(x_{t+1})=0$. Substitute $f(x)$ into Eq. (25) and compute for $x_{t+1}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$m = \frac{y_{t+1} - y_{t}}{x_{t+1} - x_{x}} \to f^{'}(x_{t}) = \frac{f(x_{t+1}) - f(x_{t})}{x_{t+1}-x_{t}} \to f^{'}(x_{t}) = \frac{0 - f(x_{t})}{x_{t+1}-x_{t}} \to f^{'}(x_{t}) (x_{t+1}-x_{t}) = -f(x_{t})$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to x_{t+1}-x_{t} = -\frac{f(x_{t})}{f^{'}(x_{t})} \to x_{t+1} = x_{t} - \frac{f(x_{t})}{f^{'}(x_{t})}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the formula for Newton-Raphson method:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x_{t+1} = x_{t} - \frac{f(x_{t})}{f^{'}(x_{t})}. \tag{26}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     The Newton-Raphon method of optimization requires the first-derivative $f^{'}(x)$ to be either the exact closed-form solution, or an approximation. Since Eq. (15) is the closed-form solution to the Black-Scholes partial differential equation, Eq. (14), a closed-form solution for $f^{'}(x)$ can be attained. In our case, as we are optimizing for the volatility, denoted by $\sigma$, the first derivative $f^{'}(x_{t})$ takes the form of the partial derivative $\frac{\partial C(S_{t},t)}{\partial \sigma}$. This partial derivative is a Call Greek called Vega, it measures the sensitivity of the price of the call option wiht respect to a change in volatility $\sigma$. Computing the partial derivative $\frac{\partial C(S_{t},t)}{\partial \sigma}$: first step is to compute $\frac{\partial d_{1}}{\partial \sigma}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial d_{1}}{\partial \sigma} = \frac{\partial }{\partial \sigma} \bigg( \frac{\ln \big( \frac{S_{t}}{K} \big) + \big( r + \frac{1}{2}\sigma^{2} \big)(T-t)}{\sigma \sqrt{T-t}} \bigg) = \frac{1}{\sqrt{T-t}} \cdot \frac{\partial }{\partial \sigma} \bigg( \frac{\ln \big( \frac{S_{t}}{K} \big) + \big( r + \frac{1}{2}\sigma^{2} \big)(T-t)}{\sigma} \bigg)$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{1}{\sqrt{T-t}} \cdot \frac{\frac{\partial }{\partial \sigma} \bigg( \ln\big(\frac{S_{t}}{K} \big) + \big( r + \frac{1}{2} \sigma^{2} \big) (T-t) \bigg) \cdot \sigma - \bigg( \ln\big( \frac{S_{t}}{K} \big) + \big( r +\frac{1}{2}\sigma^{2} \big)(T-t) \bigg) \cdot \frac{\partial \sigma}{\partial \sigma}}{\big( \sigma \big)^{2}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{\bigg( \frac{\partial }{\partial \sigma} \ln\big( \frac{S_{t}}{K} \big) + \frac{\partial }{\partial \sigma} \big( r + \frac{1}{2}\sigma^{2} \big)(T-t) \bigg) \cdot \sigma - \bigg( \ln\big( \frac{S_{t}}{K} \big) + \big( r + \frac{1}{2}\sigma^{2} \big) (T-t) \bigg) \cdot 1}{\sigma^{2}\sqrt{T-t}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{\bigg( \frac{\partial }{\partial \sigma} \ln\big( \frac{S_{t}}{K} \big) + \big( \frac{\partial }{\partial \sigma} r +  \frac{\partial }{\partial \sigma} \frac{1}{2}\sigma^{2} \big)(T-t) \bigg) \cdot \sigma - \bigg( \ln\big( \frac{S_{t}}{K} \big) + \big( r + \frac{1}{2}\sigma^{2} \big) (T-t) \bigg) \cdot 1}{\sigma^{2}\sqrt{T-t}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\bigg( 0 + \big( 0 + \sigma \big) (T-t) \bigg) \cdot \sigma - \bigg( \ln\big( \frac{S_{t}}{K} \big) + \big( r + \frac{1}{2}\sigma^{2} \big)(T-t) \bigg) \cdot 1}{\sigma^{2} \sqrt{T-t}} = \frac{\sigma^{2} (T-t) - \ln\big( \frac{S_{t}}{K} - \big( r + \frac{1}{2}\sigma^{2} \big)(T-t) \big)}{\sigma^{2} \sqrt{T-t}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\frac{\sigma^{2}(T-t)}{\sigma^{2}\sqrt{T-t}} + \frac{-\ln\big( \frac{S_{t}}{K} \big) - \big( r + \frac{1}{2}\sigma^{2} \big)(T-t)}{\sigma^{2} \sqrt{T-t}} =\frac{\sigma^{2}(T-t)}{\sigma^{2}\sqrt{T-t}} - \bigg( \frac{\ln\big( \frac{S_{t}}{K} + \big( r + \frac{1}{2}\sigma^{2} \big)(T-t) \big)}{\sigma \sqrt{T-t}} \bigg) \cdot \frac{1}{\sigma}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=\sqrt{T-t} - d_{1} \cdot \frac{1}{\sigma} = \sqrt{T-t} - \frac{d_{1}}{\sigma} \to \color{#c70e0e}{\frac{\partial d_{1}}{\partial \sigma} = \sqrt{T-t} - \frac{d_{1}}{\sigma}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Second step is to take the partial derivative of $d_{2}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial d_{2}}{\partial \sigma} = \frac{\partial }{\partial \sigma} \big( d_{1} - \sigma\sqrt{T-t} \big) = \frac{\partial d_{1}}{\partial \sigma} - \frac{\partial }{\partial \sigma} \sigma \sqrt{T-t} = \sqrt{T-t} - \frac{d_{1}}{\sigma} - \sqrt{T-t} = -\frac{d_{1}}{\sigma} \to \color{#c70e0e}{\frac{\partial d_{2}}{\partial \sigma} = -\frac{d_{1}}{\sigma}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">After computing these two partial derivatives, we have attained $\frac{\partial d_{1}}{\partial \sigma} = \sqrt{T-t} - \frac{d_{1}}{\sigma}$ and $\frac{\partial d_{2}}{\partial \sigma} = -\frac{d_{1}}{\sigma}$. With $\frac{\partial d_{1}}{\partial \sigma}$ and $\frac{\partial d_{2}}{\partial \sigma}$ computed, the partial derivative $\frac{\partial C(S_{t},t)}{\partial \sigma}$ can be computed with much more ease.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial C(S_{t},t)}{\partial \sigma} = \frac{\partial }{\partial \sigma} \bigg( S_{t}\mathcal{N}(d_{1}) - Ke^{-r(T-t)} \bigg) = \frac{\partial }{\partial \sigma} S_{t}\mathcal{N}(d_{1}) - \frac{\partial }{\partial \sigma} Ke^{-r(T-t)}\mathcal{N}(d_{2})$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=S_{t} \frac{\partial }{\partial \sigma} \mathcal{N}(d_{1}) - Ke^{r(T-t)} \frac{\partial }{\partial \sigma} \mathcal{N}(d_{2}) = S_{t} \frac{\partial }{\partial \sigma} \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}\sigma^{2}} \mathop{} d\sigma - K e^{-r(T-t)} \frac{\partial }{\partial \sigma} \int_{-\infty}^{d_{2}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}\sigma^{2}} \mathop{} d\sigma$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=S_{t} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{1}^{2}} \cdot \frac{\partial d_{1}}{\partial \sigma} - Ke^{-r(T-t)} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{2}^{2}} \cdot \frac{\partial d_{2}}{\partial \sigma} = S_{t} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{1}^{2}} \cdot \bigg( \sqrt{T} - \frac{d_{1}}{\sigma} \bigg) - Ke^{-r(T-t)} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{2}^{2}} \cdot -\frac{d_{1}}{\sigma}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} - S_{t}\mathcal{N}(d_{1}) + K e^{-r(T-t)} \mathcal{N}^{'}(d_{2}) \frac{d_{1}}{\sigma}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The second and third term together equal zero,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$- S_{t}\mathcal{N}(d_{1}) + K e^{-r(T-t)} \mathcal{N}^{'}(d_{2}) \frac{d_{1}}{\sigma}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and therefore,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$=S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} - S_{t}\mathcal{N}(d_{1}) + K e^{-r(T-t)} \mathcal{N}^{'}(d_{2}) \frac{d_{1}}{\sigma} = S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} + 0 = S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \color{#c70e0e}{\frac{C(S_{t},t)}{\partial \sigma} = S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The $f(x)$ function in our case is not an actual function, instead it is the price difference between the Black-Scholes-Merton model price and the actual market price of an actively traded call option. And there is no closed-form to the price difference formulation, $f(x)$ is just replaced with the resulting real-value.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{matrix} \text{Price Difference} \end{matrix} \;\; = \;\; \begin{matrix} \text{Call Option Price} \\ \text{by} \\ \text{Black-Scholes-Merton model} \end{matrix} \;\; - \;\; \begin{matrix} \text{Actual Market Price} \\ \text{of an actively} \\ \text{traded Call Option} \end{matrix}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In our case the Newton-Raphson method is,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t+1} = \sigma_{t} - \frac{\text{Price Difference}}{\frac{\partial C(S_{t},t)}{\partial \sigma}}, \tag{27}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">or its alternative form,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t+1} = \sigma_{t} - \frac{\text{Price Difference}}{S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}}. \tag{28}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     The significant issue with this approach should be clear to the reader now: the numerical stability of this algorithm depends heavily upon the accuracy of the price difference variable, which also depends on the accuracy of the Black-Scholes-Merton model. If the accuracy of the Black-Scholes-Merton model is quite poor, the price difference variable will never converge to zero, leading to $\sigma$ converging to negative infinity. To improve the accuracy of the Black-Scholes-Model, and so to avoid this computational dilemma, the composite Trapezoid rule was supplanted by a Gauss-Legendre Quadrature rule.<br/>     The Gauss Quadrature rule is named after German mathematician Carl Friedrich Gauss [<a href="https://en.wikipedia.org/wiki/Gaussian_quadrature" style='{{"color":"#95B9C7"}}'>10</a>], is a Riemann-based numerical integration schema where the partition points $x_{i}$ are the roots of an orthogonal polynomial specific to the chosen Gauss Quadrature rule. Suppose two Legendre polynomials, a Legendre polynomial of degree-$n$ denoted as $p_{n}(x)$ and another Legendre polynomial of degree-$m$ denoted as $p_{m}(x)$ (e.g. $n \neq m$). Consider a closed-interval $[a,b] \in \R$. Take into account the Sturm-Lious eigenvalue problem:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{d}{dx} \bigg( w_{1}(x)\frac{d p_{n}(x)}{dx} \bigg) + \lambda w_{2}(x) p_{n}(x) = 0. \tag{29}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=60106ecf-9a84-4b2b-82f3-876213cfa44a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">In Eq. (29) set the weight functions as $w_{1}(x)=1-x^{2}$ and $w_{2}(x)=1$, and the eigenvalue as $\lambda = n(n+1)$ to attain the Legendre differential equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) + n(n+1)p_{n}(x)=0. \tag{30}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     The Legendre polynomials $p_{n}(x)$ and $p_{m}(x)$ can be represented as Legendre differential equations, Eq. (30):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) + n(n+1)p_{n}(x)=0 \tag{31}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + m(m+1)p_{m}(x)=0. \tag{32}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Multiplying $p_{m}$ on both-sides of Eq. (31), and multiplying $p_{n}(x)$ on both-sides of Eq. (32):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) + n(n+1)p_{n}(x)p_{m}(x)=0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + m(m+1)p_{n}(x)p_{m}(x)=0.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Subtracting these resulting equation from each other:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) + n(n+1)p_{n}(x)p_{m}(x) - \bigg( p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + m(m+1)p_{n}(x)p_{m}(x) \bigg) =0-0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) + n(n+1)p_{n}(x)p_{m}(x) - p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) - m(m+1)p_{n}(x)p_{m}(x) =0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) - p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + n(n+1)p_{n}(x)p_{m}(x) - m(m+1)p_{n}(x)p_{m}(x) =0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$ \to p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) - p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + \big[ n(n+1) - m(m+1) \big] p_{n}(x)p_{m}(x) =0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) - p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + \big[ n(n+1) - m(m+1) \big] p_{n}(x)p_{m}(x) =0. \tag{33}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Apply integration-by-parts on Eq. (33) over the closed-interval $[a,b]$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) - p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) + \big[ n(n+1) - m(m+1) \big] p_{n}(x)p_{m}(x) \mathop{} dx = \int_{a}^{b} 0 \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \int_{a}^{b} p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) \mathop{} dx - \int_{a}^{b} p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) \mathop{} dx + \big[ n(n+1) - m(m+1) \big] \int_{a}^{b} p_{n}(x)p_{m}(x) \mathop{} dx = \int_{a}^{b} 0 \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">First integration-by-parts:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) \mathop{} dx = \bigg[ p_{m}(x)(1-x^{2})\frac{d p_{n}(x)}{dx} \bigg]_{a}^{b} - \int_{a}^{b} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{d p_{n}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The Legendre polynomials are normalized eigenfunctions that are the orthonormal basis to a specific Hilbert space $L^{2}\big([a,b], w(x) dx \big)$. The remainder term contains two normalized eigenfunctions with a weight function $w(x)=1-x^{2}$. A main result of Sturm-Liouville theory [<a href="https://en.wikipedia.org/wiki/Sturm%E2%80%93Liouville_theory" style='{{"color":"#95B9C7"}}'>11</a>], is that,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\langle y_{n}(x), y_{m}(x) \rangle = \int_{a}^{b} y_{n}(x) y_{m}(x) w(x) \mathop{} dx = \delta_{nm}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $y_{n}(x)$ and $y_{m}(x)$ are orthonormal eigenfunctions and $\delta_{n,m}$ is the Kronecker delta [<a href="https://en.wikipedia.org/wiki/Kronecker_delta" style='{{"color":"#95B9C7"}}'>12</a>], where </p>
<p style="text-align: justify;font-family: Times New Roman;">$$ \delta_{n,m} = \begin{cases} 0, &amp; \text{if} \; n \neq m, \\ 1, &amp; \text{if} \; n = m \end{cases}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And therefore, since $n \neq m$,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{p_{n}(x)}{dx} = 0.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Although the closed-interval is not constrained with this result, we need the product term also to become zero. To determine which boundaries result in the product term vanishing, we performed the following calculation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\big[ 1-x^{2} \big]_{a}^{b} = \big[ 1 - b^{2}\big] - \big[ 1 - a^{2}\big] = 1 - b^{2} - 1 + a^{2} = a^{2} - b^{2} = 0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$a^{2}-b^{2}=0 \to (a+b)(a-b)=0 \to b=-a,b=a.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The closed-interval has the set order of $b &gt; a$, therefore $b=a$ is an extraneous solution. The solution $b=-a$ means that the closed-interval must take the form $[a,-a]$ where $a \in \Z^{-}$. And therefore the closed-interval $[a,-a]$ must be symmetric for the product and remainder terms to become zero.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \bigg[ p_{m}(x)(1-x^{2})\frac{d p_{n}(x)}{dx} \bigg]_{a}^{b} - \int_{a}^{b} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{p_{n}(x)}{dx} = \bigg[ p_{m}(x)(1-x^{2})\frac{d p_{n}(x)}{dx} \bigg]_{a}^{-a} - \int_{a}^{-a} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{d p_{n}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \bigg[ p_{m}(x)(1-a^{2})\frac{d p_{n}(x)}{dx} \bigg] - \bigg[ p_{m}(x)(1-a^{2})\frac{d p_{n}(x)}{dx} \bigg] - \int_{a}^{-a} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{d p_{n}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= p_{m}(x)\frac{d p_{n}(x)}{dx} - a^{2}p_{m}(x)\frac{d p_{n}(x)}{dx} - p_{m}(x)\frac{d p_{n}(x)}{dx} + a^{2}p_{m}(x)\frac{d p_{n}(x)}{dx} - \int_{a}^{-a} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{d p_{n}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$ = - \int_{a}^{-a} (1-x^{2})\frac{d p_{m}(x)}{dx} \frac{d p_{n}(x)}{dx} \mathop{} dx = 0.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Second integration-by-parts:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) \mathop{} dx = \bigg[ p_{n}(x)(1-x^{2})\frac{d p_{m}(x)}{dx} \bigg]_{a}^{b} - \int_{a}^{b} (1-x^{2})\frac{d p_{n}(x)}{dx} \frac{d p_{m}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \bigg[ p_{n}(x)(1-x^{2})\frac{d p_{m}(x)}{dx} \bigg]_{a}^{-a} - \int_{a}^{-a} (1-x^{2})\frac{d p_{n}(x)}{dx} \frac{d p_{m}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= \bigg[ p_{n}(x)(1-a^{2})\frac{d p_{m}(x)}{dx} \bigg] - \bigg[ p_{n}(x)(1-a^{2})\frac{d p_{m}(x)}{dx} \bigg] - \int_{a}^{-a} (1-x^{2})\frac{d p_{n}(x)}{dx} \frac{d p_{m}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= p_{n}(x)\frac{d p_{m}(x)}{dx} - a^{2}p_{n}(x)\frac{d p_{m}(x)}{dx} - p_{n}(x)\frac{d p_{m}(x)}{dx} + a^{2}p_{n}(x)\frac{d p_{m}(x)}{dx} - \int_{a}^{-a} (1-x^{2})\frac{d p_{n}(x)}{dx} \frac{d p_{m}(x)}{dx} \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$= - \int_{a}^{-a} (1-x^{2})\frac{d p_{n}(x)}{dx} \frac{d p_{m}(x)}{dx} \mathop{} dx = 0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substituting these results into the original integration-by-parts yields:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \int_{a}^{-a} p_{m}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{n}(x)}{dx} \bigg) \mathop{} dx - \int_{a}^{-a} p_{n}(x)\frac{d}{dx}\bigg( (1-x^{2})\frac{d p_{m}(x)}{dx} \bigg) \mathop{} dx + \big[ n(n+1) - m(m+1) \big] \int_{a}^{-a} p_{n}(x)p_{m}(x) \mathop{} dx = \int_{a}^{-a} 0 \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to 0 - 0 + \big[ n(n+1) - m(m+1) \big] \int_{a}^{-a} p_{n}(x)p_{m}(x) \mathop{} dx = \int_{a}^{-a} 0 \mathop{} dx \to \big[ n(n+1) - m(m+1) \big] \int_{a}^{-a} p_{n}(x)p_{m}(x) \mathop{} dx = \int_{a}^{-a} 0 \mathop{} dx$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \big[ n(n+1) - m(m+1) \big] \int_{a}^{-a} p_{n}(x)p_{m}(x) \mathop{} dx = 0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     In essence the two Legendre polynomials $p_{n}(x)$ and $p_{m}(x)$ are orthogonal to one another over the symmetric closed-interval $[a,-a]$. The closed-interval $[a,-a]$ can be further restricted. Although Legendre polynomials of degree $n &lt; 3$ extend over the entire domain $\R$, those of degree $n \geq 3$ exhibit oscillations confined to the closed-interval of $[-2,2]$. And as $n$ increases further, such as, degree $n \geq 4$, the oscillations narrow within a closed-interval of [-1.1,1.1]. For simplicity and standardization, the symmetric closed-interval is reduced to [-1,1]. And for this reason the Gauss-Legendre Quadrature rule is a numerical integration schema for integrands over the domain of $[-1,1]$.<br/>     Recollect Riemann Integration and Eq. (16):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \sum_{i=0}^{n} f(x_{i}) \cdot h$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b-a}{n} \;\; \text{ and } \;\; x_{i} = a + i \cdot h.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The domain being Riemann integrated over is $[a,b]$ in Eq. (16) is wider than $[-1,1]$ domain ascribed to Gauss-Legendre Quadrature rule. To fix this discrepancy between the two closed-intervals, a linear transform can be generate to map between the two sets, e.g. $L: [-1,1] \to [a,b]$ where $L$ is the linear transform. Consider an arbitrary linear transform,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x=m\varepsilon + c, \tag{34}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $\varepsilon \in [-1,1]$ and $x \in [a,b]$. Use Eq. (34) to map $\varepsilon = -1$ to $x=a$ and $\varepsilon = 1$ to $x=b$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x=m\varepsilon + c \to a = m(-1)+c \to a = -m + c. \tag{35}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x=m\varepsilon + c \to b = m(1)+c \to b = m + c. \tag{36}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substract Eq. (35) from Eq. (36) and solve for $m$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} b-a = (m+c)-(-m+c) &amp; \to b-a = m + c + m - c \\ \to b-a = 2m &amp; \to m = \frac{b-a}{2} \end{align*}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Add Eq. (35) and Eq. (36) and solve for $c$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} a+b =(-m+c)+(m+c) &amp; \to a+b = -m + c + m + c \\ \to a+b = 2c &amp; \to c=\frac{a+b}{2}\end{align*}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And hence the linear transform $L$ from $\varepsilon \in [-1,1]$ to $x \in [a,b]$ is</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x=\frac{b-a}{2}\varepsilon + \frac{a+b}{2}. \tag{37}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Referring back to the Legendre polynomial of degree-$n$ denoted as $p_{n}(x)$, in a Gauss-Legendre Quadrature the rule, the partition points $x_{i}$ are the $n$ roots of $p_{n}(x)$. The Legendre polynomial weights $w_{i}$ determines the contribution of each partition point to the numerical approximation. From a geometric perspective, these weights $w_{i}$ represent the widths of the rectangles used in the numerical approximation. These weights $w_{i}$ are compute from the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{i}=\frac{2}{(1-x_{i}^{2})\big[ p_{n}^{'}(x_{i}) \big]^{2}}. \tag{38}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In essence the Gauss-Legendre Quadrature rule is a Riemann-based numerical integration, the numerical approximation is a weighted summation, similar to Riemann sum, where the integrand is approximated using weighted rectangles. Since the integral domain is $[-1,1]$ for Gauss-Legendre Quadrature rule, a change of variables needs to be performed on the integration problem :</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx = \int_{-1}^{1} f\bigg(\frac{b-a}{2}\varepsilon + \frac{a+b}{2}\bigg)  \mathop{} \frac{d x}{d \varepsilon} d\varepsilon.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The linear transform $L: x=\frac{b-a}{2}\varepsilon + \frac{a+b}{2}$ maps from $[-1,1]$ to $[a,b]$, and the Jacobian $\frac{d x}{d \varepsilon}$ captures the difference in scaling between the two closed-intervals [<a href="https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant" style='{{"color":"#95B9C7"}}'>13</a>]. To compute the Jacobian, a first-derivative is taken of the linear transform.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{d x}{d \varepsilon} = \frac{d}{d \varepsilon} \frac{b-a}{2}\varepsilon + \frac{a+b}{2} = \frac{d}{d \varepsilon} \frac{b-a}{2} \varepsilon + \frac{d}{d \varepsilon} \frac{a+b}{2} = \frac{b-a}{2} + 0 = \frac{b-a}{2}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substituting Jacobian back into the equation yeilds:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx =  \int_{-1}^{1} f\bigg(\frac{b-a}{2}\varepsilon + \frac{a+b}{2}\bigg)  \mathop{} \frac{b-a}{2} d\varepsilon. \tag{39}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Applying Riemann integration to Eq. (39) yields Eq. (40) which is the formula for the Gauss-Legendre Quadrature rule for a real-value function $f(x)$ over a closed-interval $[a,b]$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx =  \int_{-1}^{1} f\bigg(\frac{b-a}{2}\varepsilon + \frac{a+b}{2}\bigg)  \mathop{} \frac{b-a}{2} d\varepsilon \approx \frac{b-a}{2} \sum_{i=1}^{n} f\bigg(\frac{b-a}{2}\varepsilon_{i} + \frac{a+b}{2}\bigg) \cdot w_{i}. \tag{40}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=39a82b55-741c-4e87-b89a-5cfe5f48c072">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     We chose to implement the 4-point Gauss-Legendre Quadrature rule. To generate the $4-degree$ Legendre polynomial the Rodrigues formula [<a href="https://en.wikipedia.org/wiki/Rodrigues%27_formula" style='{{"color":"#95B9C7"}}'>14</a>] was used. The Rodrigues formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{n}(x)=\frac{1}{2^{n}n!} \frac{d^{n}}{d x^{n}} (x^{2}-1)^{n}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">For a $4$-degree Legendre polynomial, set $n=4$ in the Rodrigues formula and compute.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} p_{4}(x) &amp;= \frac{1}{2^{4}4!} \frac{d^{4}}{d x^{4}} (x^{2}-1)^{4} = \frac{1}{2^{4}4!} \frac{d^{3}}{d x^{3}} \frac{d}{dx} (x^{2}-1)^{4} = \frac{1}{2^{4}4!} \frac{d^{3}}{d x^{3}} 4(x^{2}-1)^{3} \cdot 2x \\ &amp; = \frac{1}{2^{4}4!} \frac{d^{2}}{d x^{2}} \frac{d}{dx} 4(x^{2}-1)^{3} = \frac{1}{2^{4}4!} \frac{d^{2}}{d x^{2}} 4(x^{2}-1)^{3} \cdot 2 + 2x \cdot 12(x^{2}-1)^{2} \cdot 2x \\ &amp; = \frac{1}{2^{4}4!} \frac{d^{2}}{d x^{2}} 8(x^{2}-1)^{3} + 48x^{2}(x^{2}-1)^{2} = \frac{1}{2^{4}4!} \frac{d}{d x} \frac{d}{dx} 8(x^{2}-1)^{3} + 48x^{2}(x^{2}-1)^{2} \\ &amp; = \frac{1}{2^{4}4!} \frac{d}{d x} 24(x^{2}-1) \cdot 2x + 48x^{2} \cdot 2(x^{2}-1) \cdot 2x + (x^{2}-1)^{2} \cdot 96x \\ &amp; = \frac{1}{2^{4}4!} \frac{d}{d x} 48x(x^{2}-1)^{2}+192x^{3}(x^{2}-1)+96x(x^{2}-1)^{2} \\ &amp; = \frac{1}{2^{4}4!} \frac{d}{d x} 144x(x^{2}-1)^{2}+192x^{3}(x^{2}-1) \\ &amp; = \frac{1}{2^{4}4!} \bigg( 144x \cdot 2(x^{2}-1) \cdot 2x + (x^{2}-1)^{2} \cdot 144 + 192x^{3} \cdot 2x + (x^{2}-1) \cdot 576x^{2}  \bigg) \\ &amp; = \frac{1}{2^{4}4!} \bigg( 576x^{4} - 576x^{2} + 144x^{4} - 288x^{2} + 144 + 384x^{4} +576x^{4} - 576x^{2} \bigg) \\ &amp; = \frac{1}{2^{4}4!} \bigg( 1680x^{4}-1440x^{2}+144 \bigg) \\ &amp; = \frac{1}{384} \bigg( 1680x^{4} - 1440x^{2} + 144 \bigg) \\ &amp; = \frac{35}{8}x^{4} - \frac{15}{4}x^{2} + \frac{3}{8} \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the $4$-degree Legendre polynomial:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{4}(x) = \frac{35}{8}x^{4} - \frac{15}{4}x^{2} + \frac{3}{8}. \tag{41}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Now postulate an arbitrary $4$-degree polynomial over a domain $\R$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$g(x) = a_{4}x^{4} + a_{3}x^{3}+a_{2}x^{2}+a_{1}x+a_{0}, \tag{42}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $a_{i} \in \R$ are its coefficients. Setting Eq. (42) equal to Eq. (41):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{4}(x) = a_{4}x^{4} + a_{3}x^{3}+a_{2}x^{2}+a_{1}x+a_{0} = \frac{35}{8}x^{4} - \frac{15}{4}x^{2} + \frac{3}{8}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">We get that $a_{4}=\frac{35}{8}$, $a_{2} = -\frac{15}{4}$ and $a_{0} = \frac{3}{8}$, and that $a_{3} = 0$ and $a_{1}=0$. The result is that the $4$-degree Legendre polynomial is a Biquadratic polynomial equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{4}(x) = a_{4}x^{4} + a_{2}x^{2} + a_{0} = \frac{35}{8}x^{4} - \frac{15}{4}x^{2} + \frac{3}{8}. \tag{43}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To the computation to solve for the roots of Eq. (43), we divided $8$ on both-sides of the equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{4}(x) = 35x^{4} - 30x^{2} + 3 = 0$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To reduce the power, let $z=x^{2}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$p_{4}(z) = a_{4}z^{2} + a_{2}z + a_{0} = 35z^{2} - 30z + 3 = 0. \tag{44}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Using Quadratic formula the roots of Eq. (44) can be found.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} z_{1,2} &amp; =\frac{-b \pm \sqrt{b^{2}-4ac}}{2a} = \frac{a_{2} \pm \sqrt{a_{2}^{2}-4a_{4}a_{0}}}{2a_{4}} = \frac{30 \pm \sqrt{(-30)^{2}-4(35)(3)}}{4(35)} \\ &amp; = \frac{30 \pm \sqrt{900-420}}{70} = \frac{30 \pm \sqrt{540}}{70} = \frac{30 \pm 20 \sqrt{\frac{6}{5}}}{70} \\ &amp; = \frac{30}{70} \pm \frac{20\sqrt{\frac{6}{5}}}{70} = \frac{3}{7} \pm \frac{2}{7} \sqrt{\frac{6}{5}}\end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To compute the roots of $4$-degree Legendre polynomial, Eq. (43), the roots of Eq. (44) need to be square rooted.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x_{1,2} = - \sqrt{\frac{3}{7} \pm  \frac{2}{7}\sqrt{\frac{6}{5}}} \to x_{1}=-\sqrt{\frac{3}{7}+\frac{2}{7}\sqrt{\frac{6}{5}}} \;\; \text{ and } \;\; x_{2} = -\sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x_{3,4} = \sqrt{\frac{3}{7} \pm \frac{2}{7}\sqrt{\frac{6}{5}}} \to x_{3} = \sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}} \;\; \text{ and } \;\; x_{4} = \sqrt{\frac{3}{7} + \frac{2}{7}\sqrt{\frac{6}{5}}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The $4$-degree Legendre polynomial weights $w_{i}$ are given by:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{i} = w(x_{i})=\frac{2}{(1-x_{i}^{2}) \big[ p_{4}^{'}(x_{i}) \big]}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To attain $p_{4}^{'}(x)$ compute the first-derivative of $p_{4}(x)$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} p_{4}^{'}(x) &amp; = \frac{d}{dx} \bigg( \frac{35}{8}x^{4} - \frac{15}{4}x^{2} + \frac{3}{8} \bigg) = \frac{d}{dx} \frac{35}{8}x^{4} - \frac{d}{dx} \frac{15}{4}x^{2} + \frac{d}{dx} \frac{3}{8} \\ &amp; = \frac{140}{8}x^{2} - \frac{30}{4}x + 0 =  \frac{35}{2}x_{i}^{3}-\frac{15}{2}x_{i} \to p_{4}^{'}(x) = \frac{35}{2}x_{i}^{3}-\frac{15}{2}x_{i}. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">With $p_{4}^{'}(x)$ computed, it can be substituted back into the $4$-degree Legendre polynomial weights formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{i} = w(x_{i}) = \frac{2}{(1-x_{i}^{2})\big[ p_{4}^{'}(x_{i}) \big]^{2}} = \frac{2}{(1-x_{i}^{2}) \big[ \frac{35}{2}x_{i}^{3}-\frac{15}{2}x_{i} \big]^{2}}. \tag{45}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Evaluating Eq. (44) with the Legendre polynomial roots $x_{1} = -\sqrt{\frac{3}{7}+\frac{2}{7}\sqrt{\frac{6}{5}}}$ and $x_{4} = \sqrt{\frac{3}{7}+\frac{2}{7}\sqrt{\frac{6}{5}}}$ yields the first $4$-degree Legendre polynomial weight $w_{1}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{1} = w(x_{1}) = \frac{2}{(1-x_{1}^{2}) \big[ \frac{35}{2}x_{1}^{3}-\frac{15}{2}x_{1} \big]^{2}} = \frac{18-\sqrt{30}}{36} \;\; \text{ and } \;\; w_{1} =  w(x_{4}) = \frac{2}{(1-x_{4}^{2}) \big[ \frac{35}{2}x_{4}^{3}-\frac{15}{2}x_{4} \big]^{2}} = \frac{18-\sqrt{30}}{36}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Evaluating Eq. (44) with the Legendre polynomial roots $x_{2} = -\sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}}$ and $x_{3} = \sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}}$ yields the second $4$-degree Legendre polynomial weight $w_{2}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{2} = w(x_{2}) = \frac{2}{(1-x_{2}^{2}) \big[ \frac{35}{2}x_{2}^{3}-\frac{15}{2}x_{2} \big]^{2}} = \frac{18+\sqrt{30}}{36} \;\; \text{ and } \;\; w_{2} =  w(x_{3}) = \frac{2}{(1-x_{3}^{2}) \big[ \frac{35}{2}x_{3}^{3}-\frac{15}{2}x_{3} \big]^{2}} = \frac{18+\sqrt{30}}{36}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     Consider the integral domain $[a,b]$ for the integrand $f(x)$, and then postulate that $n$ partitions were made to it; the result would be,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\{ [x_{0},x_{1}], [x_{1},x_{2}], [x_{2},x_{3}], \ldots, [x_{n-2},x_{n-1}], [x_{n-1},x_{n}]\}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Each partition $[x_{i},x_{i+1}]$ can represent a sub-interval of the integral domain, e.g. $[x_{i},x_{i+1}] \subset [a,b]$. If the taken for such, the boundaries of the sub-interval $x_{i}$ and $x_{i+1}$ could be taken as $a$ and $b$. Instead of the linear transform $L: x = \frac{b-a}{2} \varepsilon + \frac{a+b}{2}$ using $a$ and $b$, it could use the sub-interval boundaries $x_{i}$ and $x_{i+1}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \int_{a}^{b} f(x) \mathop{} dx &amp; \approx \frac{x_{i+1}-x_{i}}{2} \sum_{i=1}^{n} \sum_{j=1}^{4} f \bigg(\frac{x_{i+1}-x_{i}}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j} \\ &amp; = \frac{h}{2} \sum_{i=1}^{n} \sum_{j=1}^{4} f \bigg(\frac{h}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j} \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the 4-point Gauss-Legendre Quadrature rule for numerical integration:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} \sum_{i=1}^{n} \sum_{j=1}^{4} f \bigg(\frac{h}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j}, \tag{46}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where the partition points are</p>
<p style="text-align: justify;font-family: Times New Roman;">$$x_{i} \in  \{ x_{1}, x_{2}, x_{3}, x_{4} \} = \Bigg\{ -\sqrt{\frac{3}{7}+\frac{2}{7}\sqrt{\frac{6}{5}}}, \; -\sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}}, \; \sqrt{\frac{3}{7}-\frac{2}{7}\sqrt{\frac{6}{5}}}, \; \sqrt{\frac{3}{7}+\frac{2}{7}\sqrt{\frac{6}{5}}} \; \Bigg\}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and the width of the rectangles are</p>
<p style="text-align: justify;font-family: Times New Roman;">$$w_{i} \in \{ w_{1}, w_{2}, w_{2}, w_{1} \} = \Bigg\{ \frac{18-\sqrt{30}}{36}, \; \frac{18+\sqrt{30}}{36}, \; \frac{18+\sqrt{30}}{36}, \; \frac{18-\sqrt{30}}{36} \; \Bigg\}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     let's implement the 4-point Gauss-Legendre Quadrature rule to approximate $\mathcal{N}(d_{1})$. Suppose a closed-interval $[a,b]=[-5.0,0.4]$, with $n+1$ partitions. Consider $n=10$, then the partitions of the closed-interval is $\{[x_{0},x_{1}], [x_{1},x_{2}], [x_{2},x_{3}], [x_{3},x_{4}], [x_{4},x_{5}], [x_{5},x_{6}], [x_{6},x_{7}], [x_{7},x_{8}], [x_{8},x_{9}], [x_{9},x_{10}]\}$. Computing the partition width,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b - a}{n} = \frac{0.4 - -5.0}{10} = 0.54.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Computing partition values, $\{ x_{i} \in [a,b] | x_{i} = a + h \cdot i, i \in \{0,1,2,\ldots,n-1, n+1\}\}$ yields $\{-5.0, -4.46, -3.92, -3.38, -2.84, -2.30, -1.76, -1.22, -0.68, -0.14, 0.40\}$. Using the partition values the partitions/sub-intervals can be constructed:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\{[-5.0,-4.46], [-4.46,-3.92], [-3.92,-3.38], [-3.38,-2.84], [-2.84,-2.30], [-2.30,-1.76], [-1.76,-1.22], [-1.22,-0.68], [-0.68,-0.14], [-0.14,0.40]\}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Using Eq. (46), we computed the approximation to $\mathcal{N}(d_{1})$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\int_{a}^{b} f(x) \mathop{} dx \approx \frac{h}{2} \sum_{i=1}^{n} \sum_{j=1}^{4} f \bigg(\frac{h}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Expanding the summation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} &amp; = \frac{h}{2} \bigg( f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{0}+x_{1}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{0}+x_{1}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{0}+x_{1}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{0}+x_{1}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{1}+x_{2}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{1}+x_{2}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{1}+x_{2}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{1}+x_{2}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{2}+x_{3}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{2}+x_{3}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{2}+x_{3}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{2}+x_{3}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{3}+x_{4}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{3}+x_{4}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{3}+x_{4}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{3}+x_{4}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{4}+x_{5}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{4}+x_{5}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{4}+x_{5}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{4}+x_{5}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{5}+x_{6}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{5}+x_{6}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{5}+x_{6}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{5}+x_{6}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{6}+x_{7}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{6}+x_{7}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{6}+x_{7}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{6}+x_{7}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{7}+x_{8}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{7}+x_{8}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{7}+x_{8}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{7}+x_{8}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{8}+x_{9}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{8}+x_{9}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{8}+x_{9}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{8}+x_{9}}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{h}{2}\varepsilon_{1} + \frac{x_{9}+x_{10}}{2}\bigg) \cdot w_{1} + f \bigg(\frac{h}{2}\varepsilon_{2} + \frac{x_{9}+x_{10}}{2}\bigg) \cdot w_{2} + f \bigg(\frac{h}{2}\varepsilon_{3} + \frac{x_{9}+x_{10}}{2}\bigg) \cdot w_{3} + f \bigg(\frac{h}{2}\varepsilon_{4} + \frac{x_{9}+x_{10}}{2}\bigg) \cdot w_{4} \bigg) \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substituting the numerical values for $x_{i}$ and $h=0.54$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} &amp; = \frac{0.54}{2} \bigg( f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-5.0+-4.46}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-5.0+-4.46}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-5.0+-4.46}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-5.0+-4.46}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-4.46+-3.92}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-4.46+-3.92}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-4.46+-3.92}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-4.46+-3.92}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-3.92+-3.38}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-3.92+-3.38}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-3.92+-3.38}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-3.92+-3.38}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-3.38+-2.84}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-3.38+-2.84}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-3.38+-2.84}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-3.38+-2.84}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-2.84+-2.30}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-2.84+-2.30}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-2.84+-2.30}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-2.84+-2.30}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-2.30+-1.76}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-2.30+-1.76}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-2.30+-1.76}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-2.30+-1.76}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-1.76+-1.22}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-1.76+-1.22}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-1.76+-1.22}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-1.76+-1.22}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-1.22+-0.68}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-1.22+-0.68}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-1.22+-0.68}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-1.22+-0.68}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-0.68+-0.14}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-0.68+-0.14}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-0.68+-0.14}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-0.68+-0.14}{2}\bigg) \cdot w_{4} \\ &amp; + f \bigg(\frac{0.54}{2}\varepsilon_{1} + \frac{-0.14+0.40}{2}\bigg) \cdot w_{1} + f \bigg(\frac{0.54}{2}\varepsilon_{2} + \frac{-0.14+0.40}{2}\bigg) \cdot w_{2} + f \bigg(\frac{0.54}{2}\varepsilon_{3} + \frac{-0.14+0.40}{2}\bigg) \cdot w_{3} + f \bigg(\frac{0.54}{2}\varepsilon_{4} + \frac{-0.14+0.40}{2}\bigg) \cdot w_{4} \bigg) \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Evaluating $f \bigg(\frac{h}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j}$ and simplifying:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} &amp; = \frac{0.54}{2} \bigg( 0.0000023261 + 0.0000006234 + 0.0000055434 + 0.0000056231  \\ &amp; + 0.0000271724 + 0.0000078563 + 0.0000586414 + 0.0000551318 \\ &amp; + 0.0002371207 + 0.0000739710 + 0.0004634378 + 0.0004038212 \\ &amp; + 0.0015458647 + 0.0005203107 + 0.0027361384 + 0.0022097142 \\ &amp; + 0.0075289278 + 0.0027341608 +  0.0120682535 + 0.0090332257 \\ &amp; + 0.0273939414 + 0.0107335916 + 0.0397658735 + 0.0275873091 \\ &amp; + 0.0744621625 + 0.0314793540 + 0.0978895554 + 0.0629412769 \\ &amp; + 0.1512086009 + 0.0689709621 + 0.1800204799 + 0.1072806722 \\ &amp; + 0.2293913696 + 0.1128928627 + 0.2473245361 + 0.1366051750 \\ &amp; + 0.2599784696 + 0.1380468231 + 0.2538471081 + 0.1299488818 \bigg) \\ &amp; = \frac{0.54}{2} \bigg( 2.4274868700 \bigg) \\ &amp; = 0.6554214549 \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) \approx 0.6554214549.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     Recall that the true value of $\mathcal{N}(d_{1})$ is $0.6554217416$, and the 4-point Gauss-Legendre Quadrature rule approximated 0.6554214549. This approximatioon is much closer to the exact value than Riemann integration and composite Trapezoid rule, the convergence rate is much quicker than either numerical integration schema, and for this reason it was chosen. For better visualization, the following diagram illustrates the geometric perspective of the 4-point Gauss-Legendre Quadrature rule.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=16314472-7a7c-499f-a411-678b2738f680">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="Numerical Integration by 4-point Gauss-Legendre Quadrature rule" height="600" src="Numerical_Integration_by_Gauss_Legendre_Quadrature_Rule.PNG" width="550"/>
<figcaption>Figure 4 - Numerical Integration with 4-point Gauss-Legendre Quadrature rule.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=fa943d09-bccc-427e-85c8-b23e7a59af18">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Since the set order of the closed-interval $[a,b]$ did not change, and since integration also expects a set order of $b &gt; a$, a boolean condition was implemented to check if $a$ and $b$ complies with the set order. If the set order is found to be violated, the <code>Gauss_Legendre_Quadrature</code> function returns $0.0$ and two error messages. A second conditional was implemented to check on the number of partitions: the number of partition $n$ must be equal to or greater than $1$, otherwise the algorithm would break. The $n+1$ partition points were generated with the <code>linspace(a,b, n+1)</code> function. The sub-interval width $h$ is computed as follows:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$h = \frac{b-a}{2}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">A <code>sum</code> variable was initiated to store the approximation. A vector named <code>Legendre_roots</code> was initiated to store the Legendre polynomial roots from Eq. (46). Another vectored named <code>Legendre_weights</code> was initiated to store the Legendre polynomial weights from Eq. (46). To compute the 4-point Gauss-Legendre Quadrature rule formula in Eq. (46), a nested <code>for</code> loop was employed. The external <code>for</code> loop iterated over the sub-interval boundaries $x_{i}$ and $x_{i+1}$, and the internal <code>for</code> loop iterated Legendre polynomial roots and weights, evaluating the roots within $f \bigg(\frac{h}{2}\varepsilon_{j} + \frac{x_{i}+x_{i+1}}{2}\bigg) \cdot w_{j}$ and multiplying the associated weight. The <code>sum</code> variable is multiplied by the Jacobian $\frac{h}{2.0}$ and then returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=77c1ddb9-2644-4552-9545-a26ca4c1499f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [36]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">Gauss_Legendre_Quadrature</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>: <span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">b</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">n</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span>
<span class="nc">where</span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error: b &lt; a. Gauss Legendre Quadrature failed."</span><span class="p">);</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"a = {}, b = {}"</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error: The partition size must be greater than 1.</span><span class="se">\n</span><span class="s">Partition size set to 10."</span><span class="p">);</span>
<span class="w">        </span><span class="mi">10</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">n</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">xvals</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linspace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">h</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sum</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Legendre_roots</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span>
<span class="w">        </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">((</span><span class="mf">3.0</span><span class="o">-</span><span class="mf">4.0</span><span class="o">*</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">/</span><span class="mf">7.0</span><span class="p">).</span><span class="n">sqrt</span><span class="p">(),</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">((</span><span class="mf">3.0</span><span class="o">+</span><span class="mf">4.0</span><span class="o">*</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">/</span><span class="mf">7.0</span><span class="p">).</span><span class="n">sqrt</span><span class="p">(),</span>
<span class="w">        </span><span class="p">((</span><span class="mf">3.0</span><span class="o">-</span><span class="mf">4.0</span><span class="o">*</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">/</span><span class="mf">7.0</span><span class="p">).</span><span class="n">sqrt</span><span class="p">(),</span><span class="w"> </span><span class="p">((</span><span class="mf">3.0</span><span class="o">+</span><span class="mf">4.0</span><span class="o">*</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">/</span><span class="mf">7.0</span><span class="p">).</span><span class="n">sqrt</span><span class="p">()</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Legendre_weights</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span>
<span class="w">        </span><span class="p">(</span><span class="mf">18.0</span><span class="o">+</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">30.0</span><span class="p">))</span><span class="o">/</span><span class="mf">36.0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">18.0</span><span class="o">-</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">30.0</span><span class="p">))</span><span class="o">/</span><span class="mf">36.0</span><span class="p">,</span>
<span class="w">        </span><span class="p">(</span><span class="mf">18.0</span><span class="o">+</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">30.0</span><span class="p">))</span><span class="o">/</span><span class="mf">36.0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">18.0</span><span class="o">-</span><span class="kt">f64</span>::<span class="n">sqrt</span><span class="p">(</span><span class="mf">30.0</span><span class="p">))</span><span class="o">/</span><span class="mf">36.0</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">xvals</span><span class="p">.</span><span class="n">windows</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">Legendre_roots</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">zip</span><span class="p">(</span><span class="n">Legendre_weights</span><span class="p">.</span><span class="n">iter</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">weight</span><span class="o">*</span><span class="n">f</span><span class="p">(((</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">*</span><span class="n">root</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w">       </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">*</span><span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=6f10b61a-6cf2-4652-8ebb-3e2dbcad4f1c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     With that completed, we arrived to the actual implementation of the Black-Scholes-Merton model found in Eq. (15), Eq. (16) and Eq. (17). Eq. (16) was first to be implemented, it was named <code>d_1()</code>. Eq. (17) was implemented second and it was named <code>d_2()</code>. With Eq. (16) and Eq. (17) implemented, Eq. (15) the call option pricing model could be implemented. Recollect Eq. (16):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d_{1} = \frac{\ln\bigg( \frac{S_{t}}{K} \bigg) + \bigg(r+\frac{1}{2}\sigma^{2} \bigg) (T-t)}{\sigma\sqrt{T-t}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">If $T \leq 0$ or $\sigma \leq 0$ than Eq. (16) would become undefined. And since  $T \leq 0$ or $\sigma \leq 0$ results in an undefined $d_{1}$ value, the <code>BSM_Call_Opt</code> function returns $0.0$ in either case. The standard Gaussian cumulative density function can be represent as the standard Gaussian probability density function:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(x) = \int_{-\infty}^{x} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}t^{2}} \mathop{} dt. \tag{47}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To represent the standard Gaussian probability density function that is Eq. (47), a Rust closure [<a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html" style='{{"color":"#95B9C7"}}'>15</a>] was used and named <code>Gcdf</code>. The integral domain is $(-\infty,x]$ where $x$ can be either $d_{1}$ or $d_{2}$. Although $-\infty$ is a uniquely defined value in IEEE 754 standard for Floating-Point arithmetic [<a href="https://en.wikipedia.org/wiki/IEEE_754" style='{{"color":"#95B9C7"}}'>16</a>], it is not a numerical value itself, instead it is only a stand-in representation for the numerical value. To get around this fact, the lower boundary $a$ was set to be equal to $-1e5$. For the partition mesh to be fine enough and for the approximation computes through the 4-point Gauss-Legendre Quadrature rule be accurate enough, the number of partitions $n$ was set to be equal to $100,000$. In Eq. (15) there are two cumulative probabilities:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) = \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t} \;\; \text{ and } \;\; \mathcal{N}(d_{2}) = \int_{-\infty}^{d_{2}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To approximate these cumulative probabilities a 4-point Gauss-Legendre Quadrature rule was implemented and utilized through the <code>Gauss_Legendre_Quadrature</code> function. Lastly Eq. (15) itself was computed, and than the resulting numerical value was returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=36b9bd31-f5e9-48b8-a7b5-6529c990a9c7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [38]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">d_1</span><span class="p">(</span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">S</span><span class="o">/</span><span class="n">K</span><span class="p">).</span><span class="n">ln</span><span class="p">()</span><span class="o">+</span><span class="p">(</span><span class="n">r</span><span class="o">+</span><span class="mf">0.5</span><span class="o">*</span><span class="n">sigma</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">T</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="o">/</span><span class="p">(</span><span class="n">sigma</span><span class="o">*</span><span class="n">T</span><span class="p">.</span><span class="n">sqrt</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">d_2</span><span class="p">(</span><span class="n">d1</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">d1</span><span class="o">-</span><span class="n">sigma</span><span class="o">*</span><span class="n">T</span><span class="p">.</span><span class="n">sqrt</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">BSM_Call_Opt</span><span class="p">(</span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">sigma</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Gcdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span>: <span class="kt">f64</span><span class="o">|</span><span class="w"> </span><span class="mf">1.0</span><span class="o">/</span><span class="p">((</span><span class="mf">2.0</span><span class="o">*</span><span class="n">std</span>::<span class="kt">f64</span>::<span class="n">consts</span>::<span class="n">PI</span><span class="p">).</span><span class="n">sqrt</span><span class="p">())</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="n">x</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">exp</span><span class="p">();</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">a</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1e5</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">n</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">100000</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">d1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">d_1</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">d2</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">d_2</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">prob1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Gauss_Legendre_Quadrature</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">d1</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">prob2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Gauss_Legendre_Quadrature</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">d2</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">S</span><span class="o">*</span><span class="n">prob1</span><span class="o">-</span><span class="n">K</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">r</span><span class="o">*</span><span class="n">T</span><span class="p">).</span><span class="n">exp</span><span class="p">()</span><span class="o">*</span><span class="n">prob2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=0a42420e-7af5-46d8-94b0-2a1805592bea">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The construction of the Delta Hedge position, where $\Delta = \frac{\partial V(S_{t},t)}{\partial S_{t}}$ of the underlying equity security is held in the portfolio, is what that eliminates the stochastic component in Eq. (10) resulting in Eq. (11),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d\Pi = \Bigg( \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} + \frac{V(S_{t},t)}{\partial t} \Bigg) \mathop{} dt.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And thus the Black-Scholes partial differential equation in Eq. (13),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial V(S_{t},t)}{\partial t} + rS_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2} \sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} -rV(S_{t},t) = 0.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">With a closed-form solution to Eq. (13),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$C(S_{t},t) = S_{t}\mathcal{N}(d_{1})-Ke^{-r(T-t)}\mathcal{N}(d_{2}),$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d_{1} = \frac{\ln\bigg( \frac{S_{t}}{K} \bigg) + \bigg(r+\frac{1}{2}\sigma^{2} \bigg) (T-t)}{\sigma\sqrt{T-t}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and</p>
<p style="text-align: justify;font-family: Times New Roman;">$$d_{2} = d_{1} - \sigma \sqrt{T-t};$$</p>
<p style="text-align: justify;font-family: Times New Roman;">a closed-form solution can for $\Delta = \frac{\partial V(S_{t},t)}{\partial S_{t}}$ can be derived.<br/>     To begin, take the partial derivative of $d_{1}$ with respect to $S_{t}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \frac{\partial d_{1}}{\partial S_{t}} &amp; = \frac{\partial }{\partial S_{t}} \Bigg( \frac{\ln\big( \frac{S_{t}}{K} \big) + \big(r+\frac{1}{2}\sigma^{2} \big) (T-t)}{\sigma\sqrt{T-t}} \Bigg) = \frac{\partial }{\partial S_{t}} \Bigg( \frac{\ln \big( \frac{S_{t}}{K} \big)}{\sigma \sqrt{T-t}} + \frac{\big( r + \frac{1}{2}\sigma^{2} \big)(T-t)}{\sigma \sqrt{T-t}} \Bigg) \\ &amp; = \frac{\partial }{\partial S_{t}} \frac{\ln \big( \frac{S_{t}}{k} \big)}{\sigma \sqrt{T-t}} + \frac{\partial }{\partial S_{t}} \frac{\big( r + \frac{1}{2}\sigma^{2} \big) (T-t)}{\sigma \sqrt{T-t}} = \frac{1}{\sigma \sqrt{T-t}} \frac{K}{S_{t}} \frac{\partial }{\partial S_{t}} \frac{S_{t}}{K} + 0 \\ &amp; = \frac{1}{\sigma \sqrt{T-t}} \frac{K}{S_{t}} \frac{1}{K} = \frac{1}{\sigma \sqrt{T-t}} \frac{1}{S_{t}} =  \frac{1}{S_{t}\sigma \sqrt{T-t}} \to  \color{#c70e0e}{\frac{\partial d_{1}}{\partial S_{t}} = \frac{1}{S_{t}\sigma\sqrt{T-t}}}. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Take the partial diverative of $d_{2}$ with respect to $S_{t}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \frac{\partial d_{2}}{\partial S_{t}} &amp; = \frac{\partial }{\partial S_{t}} \Bigg( d_{1} - \sigma \sqrt{T-t} \Bigg) = \frac{\partial d_{1}}{\partial S_{t}} - \frac{\partial }{\partial S_{t}} \sigma \sqrt{T-t} \\  &amp; = \frac{1}{S_{t} \sigma \sqrt{T-t}} - 0 = \frac{1}{S_{t} \sigma \sqrt{T-t}} \to \color{#c70e0e}{\frac{\partial d_{2}}{\partial S_{t}} = \frac{1}{S_{t} \sigma \sqrt{T-t}}}  \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result was $\frac{\partial d_{1}}{\partial S_{t}}=\frac{\partial d_{2}}{\partial S_{t}} = \frac{1}{S_{t} \sigma \sqrt{T-t}}$. With these partial diveratives computed, we are able to proceed with the computation of $\frac{\partial C(S_{t},t)}{\partial S_{t}}$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \frac{\partial C(S_{t},t)}{\partial S_{t}} &amp; =  \frac{\partial }{\partial S_{t}} \bigg( S_{t}\mathcal{N}(d_{1}) - Ke^{-r(T-t)} \mathcal{N}(d_{2}) \bigg) = \frac{\partial }{\partial S_{t}} S_{t} \mathcal{N}(d_{1}) - \frac{\partial }{\partial S_{t}} Ke^{-r(T-t)} \mathcal{N}(d_{2}) \\ &amp; = \frac{\partial S_{t}}{\partial S_{t}} \mathcal{N}(d_{1}) - S_{t} \frac{\partial }{\partial S_{t}} \mathcal{N}(d_{1}) - Ke^{-r(T-t)} \frac{\partial }{\partial S_{t}} \mathcal{N}(d_{2}) \\ &amp; = \frac{\partial S_{t}}{\partial S_{t}} \mathcal{N}(d_{1}) + S_{t} \frac{\partial }{\partial S_{t}} \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} d S_{t} - Ke^{-r(T-t)} \frac{\partial }{\partial S_{t}} \int_{-\infty}^{d_{2}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} d S_{t} \\ &amp; = \mathcal{N}(d_{1}) + S \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{1}^{2}} \cdot \frac{\partial d_{1}}{\partial S_{t}} - ke^{-r(T-t)} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{2}^{2}} \cdot \frac{\partial d_{2}}{\partial S_{t}} \\ &amp; = \mathcal{N}(d_{1}) + S_{t} \mathcal{N}^{'}(d_{1}) \cdot \frac{\partial d_{1}}{\partial S_{t}} - Ke^{-r(T-t)} \mathcal{N}(d_{2}) \cdot \frac{\partial d_{2}}{\partial S_{t}} \\ &amp; =  \mathcal{N}(d_{1}) + S_{t} \mathcal{N}^{'}(d_{1}) \cdot \frac{1}{S_{t} \sigma \sqrt{T-t}} - Ke^{-r(T-t)} \mathcal{N}(d_{2}) \cdot \frac{1}{S_{t} \sigma \sqrt{T-t}} \\ &amp; = \mathcal{N}(d_{1}) + \frac{\mathcal{N}^{'}(d_{1})}{\sigma \sqrt{T-t} } - \frac{Ke^{-r(T-t)}\mathcal{N}^{'}(d_{2})}{S_{t} \sigma \sqrt{T-t}} \\ &amp; = \mathcal{N}(d_{1}) + 0 \\ &amp; = \mathcal{N}(d_{1}) \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial C(S_{t},t)}{\partial S_{t}} = \mathcal{N}(d_{1}). \tag{48}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     To simulate the Delta Hedge position, $\frac{\partial C(S_{t},t)}{\partial S_{t}}$ we only need to approximate $\mathcal{N}(d_{1})$. Since Eq. (16) become undefined when $T \leq 0$, <code>Greek_delta</code> function return either $0.0$ when $S_{t} &lt; K$ or $1.0$ when $S_{t} &gt; K$. An variable named <code>d1</code> is initiated to store the return value from the <code>d_1</code> function. The integrand <code>f</code> is expected as an argument of <code>Greek_delta</code>, and is thus passed onto the <code>Gauss_Legendre_Quadrature</code> function. The lower boundary was set to be equal to $-1e4$ and the number of partitions to $n=10000$. The variable <code>d1</code> is also passed into the <code>Gauss_Legendre_Quadrature</code> function. The return value from the <code>Gauss_Legendre_Quadrature</code> function is returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=0ca8e59d-0f49-4fb9-b4c9-1bd07b6378f5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [40]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">Greek_delta</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>:<span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span>
<span class="nc">where</span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">K</span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">K</span><span class="w">  </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">d1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">d_1</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Gauss_Legendre_Quadrature</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1e4</span><span class="p">,</span><span class="w"> </span><span class="n">d1</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=118e3cfe-4f25-4dee-b12b-e601cf537f3d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The Call Greek Gamma measures the sensitivity to change of the Call Greek Delta with respect to a change in the underlying security equity's price. The Gamma is the second-partial diverative of $C(S_{t},t)$ with respect to $S_{t}$, e.g., $\Gamma = \frac{\partial^{2} C(S_{t},t)}{\partial S_{t}^{2}}$, it quantifies the convexity of the European call option's value and provides insight into how the Call Delta responds to market fluctuations, making it a critical metric for risk management and the Delta Hedging strategy.<br/>     To derive Gamma, take the second partial differentiation of $C(S_{t},t)$ with respect to $S_{t}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \frac{\partial^{2} C(S_{t},t)}{\partial S_{t}^{2}} &amp; = \frac{\partial }{\partial S_{t}} \frac{\partial C(S_{t},t)}{\partial S_{t}} = \frac{\partial }{\partial S_{t}} \mathcal{N}(d_{1}) = \frac{\partial }{\partial S_{t}} \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t} \\ &amp; = \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{1}^{2}} \cdot \frac{\partial d_{1}}{\partial S_{t}} =  \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}d_{1}^{2}} \cdot \frac{1}{S_{t} \sigma \sqrt{T-t}} \\ &amp; = \frac{\mathcal{N}(d_{1})}{S_{t} \sigma \sqrt{T-t}}. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial^{2} C(S_{t},t)}{\partial S_{t}^{2}} = \frac{\mathcal{N}(d_{1})}{S_{t} \sigma \sqrt{T-t}}. \tag{49}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     To simulate the Gamma, a conditional was implemented to check on the argument <code>T</code> (e.g. the time till maturation of the call option): if the variable <code>T</code> equals the <code>Greek_Gamma</code> function returns $0.0$, otherwise the it returns the numeric value for Gamma computed through Eq. (49).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=28fd60ce-9894-49dd-8f4c-beaef482a1c2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [42]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">Greek_Gamma</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>:<span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span>
<span class="nc">where</span><span class="w"> </span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">d1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">d_1</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">S</span><span class="o">*</span><span class="n">sigma</span><span class="o">*</span><span class="n">T</span><span class="p">.</span><span class="n">sqrt</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=96279319-cdc7-4813-9c64-10ed478d27e7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     And with the implementation of the Newton-Raphson method, the partial derivative $\frac{\partial C(S_{t},t)}{\partial \sigma}$ that we previously derived as $\frac{\partial C(S_{t},t)}{\partial \sigma} = S_{t} \mathcal{N}^{'}(d_{1}) \sqrt{T-t}$ needs to be implemented. Since this formulation relies upon Eq. (16), which possesses the restriction of where $T \geq 0$; a conditional checking for $T \leq 0$ was implemented which returns 0.0. This was followed with an inititation of a variable <code>d1</code> to store the $d1$ value, which is soon enough passed into the computation of the partial derivative $\frac{\partial C(S_{t},t)}{\partial \sigma}$, of whom value is returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=7d36baaa-ad6e-4d96-9b70-858adfac5944">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [44]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">Greek_Vega</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>:<span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> 
<span class="nc">where</span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">d1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">d_1</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">S</span><span class="o">*</span><span class="n">f</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">.</span><span class="n">sqrt</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e9f870d8-bf65-4f79-919d-afc5c9d5c263">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     With the implementation of the <code>Greek_Vega</code> function, we can extend the Newton-Raphson formulation that was derived in a previous section of this research article. The implementation follows an iterative numerical approach to approximate the implied volatility of a European call option. The <code>implied_volatility_call</code> function takes as input the actively traded option market price as <code>call_market_value</code>, the current price of the security equity as <code>S</code>, strike price as <code>K</code>, time till maturation as <code>T</code>, riskless interest rate as <code>r</code>, desired level of accuracy as <code>tol</code> and the maximum number of iteration as <code>n</code>. The following variables were initiated to store numerical values: <code>sigma_old</code>, <code>sigma_new</code>, <code>BSM_call_value</code>, <code>BSM_call_value_new</code>, <code>vega</code>, <code>price_difference</code> and <code>sigma_difference</code>. A closure function [<a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html" style='{{"color":"#95B9C7"}}'>15</a>] was created for the standard Gaussian normal density function,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$ = \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}x^{2}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     The iterative process is implemented with a <code>for</code> loop. At each iteration, the Black-Scholes-Merton model, represented by the <code>BSM_Call_Opt</code> function, which is used to compute the theoretical call option price, and the difference between this theoretical price and the observed market price is evaluated, and the valued stored in the <code>price_difference</code> variable. The partial derivative of $C(S_{t},t)$ with respect to $\sigma$, known as Vega, is computed using the <code>Greek_Vega</code> function, with its return value is scaled by $100$. The Newton-Raphson method in our case, Eq. (27) is used to compute compute the new implied volatility estimate, $\sigma_{i+1}$. The iteration continues until either the change in volatility or the price difference between the theoretical and market prices falls below a specific tolerance threshold. As previously discussed, to improve numerical accuracy and ensure stable convergence, a 4-point Gauss-Legendre Quadrature rule was employed instead of the composite Trapezoid rule in approximating the cumulative probability of the standard Gaussian cumulative density function. This approach to approximating the implied volatility ensures that the estimation is as close as possible to the market-implied expectation while minimzing the risk of divergence or numerical instability.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ad6b2e01-e9c6-4d3d-a85b-8207b53d1852">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [46]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">implied_volatility_call</span><span class="p">(</span><span class="n">call_market_value</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">S</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">K</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">vol</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">r</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">tol</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">max_iter</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sigma_old</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">vol</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sigma_new</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">BSM_call_value</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">BSM_call_value_new</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">vega</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">price_difference</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sigma_difference</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Gcdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span>: <span class="kt">f64</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">std</span>::<span class="kt">f64</span>::<span class="n">consts</span>::<span class="n">PI</span><span class="p">).</span><span class="n">sqrt</span><span class="p">())</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">x</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">exp</span><span class="p">();</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">max_iter</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BSM_call_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma_old</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">        </span><span class="n">vega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Greek_Vega</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma_old</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="o">*</span><span class="mf">100.0</span><span class="p">;</span>
<span class="w">        </span><span class="n">price_difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BSM_call_value</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">call_market_value</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Newton-Raphson method itself, which calculates implied volatility</span>
<span class="w">        </span><span class="n">sigma_new</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sigma_old</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">price_difference</span><span class="o">/</span><span class="n">vega</span><span class="p">;</span>

<span class="w">        </span><span class="n">BSM_call_value_new</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">sigma_new</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">        </span><span class="n">price_difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BSM_call_value_new</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">call_market_value</span><span class="p">;</span>
<span class="w">        </span><span class="n">sigma_difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sigma_old</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sigma_new</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sigma_difference</span><span class="p">).</span><span class="n">abs</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">tol</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">price_difference</span><span class="p">).</span><span class="n">abs</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">tol</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Newton's Method - Number of iterations: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">sigma_old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sigma_new</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sigma_new</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a7b0643e-4ac3-4fa5-b360-5e43514fa3ad">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     A fundamental assumption of the Black-Scholes-Merton model is that the underlying security equity can be modelled by a specific <i>stationary</i> stochastic differential equation, Eq. (2), with an analytical solution named a Geometric Brownian motion.<br/>     Recollect Eq.(2),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dS_{t} = \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t},$$</p>
<p style="text-align: justify;font-family: Times New Roman;">this is the <i>stationary</i> stochastic differential equation was used to model the price dynamics of an equity security (e.g. a stock). To numerically implement this approach to pricing dynamics, a stochastic solution must first be derived. Suppose $f(S_{t}) = \ln(S_{t})$, it is a real-valued continuous function on the domain $\Omega$, and its successive partial derivatives which are also continuous functions on $\Omega$. And therefore apply Ito's Chain Rule on $f(S_{t})=\ln(S_{t})$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$df(S_{t}) = \frac{\partial f(S_{t})}{\partial S_{t}} \cdot \frac{\partial S_{t}}{\partial t} + \frac{1}{2!} \cdot \frac{\partial^{2} f(S_{t})}{\partial S_{t}^{2}} \cdot \Bigg( \frac{\partial S_{t}}{\partial t} \Bigg)^{2} = f^{'}(S_{t}) \mathop{} dS_{t} + \frac{1}{2} f^{''}(S_{t}) \mathop{} dS_{t}^{2}. \tag{50}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And yet again, to derive $dS_{t}^{2}$, simply perform a square foil on Eq. (2).</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} dS_{t}^{2} &amp; = \bigg( \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t} \bigg)^{2} = \mu^{2} S_{t}^{2} \mathop{} dt^{2} + \mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \sigma^{2} S_{t}^{2} \mathop{} dW_{t}^{2} \\ &amp; = \mu^{2} S_{t}^{2} \mathop{} dt^{2} + 2\mu \sigma S_{t}^{2} \mathop{} dt dW_{t} + \sigma^{2} S_{t}^{2} \mathop{} dW_{t}^{2}. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Then apply Ito's Lemma: $dW_{t}^{2} \to dt$ as $dt \to 0$ and $dW_{t} \to \sqrt{dt}$, and so,</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mu^{2}S_{t}^{2} \mathop{} dt^{2} \to 0 \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$2\mu \sigma S_{t}^{2} \mathop{} dtdW_{t} \to 2\mu \sigma S_{t}^{2} \mathop{} dt^{3/2} \to 0 \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma^{2} S_{t}^{2} \mathop{} dW_{t}^{2} \to \sigma^{2} S_{t}^{2} \mathop{} dt \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and therefore, </p>
<p style="text-align: justify;font-family: Times New Roman;">$$dS_{t}^{2} \to \sigma^{2} S_{t}^{2} \mathop{} dt \;\; \text{ as } \;\; dt \to 0.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Substitute this result, Eq. (2), and the partial derivatives: $f^{'}(S_{t}) = \frac{1}{S_{t}}$ and $f^{''}(S_{t}) = -\frac{1}{S_{t}^{2}}$ into Eq. (50), and compute for a result.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} &amp; =f^{'}(S_{t}) \mathop{} dS_{t} + \frac{1}{2} f^{''}(S_{t}) \mathop{} dS_{t}^{2} = \frac{1}{S_{t}} \big( \mu S_{t} \mathop{} dt + \sigma S_{t} \mathop{} dW_{t} \big) + \frac{1}{2} \cdot - \frac{1}{S_{t}^{2}} \cdot \sigma^{2} S_{t}^{2} \mathop{} dt \\ &amp; = \mu \mathop{} dt + \sigma \mathop{} dW_{t} - \frac{1}{2} \sigma^{2} \mathop{} dt = \big( \mu - \frac{1}{2} \sigma^{2} \big) \mathop{} dt + \sigma \mathop{} dW_{t} \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$df(S_{t}) = \big( \mu - \frac{1}{2} \sigma^{2} \big) \mathop{} dt + \sigma \mathop{} dW_{t}. \tag{51}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Eq. (51) is a new stochastic differential equation, its solution can be attained through the Separation of Variables method.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$df(S_{t}) = \big( \mu - \frac{1}{2} \sigma^{2} \big) \mathop{} dt + \sigma \mathop{} dW_{t} \to \int df(S_{t}) = \int \big( \mu - \frac{1}{2} \sigma^{2} \big) \mathop{} dt + \sigma \mathop{} dW_{t}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \int df(S_{t}) = \int \big( \mu - \frac{1}{2} \sigma^{2} \big) \mathop{} dt + \int \sigma \mathop{} dW_{t} \to \ln(S_{t}) = \big( \mu - \frac{1}{2} \sigma^{2} \big) t + \sigma W_{t} + c.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">We will assume the constant $c=\ln(S_{0})$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\ln(S_{t}) = \big( \mu - \frac{1}{2} \sigma^{2} \big) t + \sigma W_{t} + \ln(S_{0}) \to e^{\ln(S_{t})} = e^{\big( \mu - \frac{1}{2} \sigma^{2} \big) t + \sigma W_{t} + \ln(S_{0})}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to e^{\ln(S_{t})} = e^{\ln(S_{0})} e^{\big( \mu - \frac{1}{2} \sigma^{2} \big) t + \sigma W_{t}} \to S_{t} = S_{0}e^{\big( \mu - \frac{1}{2} \sigma^{2} \big) + \sigma W_{t}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the analytical solution to the <i>stationary</i> stochastic differential equation, Eq. (2), the solution is the Geometric Brownian motion formula.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$S_{t} = S_{0}e^{\big( \mu - \frac{1}{2}\sigma^{2} \big)t + \sigma W_{t}}. \tag{52}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=0578190f-adaf-47c4-a1bd-e8160e271348">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Having derived the analytical solution, Eq. (52) to the <i>stationary</i> stochastic differential of Eq. (2), we now turn to its numerical implementation. The Geometric model is simulated by discretizing the continuous-time equation using an Euler-Maruyama discretization scheme. The numerical approach requires defining the time-step as $\Delta t$ and simulating a Wiener process, also known as a standard Brownian motion, $W_{t}$, which is approximated by drawing independent random samples from a normally distribution $\mathcal{N}(0, \Delta t)$. Given the current price of the underlying security equity is $S_{0}$, the simulated price path is iteratively computed as</p>
<p style="text-align: justify;font-family: Times New Roman;">$$S_{t+\Delta T} = S_{t}e^{\big( \mu -\frac{1}{2}\sigma^{2} \big) \Delta t + \sigma \sqrt{\Delta t} Z_{t}}, \tag{53}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $Z_{t} \thicksim \mathcal{N}(0,1)$ represent a standard normally distributed random variable. To generate a standard normally distributed random variable, we first must generate a continuous uniform random variable. To do so, we must employ the <code>rand</code> crate. Initiating a mutable variable named <code>rng</code> to store <code>rand::thread_rng()</code>. <code>thread_rng()</code> is a function from the rand crate that generates a local thread. This locally generated thread can be called upon with <code>rand</code> crate functions to generate pseudo-randomly sampled numbers. In our case, we implemented the <code>gen_range(min..max)</code> function to generate a <code>Vec&lt;f64&gt;</code> vector of continuous uniformly sampled numbers.<br/>     To efficiently generate a sequence of continuous uniformly distributed random samples, we utilized an exclusive range <code>(0..sample_size)</code> to generate a range of indices correspodnign to the desire vector length. Uitilizing the <code>.map()</code> function, we were able to recursively call <code>rng.gen_range(min..max)</code> to generate continuous uniformly distributed samples. The resulting values are than collected into a <code>Vec&lt;f64&gt;</code> vector using the <code>.collect()</code> function. The resulting <code>Vec&lt;f64&gt;</code> vector is returned.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=af0d38f9-5e68-4bf8-bdb1-a322b896b304">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [48]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">uniform_rv</span><span class="p">(</span><span class="n">min</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">max</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sample_size</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">rng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand</span>::<span class="n">thread_rng</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="n">sample_size</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="n">rng</span><span class="p">.</span><span class="n">gen_range</span><span class="p">(</span><span class="n">min</span><span class="o">..</span><span class="n">max</span><span class="p">)).</span><span class="n">collect</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b17f253e-a09b-4f07-9b1c-cfdc5b65f1b3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     With the capacity to generate continuous uniform random variables through our <code>uniform_rv</code> function, these continuous random variables can be transformed into standard Gaussian distributed random variables $\mathcal{N}(\mu = 0, \sigma^{2}=1)$ using the Marsalgia's polar method algorithm [<a href="https://en.wikipedia.org/wiki/Marsaglia_polar_method" style='{{"color":"#95B9C7"}}'>17</a>]. For the Marsalgia's polar method algorithm, consider two independent continuous uniform random variables $U_{1} \thicksim \mathcal{U}(0,1)$ and $U_{2} \thicksim \mathcal{U}(0,1)$, each with a length $n$. These uniform random variables are transformed into $W_{1}$ and $W_{2}$ as follows:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$W_{1} = 2 \cdot \mathcal{U}(0,1)-1 \;\; \text{ and } \;\; W_{2} = 2 \cdot \mathcal{U}(0,1)-1, \tag{54}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">which are continuous uniform random variables $W_{1}, W_{2} \thicksim \mathcal{U}(-1,1)$. Forming a Cartesian product $W_{1} \times W_{2} = \{ (x_{1}, x_{2}) | x_{1} \in W_{1}, x_{2} \in W_{2} \}$ generates a box domain centered at the origin. Within that box domain, we generate a unit circle $x_{1}^{2}+x_{2}^{2} = 1$ where $x_{1}, x_{2} \in \R$. If an ordered pair $(x_{1},x_{2})$ falls outside the unit circle it is rejected, otherwise the following Marsalgia polar method transform is applied to it:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$Y_{i} = x_{1}\sqrt{\frac{-2\ln(x_{1}^{2}+x_{2}^{2})}{x_{1}^{2}+x_{2}^{2}}}. \tag{55}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">transforming it into a independent standard normal random sample $y_{i}$. Mapping each element of the ordered pairs from the Cartesian product results in a standard normal random variable $Y$, where $y_{i} \in Y$. Since not all ordered pairs are accepted, the length of the uniform random variables $U_{1}$ and $U_{2}$ must be greater than $n$, and the algorithm that implemented this schema must be a acceptance-rejection pseudo-random number sampling implementation.<br/>     The <code>polar_method</code> function accepts a single argument, <code>n</code>, which specifies the desired size of the returned standard normal random variable. A <code>Vec&lt;f64&gt;</code> vector was created using <code>Vec::with_capacity(b)</code>, preallocating memory to store the <code>n</code> independent standard normal random samples efficiently. A variable <code>i</code> is generated and set equal to $0$ to keep track of the number of generated standard normal samples. A <code>while</code> loop was employed to recurively compute the Marsaglia polar method algorithm. At each iteration, two continuous uniform random samples were generated and stored into the variables <code>U1</code> and <code>U2</code>, and than used in Eq. (54) to compute the continuous uniform random samples <code>W1</code> and <code>W2</code>. The two variables <code>W1</code> and <code>W2</code> are both squared and summed to create variable <code>w</code>. To determine if this ordered pair (<code>W1</code>, <code>W2</code>) falls within the unit circle, the variable <code>w</code> is tested: if $w &lt; 1$, the Marsalgia polar method transform is applied, computing a standard normal random sample, and the variable <code>i</code> is incremented by one. Otherwise, the loop continues on to the next iteration. The algorithm continues until the variable <code>i</code> exceeds the <code>n</code>, which is the desired sample size. When this condition is met, the standard normal random variable is returned as a <code>Vec&lt;f64&gt;</code> vector.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=690fc50f-44b5-4ab8-adc5-6941b3caa8ae">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [50]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">polar_method</span><span class="p">(</span><span class="n">n</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">output</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">i</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">U1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">uniform_rv</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">U2</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">uniform_rv</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">W1</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">2.0</span><span class="o">*</span><span class="n">U1</span><span class="o">-</span><span class="mf">1.0</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">W2</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">2.0</span><span class="o">*</span><span class="n">U2</span><span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">W1</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">W2</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">w</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="mf">2.0</span><span class="o">*</span><span class="n">w</span><span class="p">.</span><span class="n">ln</span><span class="p">()</span><span class="o">/</span><span class="n">w</span><span class="p">).</span><span class="n">sqrt</span><span class="p">();</span>
<span class="w">            </span><span class="n">output</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">W1</span><span class="o">*</span><span class="n">factor</span><span class="p">);</span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=faf80c4c-d546-4e3a-bafb-5940cfa58ca3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The following Rust code is a more computationally efficient implementation of the Marsalgia's polar method. Instead of generating two local threads, a single local thread is generated. Rather than generating two continuous uniform random samples from $\mathcal{U}(0,1)$, and subsequentially transforming them into the desired sample form of $\mathcal{U}(-1,1)$, then proceeding on. Instead we could simply generate two continuous uniforms directly from $\mathcal{U}(-1,1)$; which reduces the number of floating-point operations needed this accomplish the continuous uniform sampling.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=14926dc5-a04c-43e5-b348-2c6a20f5f0fa">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [ ]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">polar_method</span><span class="p">(</span><span class="n">n</span>: <span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">rng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand</span>::<span class="n">thread_rng</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">output</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">i</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span>:<span class="kt">f64</span> <span class="nc">w1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rng</span><span class="p">.</span><span class="n">gen_range</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="mi">0</span><span class="o">..</span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span>:<span class="kt">f64</span> <span class="nc">w2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rng</span><span class="p">.</span><span class="n">gen_range</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="mi">0</span><span class="o">..</span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span>:<span class="kt">f64</span> <span class="nc">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w1</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">w2</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">factor</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="mf">2.0</span><span class="o">*</span><span class="n">w</span><span class="p">.</span><span class="n">ln</span><span class="p">()</span><span class="o">/</span><span class="n">w</span><span class="p">).</span><span class="n">sqrt</span><span class="p">();</span>
<span class="w">            </span><span class="n">output</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">w1</span><span class="o">*</span><span class="n">factor</span><span class="p">);</span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d89c2660-b0da-4ab5-accb-446a556e3780">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The <code>geometric_brownian_motion</code> function accepts three arguments: the current price of the security equity as <code>S_0</code>, the expected return of the security equity as <code>exp_return</code>, the volatility of the security equity as <code>vol</code> and the number of time-steps as <code>num_step</code>. A variable named <code>dt</code> was initialized as $1.0/252.0$, which is significant because each time-step represent a single trading day, and there are 252 trading days in any given year. The size of $dt$ is adjusted based on the number of days being simulated.<br/>     To store the current price of the security equity and the subsequent simulated prices, a variable <code>S_t</code> was initialized with <code>S_0</code>. Since the current price of the security equity was to be included in the geometric brownian motion (GBM) path, the argument <code>num_step - 1</code> (casted as <code>usize</code>) was passed into the <code>polar_method</code> function. The returned value is a <code>Vec&lt;f64&gt;</code> vector containing 99 standard normal random samples, stored in as a <code>Vec&lt;f64&gt;</code> variable named <code>norm_rv</code>.<br/>     Next, another <code>&lt;f64&gt;</code> vector named <code>gbm_path</code> was initialized using <code>Vec::with_capacity(num_step as usize)</code>, preallocating memory to efficiently store the GBM path. The initial security equity price <code>S_0</code> was than pushed into <code>gbm_path</code>. To generate the remaining GBM path, a <code>for</code> loop iterated over the elements of <code>norm_rv</code>, applying each to the Eular-Maruyama discretization schemed solution from Eq. (53). Each resulting GBM sample was pushed into <code>gbm_path</code>. The function ultimately returns a <code>Vec&lt;f64&gt;</code> vector containing the full GBM path, composed of 99 simulated prices plus the initial price of the security equity.   
</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=b1c0da5c-f289-4646-9faa-c8df61ac8286">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [56]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">geometric_brownian_motion</span><span class="p">(</span><span class="n">S_0</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">exp_return</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">vol</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">num_step</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="n">dt</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="o">/</span><span class="mf">252.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">S_t</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">S_0</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">norm_rv</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">polar_method</span><span class="p">(</span><span class="n">num_step</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">gbm_path</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">num_step</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">);</span><span class="w"> </span><span class="n">gbm_path</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">S_0</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">norm_rv</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">S_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S_t</span><span class="o">*</span><span class="p">((</span><span class="n">exp_return</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">vol</span><span class="p">)</span><span class="o">*</span><span class="n">dt</span><span class="o">+</span><span class="p">(</span><span class="n">vol</span><span class="p">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">dt</span><span class="p">.</span><span class="n">sqrt</span><span class="p">()))).</span><span class="n">exp</span><span class="p">();</span>
<span class="w">        </span><span class="n">gbm_path</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">S_t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">gbm_path</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=685f5bed-b2ad-4aab-bc1e-01af35120e4d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     To simulate the risk-free interest rate dynamics of the 52-week Treasury bill, we incorporated the Cox-Ingersol-Ross (CIR) model [<a href="https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf" style='{{"color":"#95B9C7"}}'>3</a>, <a href="https://en.wikipedia.org/wiki/Cox%E2%80%93Ingersoll%E2%80%93Ross_model" style='{{"color":"#95B9C7"}}'>4</a>] into our simulation. The CIR model is a short-rate model that describes the evolution of interest rates using a mean reverting <i>stationary</i> stochastic differential equation:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$dr_{t} = a(b-r_{t}) \mathop{} dt + \sigma \sqrt{r_{t}} \mathop{} dW_{t}. \tag{56}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">
where $a(b-r_{t})$ is the drift coefficient, and $\sigma \sqrt{r_{t}}$ is the volatility coefficient.<br/>
     To derive the stochastic solution to Eq. (56), consider the real-valued continuous function $f(r_{t}) = \ln(r_{t})$ on the domain $\Omega$, and its successive partial diveratives which are also continuous functions on $\Omega$. Apply Ito's Chain Rule on $f(r_{t}) = \ln(r_{t})$</p>
<p style="text-align: justify; font-family: Times New Roman;">$$df(r_{t}) = \frac{\partial f(r_{t})}{\partial r_{t}} \cdot \frac{\partial r_{t}}{\partial t} + \frac{1}{2!} \cdot \frac{\partial^{2} f(r_{t})}{\partial r_{t}^{2}} \cdot \Bigg( \frac{\partial r_{t}}{\partial t} \Bigg)^{2} = f^{'}(r_{t}) \mathop{} dr_{t} + \frac{1}{2}f^{''}(r_{t}) \mathop{} dr_{t}^{2}. \tag{57}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">To attain $dr_{t}^{2}$, compute foil square of Eq. (56).</p>
<p style="text-align: justify; font-family: Times New Roman;">$$\begin{align*} dr_{t}^{2} &amp; = \bigg( a(b-r_{t}) \mathop{} dt + \sigma \sqrt{r_{t}} \mathop{} dW_{t} \bigg)^{2} = a^{2}(b-r_{t})^{2} \mathop{} dt^{2} + (ab\sigma \sqrt{r_{t}} - a\sigma r_{t}^{3/2}) \mathop{} dtdW_{t} + (ab\sigma \sqrt{r_{t}} - a\sigma r_{t}^{3/2}) \mathop{} dtdW_{t} + \sigma^{2}r_{t} \mathop{} dW_{t}^{2} \\ &amp; = a^{2}(b-r_{t})^{2} \mathop{} dt^{2} + 2(ab\sigma \sqrt{r_{t}} - a\sigma r_{t}^{3/2}) \mathop{} dtdW_{t} + \sigma^{2}r_{t} \mathop{} dW_{t}^{2}. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Then apply Ito's Lemma: $dW_{t}^{2} \to dt$ as $dt \to 0$ and $dW_{t} \to \sqrt{dt}$, and so,</p>
<p style="text-align: justify; font-family: Times New Roman;">$$a^{2}(b-r_{t})^{2} \mathop{} dt^{2} \to 0 \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify; font-family: Times New Roman;">$$2(ab\sigma\sqrt{r_{t}} - a\sigma r_{t}^{3/2}) \mathop{} dtdW_{t} \to 2(ab\sigma\sqrt{r_{t}} - a\sigma r_{t}^{3/2}) \mathop{} dt^{3/2} \to 0 \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify; font-family: Times New Roman;">$$\sigma^{2} r_{t} \mathop{}  dW_{t}^{2} \to \sigma^{2} r_{t} \mathop{} dt \;\; \text{ as } \;\; dt \to 0,$$</p>
<p style="text-align: justify; font-family: Times New Roman;">and therefore,</p>
<p style="text-align: justify; font-family: Times New Roman;">$$dr_{t}^{2} \to \sigma^{2} r_{t} \mathop{} dt \;\; \text{ as } \;\; dt \to 0.$$</p>
<p style="text-align: justify; font-family: Times New Roman;">Substitute this result, Eq. (56) and the partial derivatives $f^{'}(r_{t}) = \frac{1}{r_{t}}$ and $f^{''}(r_{t}) = -\frac{1}{r_{t}^{2}}$ into Eq. (57), and compute for a result.</p>
<p style="text-align: justify; font-family: Times New Roman;">$$\begin{align*} &amp; = f^{'}(r_{t}) \mathop{} dr_{t} + \frac{1}{2}f^{''}(r_{t}) \mathop{} dr_{t}^{2} = \frac{1}{r_{t}} \cdot \bigg( a(b-r_{t}) \mathop{} dt + \sigma \sqrt{r_{t}} \mathop{} dW_{t} \bigg) + \frac{1}{2} \cdot -\frac{1}{r_{t}^{2}} \cdot \sigma^{2} r_{t} \mathop{} dt \\ &amp; = \frac{1}{r_{t}} a(b-r_{t}) \mathop{} dt + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} \mathop{} dW_{t} - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2} \mathop{} dt \\ &amp; = \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg) \mathop{} dt + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} \mathop{} dW_{t} \end{align*}$$</p>
<p style="text-align: justify; font-family: Times New Roman;">$$df(r_{t}) = \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg) \mathop{} dt + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} \mathop{} dW_{t}. \tag{58}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Eq. (58) is a new stochastic differential equation, its solution can be attained through the Separation of Variables method.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$df(r_{t}) = \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg) \mathop{} dt + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} \mathop{} dW_{t} \to \int df(r_{t}) = \int \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg) \mathop{} dt + \frac{1}{r_{t}} \sigma r_{t} \mathop{} dW_{t}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \int df(r_{t}) = \int \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg) \mathop{} dt + \int \frac{1}{r_{t}} \sigma \sqrt{r_{t}} \mathop{} dW_{t} \to \ln(r_{t}) = \bigg( \frac{1}{r_{t}} a(b-r_{t}) - \frac{1}{2}\frac{1}{r_{t}} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t} + c$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to \ln(r_{t}) = \frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t} + c$$</p>
<p style="text-align: justify;font-family: Times New Roman;">We will assume the constant $c=\ln(r_{0})$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\ln(r_{t}) = \frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t} + \ln(r_{0}) \to e^{\ln(r_{t})} = e^{\frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t} + \ln(r_{0})}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\to e^{\ln(r_{t})} = e^{\ln(r_{0})} e^{\frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t}} \to r_{t} = r_{0}e^{\frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t}}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the stochastic solution to the <i>stationary</i> stochastic differential equation, Eq. (56).</p>
<p style="text-align: justify;font-family: Times New Roman;">$$r_{t+1} = r_{t}e^{\frac{1}{r_{t}} \bigg( a(b-r_{t}) - \frac{1}{2} \sigma^{2}  \bigg)t + \frac{1}{r_{t}} \sigma \sqrt{r_{t}} W_{t}}. \tag{59}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">     Although we have attained the stochastic solution to Eq. (56), there is a more numerically stable solution. In this case the Euler-Maruyama discretized solution is more numerically stable than the stochastic solution Eq. (59). The Euler-Maruyama discretized solution is attain by Euler-Maruyama discretizing the stochastic differential equation itself, Eq. (56):</p>
<p style="text-align: justify;font-family: Times New Roman;">$$r_{t+\Delta t} = a(b-r_{t}) \Delta t + \sigma \sqrt{r_{t}} \sqrt{\Delta t} Z_{t}. \tag{60}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=4df87858-61b3-44e7-bf91-b78a0eb759f6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The <code>CIR_model</code> function accepts five arguments: the current interest rate of the 52-week treasury bill as <code>interest_rate</code>, the CIR model parameters as <code>a</code>, <code>b</code> and <code>sigma</code>, and the number of time-steps as <code>n</code>. The variable <code>r_t</code> was initialized as <code>interest_rate</code>, which is the current interest rate of the 52-week treasury bill. Another variable <code>dt</code> was initialized as $0.01$, for $\Delta t = 0.01$. A <code>Vec&lt;f64&gt;</code> vector named <code>cir_path</code> was created using <code>Vec::with_capacity(n)</code>, preallocating memory to efficiently store the CIR model path. Subsequently the current <code>r_t</code> was pushed into <code>cir_path</code>.<br/>     To generate the browian motion path, <code>n-1</code> (casted as usize) was passed into <code>polar_method</code>. A <code>Vec&lt;f64&gt;</code> vector is returned containing 99 standard normal random samples, which is stored with the <code>Vec&lt;f64&gt;</code> variable <code>norm_rv</code>.<br/>     To generate the rest of the CIR model path, a <code>for</code> loop was employed to iterate over the elements of <code>norm_rv</code>, applying each to the Euler-Maruyamma dicretized stochastic differential equation from Eq. (60). Each resulting CIR model sample was pushed into <code>cir_path</code>. The function ultimately returns a <code>Vec&lt;f64&gt;</code> vector containing the CIR model path.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ec3a4162-d187-4f66-a4fa-59c1c9394f13">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [58]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">CIR_model</span><span class="p">(</span><span class="n">interest_rate</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">b</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">n</span>:<span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">r_t</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">interest_rate</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">dt</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.01</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">cir_path</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"> </span><span class="n">cir_path</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">r_t</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">norm_rv</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">polar_method</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">norm_rv</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">drift</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">r_t</span><span class="p">);</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">diffusion</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">sigma</span><span class="o">*</span><span class="n">r_t</span><span class="p">.</span><span class="n">sqrt</span><span class="p">();</span>
<span class="w">        </span><span class="n">r_t</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">drift</span><span class="o">*</span><span class="n">dt</span><span class="o">+</span><span class="n">diffusion</span><span class="o">*</span><span class="n">dt</span><span class="p">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">*</span><span class="n">x</span><span class="p">;</span>
<span class="w">        </span><span class="n">cir_path</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">r_t</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">cir_path</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=cd9bc084-9e6c-4b02-973b-6dec094c8eee">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     We chose the Method of Moments estimation to approximate the CIR model parameters: $a$, $b$ and $\sigma$. Consider a dataset $\mathcal{D} = \{ r_{m}, r_{m-1}, r_{m-2}, \ldots, r_{2}, r_{1}, r_{0}  \}$, which consists of daily observations of 52-week treasury bill interest rates. The CIR model parameter $a$ can be computed using the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$a = - \frac{\ln(\text{Sample Autocovariance}/\text{Sample Variance})}{\Delta T}, \tag{61}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $\Delta t = 1$. The sample autocovariance is given by:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\text{Sample Autocovariance} = \frac{1}{m-1} \sum_{i=0}^{m} (r_{i+1}-\bar{r})(r_{i}-\bar{r}), \tag{62}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">where $\bar{r}$ is the sample mean of the dataset $\mathcal{D}$. The sample variance of the dataset $\mathcal{D}$, as defined in Eq. (15), is:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\text{Sample variance} = \frac{1}{m-1} \sum_{i=0}^{m} (r_{i}-\bar{r})^{2}. \tag{63}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">CIR model parameter $b$ is the sample mean of the dataset $\mathcal{D}$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$b = \frac{1}{m} \sum_{i=0}^{m} r_{i}. \tag{64}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The CIR model parameter $\sigma$ is given by:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma = \sqrt{\frac{2\cdot a \cdot \text{Sample variance}}{b}}. \tag{65}$$</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=84b01e1a-078f-4f3f-9e06-47f11b897288">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The <code>estimate_cir_parameters</code> function accepts a single argument: the dataset $\mathcal{D}$ as <code>historical_data</code>. A <code>Vec&lt;f64&gt;</code> vector named <code>cir_parameters</code> was created using <code>Vec::with_capacity(3)</code>, and another <code>Vec&lt;f64&gt;</code> vector named <code>temp_vec</code> was created using <code>Vec::with_capacity(historical_data.len())</code>.<br/>     Next the function computes the sample mean of <code>historical_data</code> using the <code>mean</code> function. Following with computation of the sample variance using the <code>var</code> function, with a match statement handling cases where there is insufficient data to compute a variance. If no variance can be determined, a warming message is printed, and a default value of $0.0$ is assigned.<br/>     To compute the sample autocovariance, a <code>for</code> loop iterates over consecutive pairs of elements from <code>historical_data</code> using <code>windows(2)</code>. Each consecutive pair is used to compute the deviation component: $(r_{i+1}-\bar{r})(r_{i}-\bar{r})$ from Eq. (63), these computed values are subsequently stored within <code>temp_vec</code>. The <code>temp_vec</code> is then passed into the <code>mean</code> function, that returns the sample autocovariance.<br/>     The speed at which the SDE from Eq. (56) reverts to the mean is determined by the parameter $a$. In either case, if the sample autocovariance or variance is a non-positive value, than a warming message is printed, and the parameter $a$ is set to $0.0$. Otherwise, the parameter $a$ is computed using the formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$a = - \frac{\ln(\verb|sample_autocovariance|/\verb|sample_variance|)}{1.0}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The computed parameter <code>a</code> is appended to <code>cir_parameters</code>.The parameter $b$ represents the steady-state level of Eq. (56), and therefore the interest rate dynamics. In the long-term the Eq. (56) will revert to this steady-state level. The parameter $b$ is just the sample mean of $\mathcal{D}$. The computed parameter <code>b</code> is also appended to <code>cir_parameters</code>. The volatility $\sigma$ is a scaling term to the standard brownian motion $\sqrt{\Delta t}Z_{t}$ Eq. (56). The parameter $\sigma$ is computed by the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma = \sqrt{\frac{2 \; \cdot \; \verb|cir_parameters[0]| \; \cdot \; \verb|sample_variance|}{\verb|cir_parameters[1]|}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The computed parameter <code>\sigma</code> is also appended to <code>cir_parameters</code>. Lastly <code>cir_parameters</code> is returned by the function.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=d09aa042-ff76-4211-ab10-50f4d2205857">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [60]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">estimate_cir_parameters</span><span class="p">(</span><span class="n">historical_data</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">cir_parameters</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">temp_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">historical_data</span><span class="p">.</span><span class="n">len</span><span class="p">());</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sample_mean</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">historical_data</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sample_variance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">var</span><span class="p">(</span><span class="n">historical_data</span><span class="p">.</span><span class="n">clone</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">variance</span><span class="p">,</span>
<span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Not enough data to calculate a variance."</span><span class="p">);</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="c1">// Provides a default value</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">historical_data</span><span class="p">.</span><span class="n">windows</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">temp_vec</span><span class="p">.</span><span class="n">push</span><span class="p">((</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">sample_mean</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">sample_mean</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sample_autocovariance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">temp_vec</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Estimate parameter (speed of mean reversion): a</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">sample_autocovariance</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">sample_variance</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Warning: Autocovariance or variance is non-positive. Setting to a small positive value."</span><span class="p">);</span>
<span class="w">        </span><span class="n">cir_parameters</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cir_parameters</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">sample_autocovariance</span><span class="o">/</span><span class="n">sample_variance</span><span class="p">).</span><span class="n">ln</span><span class="p">()</span><span class="o">/</span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Estimate parameter (long-term mean): b</span>
<span class="w">    </span><span class="n">cir_parameters</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">sample_mean</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Estimate parameter (volatility): sigma</span>
<span class="w">    </span><span class="n">cir_parameters</span><span class="p">.</span><span class="n">push</span><span class="p">((</span><span class="mf">2.0</span><span class="o">*</span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">sample_variance</span><span class="o">/</span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]).</span><span class="n">sqrt</span><span class="p">());</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=9e8c474f-8b04-48a3-9b9c-afa582d085df">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     As there was a need to round floating-point number, we decided to program a rounding function. The <code>round_num</code> function accepts two arguments: the <code>f64</code> floating-point numeric as <code>num</code> and the desired decimal place as <code>places</code>. Note that the <code>round_num</code> function can only round <code>f64</code> numeric values, it cannot round other numeric datatypes. Regardless, the <code>f64</code> variable <code>factor</code> is initialized with <code>10_f64.powi(places as i32)</code>, e.g. as the value $10^{\verb|places|}$. A faction is composed of its numerator $( \verb|num| \; \cdot \; \verb|factor| ).\verb|round()|$ that rounds to the nearest whole number, and its denominator that is the $\verb|factor|$ alone. The fraction resolves to the desired rounded numeric and is returned.<br/>     For example, consider a number $\verb|num| = 0.047846$. One desire to round the number to the third decimal place, e.g. $\verb|places| = 3$.</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} &amp; = \frac{( \verb|num| \; \cdot \; \verb|factor| ).\verb|round()|}{\verb|factor|} = \frac{(0.047846 \cdot 10.0^{3}).\verb|round()|}{10.0^{3}} = \frac{(0.047846 \cdot 1000.0).\verb|round()|}{1000.0} \\  &amp; = \frac{(47.846).\verb|round()|}{1000.0} = \frac{48.0}{1000.0} = 0.048. \end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And therefore, $\verb|round_num(num, places)| = 0.048$.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=bf993020-981d-4879-8fcd-046eb8929a0b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [54]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">round_num</span><span class="p">(</span><span class="n">num</span>:<span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">places</span>:<span class="kt">u32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10_</span><span class="k">f64</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="n">places</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">i32</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="o">*</span><span class="n">factor</span><span class="p">).</span><span class="n">round</span><span class="p">()</span><span class="o">/</span><span class="n">factor</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=de54182c-e3db-4bb4-95ea-5e26ce29e208">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The <code>display_hashmap</code> function takes a borrowed <code>HashMap</code> containing data and a borrowed string array representing column headers. It generates an HTML table displaying <code>HashMap</code> contents with specified headers and returns the HTML content as a <code>String</code>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=2109f10b-8f95-4d45-8033-eb5c1f392a59">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [62]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">display_hashmap</span><span class="p">(</span><span class="n">map</span>: <span class="kp">&amp;</span><span class="nc">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">headers_vec</span>: <span class="kp">&amp;</span><span class="p">[</span><span class="nb">String</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nb">String</span>
    <span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">row_count</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">row_max</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// row_max - 1, e.g. two row table is row_max = 3.</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">html_content</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="nb">String</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;table style='text-align: center; font-family: Times New Roman; font-size: 14px; border: 1px solid black; Padding: 5px;'&gt;"</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">headers_vec</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">row_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;tr&gt;"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">Some</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"&lt;td style='border-bottom: 1px solid black;'&gt;&lt;b&gt;{}:&lt;/b&gt;&lt;/td&gt;\</span>
<span class="s">                &lt;td style='border-bottom: 1px solid black; border-right: 1px solid;'&gt;{}&lt;/td&gt;"</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                       </span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"&lt;td style='border-bottom: 1px solid black;'&gt;&lt;b&gt;{}:&lt;/b&gt;&lt;/td&gt;\</span>
<span class="s">                    &lt;td style='border-bottom: 1px solid black; border-right: 1px solid black; color: red;'&gt;Value not found&lt;/td&gt;"</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                               </span><span class="n">header</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>
<span class="w">        </span><span class="n">row_count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">row_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">row_max</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;/tr&gt;"</span><span class="p">);</span>
<span class="w">            </span><span class="n">row_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;/table&gt;"</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Normally the function itself would print the html content, but for this simulation</span>
<span class="w">    </span><span class="c1">// this function will return the html_content.</span>
<span class="w">    </span><span class="c1">// println!("EVCXR_BEGIN_CONTENT text/html\n{}\nEVCXR_END_CONTENT", html_content);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">html_content</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=492d5fa8-05ac-4685-8e91-4f527632bcb8">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The <code>display_dataframe</code> function takes a Polars crate DataFrame as an argument and generates an HTML table displaying its contents. The function returns the html content as a <code>String</code>.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=9134bc26-6cd8-4ac0-b574-5433caf548c7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [64]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="k">fn</span> <span class="nf">display_dataframe</span><span class="p">(</span><span class="n">df</span>:<span class="kp">&amp;</span><span class="nc">DataFrame</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">index_present</span>:<span class="kt">bool</span> <span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">index_place</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">column_number</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">html_content</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="nb">String</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;br/&gt;&lt;br/&gt;&lt;table style='text-align: center; font-family: Times New Roman; font-size: 14px;'&gt;"</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Adds column headers</span>
<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;tr style='border-bottom: 1px solid gray;'&gt;"</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">column_header</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">df</span><span class="p">.</span><span class="n">get_column_names</span><span class="p">().</span><span class="n">iter</span><span class="p">().</span><span class="n">enumerate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// add the index column</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">column_header</span><span class="p">.</span><span class="n">eq_ignore_ascii_case</span><span class="p">(</span><span class="s">"index"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">index_present</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;th&gt;&lt;/th&gt;"</span><span class="p">);</span>
<span class="w">            </span><span class="n">index_present</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="n">index_place</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"&lt;th&gt;{}&lt;/th&gt;"</span><span class="p">,</span><span class="w"> </span><span class="n">column_header</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;/tr&gt;"</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Iterate through rows dynamically - convert dataframe into Vec&lt;Vec&lt;String&gt;&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rows</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="n">df</span><span class="p">.</span><span class="n">height</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">row_idx</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">df</span><span class="p">.</span><span class="n">get_columns</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">series</span><span class="o">|</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">series</span><span class="p">.</span><span class="n">dtype</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Utf8</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="n">utf8</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Int8</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">i8</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Int16</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">i16</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Int32</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">i32</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Int64</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">i64</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Float32</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">f32</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">Float64</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">f64</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">DataType</span>::<span class="n">UInt32</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">series</span>
<span class="w">                        </span><span class="p">.</span><span class="kt">u32</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">                        </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">row_idx</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">                        </span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">"Unsupported"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="n">collect</span><span class="p">()</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">        </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">rows</span><span class="p">.</span><span class="n">iter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;tr&gt;"</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">iter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">index_present</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">index_place</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">column_number</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"&lt;td&gt;&lt;b&gt;{}&lt;/b&gt;&lt;/td&gt;"</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">));</span>
<span class="w">                </span><span class="n">column_number</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"&lt;td&gt;{}&lt;/td&gt;"</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">));</span>
<span class="w">                </span><span class="n">column_number</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;/tr&gt;"</span><span class="p">);</span>
<span class="w">        </span><span class="n">column_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">html_content</span><span class="p">.</span><span class="n">push_str</span><span class="p">(</span><span class="s">"&lt;/table&gt;"</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Normally the function itself would print the html content, but for this simulation</span>
<span class="w">    </span><span class="c1">// this function will return the html_content.</span>
<span class="w">    </span><span class="c1">// println!("EVCXR_BEGIN_CONTENT text/html\n{}\nEVCXR_END_CONTENT", html_content);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">html_content</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=072d0ff8-e737-4920-ac7c-ef8931bfc178">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: Center;font-family: Times New Roman;"><b>Disclaimer</b>: I am a computational mathematician, and not an Accountant. I am going to misuse terms and concepts. My apologies in advance.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=eeab1c3c-2b20-4577-aa78-d2cd9a8d91d1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman;">3. Delta Hedging Simulation</h2>
<p style="text-align: justify;font-family: Times New Roman;">     We finally arrive at the Delta Hedge simulation, where the objective is to simulate a Delta Hedge position and assess the profitability of this hedging scheme. From a theoretical perspective, a continuous adjusted Delta Hedged portfolio would, on average, yield a profit of zero.<br/>     To generate HTTP responses from two APIs, we need the following Rust crates: <code>reqwest</code>, <code>tokio-macros</code>, <code>tokio</code>, <code>serde</code> and <code>serde_json</code>. The stock market data was obtained from the Alpha Vantage API [<a href="https://www.alphavantage.co/documentation/" style='{{"color":"#95B9C7"}}'>18</a>], specifically retrieving 100 closing price observations for Microsoft's security equity. While we acknowledge that this dataset is insufficient for an accurate simulation, due to financial constraints, our access to data is limited.<br/>     To structure the Alpha Vantage HTTP response, we define Rust structs that emulate the required JavaScript Object notation (JSON) format. The primary struct, <b>AlphaVantageResponse</b>, consists of another struct, <code>MetaData</code>, and a <code>HashMap&lt;String, StockData&gt;</code>, where the keys are of datatype <code>String</code> and the values are instances of the <code>StockData</code> struct. The <code>MetaData</code> struct contains a single field, <code>symbol</code>, which represents the stock ticker. The <code>StockData</code> struct holds four key attributes: <code>open</code>, <code>high</code>, <code>low</code>, and <code>close</code> prices, all represented as <code>String</code> datatypes due to JSON serialization constraints.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">1</span><span class="w">     </span><span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="mi">2</span><span class="w">     </span><span class="k">struct</span> <span class="nc">AlphaVantageResponse</span><span class="w"> </span><span class="p">{</span>
<span class="mi">3</span><span class="w">         </span><span class="cp">#[serde(rename = </span><span class="s">"Meta Data"</span><span class="cp">)]</span>
<span class="mi">4</span><span class="w">         </span><span class="n">meta_data</span>: <span class="nc">MetaData</span><span class="p">,</span>
<span class="mi">5</span><span class="w">         </span><span class="cp">#[serde(rename = </span><span class="s">"Time Series (Daily)"</span><span class="cp">)]</span>
<span class="mi">6</span><span class="w">         </span><span class="n">time_series</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">StockData</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="mi">7</span><span class="w">     </span><span class="p">}</span>
<span class="mi">8</span><span class="w">    </span>
<span class="mi">9</span><span class="w">     </span><span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="mi">10</span><span class="w">    </span><span class="k">struct</span> <span class="nc">MetaData</span><span class="w"> </span><span class="p">{</span>
<span class="mi">11</span><span class="w">        </span><span class="cp">#[serde(rename = </span><span class="s">"2. Symbol"</span><span class="cp">)]</span>
<span class="mi">12</span><span class="w">        </span><span class="n">symbol</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">13</span><span class="w">    </span><span class="p">}</span>
<span class="mi">14</span><span class="w">    </span>
<span class="mi">15</span><span class="w">    </span><span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="mi">16</span><span class="w">    </span><span class="k">struct</span> <span class="nc">StockData</span><span class="w"> </span><span class="p">{</span>
<span class="mi">17</span><span class="w">        </span><span class="cp">#[serde(rename = </span><span class="s">"1. open"</span><span class="cp">)]</span>
<span class="mi">18</span><span class="w">        </span><span class="n">open</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">19</span><span class="w">        </span><span class="cp">#[serde(rename = </span><span class="s">"2. high"</span><span class="cp">)]</span>
<span class="mi">20</span><span class="w">        </span><span class="n">high</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">21</span><span class="w">        </span><span class="cp">#[serde(rename = </span><span class="s">"3. low"</span><span class="cp">)]</span>
<span class="mi">22</span><span class="w">        </span><span class="n">low</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">23</span><span class="w">        </span><span class="cp">#[serde(rename = </span><span class="s">"4. close"</span><span class="cp">)]</span>
<span class="mi">24</span><span class="w">        </span><span class="n">close</span>: <span class="nb">String</span><span class="p">,</span><span class="w">   </span>
<span class="mi">25</span><span class="w">    </span><span class="p">}</span>
<span class="mi">26</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     Recall the dataset $\mathcal{D} = \{ r_{m}, r_{m-1}, r_{m-2}, \ldots, r_{2}, r_{1}, r_{0}  \}$, which is consisted of daily observations of the 52-week treasury bill interest rates that were used in the Method of Moments estimation. In the simulation, $\mathcal{D}$ corresponds to time-series data retrieved from the Federal Reserve Economic Data (FRED) API [<a href="https://fred.stlouisfed.org/series/DTB1YR" style='{{"color":"#95B9C7"}}'>19</a>]. This dataset is employed to estimate the CIR parameters from Eq. (61), Eq. (64) and Eq. (65) for a Cox-Ingersoll-Ross (CIR) model.<br/>     To construct the FRED HTTP response, we define the <b>FREDResponse</b> struct, which contains an optional vector of <code>Observations</code>. Each observation is an instance of the <code>Observation</code> struct, consisting of a <code>date</code> and a <code>value</code>, both represented as <code>String</code> datatypes to maintain consistency with JSON serialization.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">27</span><span class="w">    </span><span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="mi">28</span><span class="w">    </span><span class="k">struct</span> <span class="nc">FREDResponse</span><span class="w"> </span><span class="p">{</span>
<span class="mi">29</span><span class="w">        </span><span class="n">observations</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Observations</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="mi">30</span><span class="w">    </span><span class="p">{</span>
<span class="mi">31</span><span class="w">    </span>
<span class="mi">32</span><span class="w">    </span><span class="cp">#[derive(Derialize, Debug)]</span>
<span class="mi">33</span><span class="w">    </span><span class="k">struct</span> <span class="nc">Observations</span><span class="w"> </span><span class="p">{</span>
<span class="mi">34</span><span class="w">        </span><span class="n">date</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">35</span><span class="w">        </span><span class="n">value</span>: <span class="nb">String</span><span class="p">,</span>
<span class="mi">36</span><span class="w">   </span><span class="p">{</span>
<span class="mi">37</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     With both the Alpha Vantage and FRED HTTP response data structures defined, the next step involves the implementating asynchronous HTTP requests to retrieve the data from these APIs. Using the <code>reqwest</code> crate, we contructed the <code>retrieve_stock_data</code> and <code>retrieve_DTB1YR_data</code> functions which fecthed and deserialized the JSON responses into our Rust structs. Given the asynchronous nature of network calls, we had to employ the <code>tokio</code> crate to manage concurrency and efficient execution. Note that <code>let rt = tokio::runtime::Runtime::new().unwrap();</code> is the instance of the <code>Runtime</code> function from <code>Tokio</code>. This runtime instance enables the execution of asynchronous tasks within a synchronous environment, in our case the <code>main</code> function.<br/>     Without exploring the whole implementation of the Delta Hedge simulation, we will just address the simulation itself. From Yahoo Finance, there is a list of calls option for Microsoft Corporation (MSFT) with a maturation day of March, 21, 2025 [<a href="https://finance.yahoo.com/quote/MSFT/options/?date=1742515200" style='{{"color":"#95B9C7"}}'>20</a>]. The time of the simulation was February 17, 2025, and Microsoft security equity closed at a loss of \$2.11 (-0.51%), the security equity price was \$408.43. We chose a call option with a strike price of \$400.00, valued at \$16.00, ask price \$15.55, bid price \$15.70, and an implied volatility of $22.63\%$.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=5dd6ca65-df3f-4255-87c1-7a20ec8218c7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="The middle Call Option is the one we chose." height="600" src="Selected_MSFT_Call_Option.PNG" width="800"/>
<figcaption>Figure 5 - The middle MSFT Call Option is the one we chose.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a1c9c679-0691-4b68-ba39-746382ba7966">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     With the construction of the Delta hedge position leading to the formulation of the Black-Scholes partial differential equation from Eq. (14), and subsequently to a closed-form solution from Eq. (15), Eq. (16) and Eq. (17), the Delta hedge position $\Delta$ is not merely a hedging mechanism to eliminate the stochastic term from Eq. (10). Instead, it serves as a trading strategy aimed at minimizing the price diretional risk of a call option position by adjusting the holdings in the underlying asset, whic, in our case, is security equity. The Delta hedge position is given by the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \text{Delta Hedge} \\ \text{position} \end{align*} \; = \; \Delta \cdot 100 = \frac{\partial C(S_{t},t)}{\partial S_{t}}. \tag{66}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Given that $\Delta = \frac{\partial C(S_{t},t)}{\partial S_{t}}=0.50$, for one call option contract, the Delta hedge position would be:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$0.50 \cdot 100 = 50.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In other words, to construct the Delta hedge position in the portfolio, a quantity of 50 shares of the underlying security equity must be purchased. To maintina the Delta Hedge position, adjustments must be made when $\Delta$ changes: if $\Delta$ decreases, additional shares must be purchased, and if $\Delta$ increases, additional shares must be purchased, and if $\Delta$ decreases, shares must be sold. Suppose that $\Delta$ decreased to $0.45$. Denoting the previous Delta as $\Delta_{\text{old}}$ and the new Delta as $\Delta_{\text{new}}$, we define the difference as:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\Delta_{\text{diff}} = \Delta_{\text{new}} - \Delta_{\text{old}}. \tag{67}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Continuing our example, we obtain $\Delta_{\text{diff}} = -0.05$. The new quantity of shares held in the portfolio, accounting for this change, is determined by the following formula:</p>
<p style="text-align: justify;font-family: Times New Roman; ">$$\begin{align*} \text{The New} \\  \text{Quantity of the} \\ \text{Security Equity} \\ \text{in the Portfolio} \end{align*} \; = \; \Delta_{\text{diff}} \cdot 100 \; + \; \begin{matrix} \text{Quantity of the} \\ \text{Security Equity} \\ \text{in the Portfolio} \end{matrix}$$</p>
<p style="font-family: Times New Roman;">Substituting our values:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$-0.05 \cdot 100 + 50 = -5 + 50 = 45.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Since $\Delta$ decreased by $0.05$, a quantity of $5$ shares must be sold to maintain the Delta hedge position. Conversely, if $\Delta$ had increased by $0.05$, a quantity of $5$ shares would need to be purchased to maintain the Delta hedge position. In essence the Delta hedge simulation is concerned with the construction and maintenance of the Delta hedge position, and by doing so, we can discern the potential profitability of this trading strategy.<br/>     The Delta hedge simulation was executed on February 18, 2025, with a MSFT call option contract maturing on March 21, 2025. In-between these two dates is 32 days, and therefore, the simulation will cover these 32 days to track the performance of the Delta hedge. As we assume the role of a non-financial firm participant in the trading market, we assume that the portfolio is empty and that no quantity of the underlying security equity was held prior to the simulation. Futhermore, we assume that the initial cash balance available to the market participant is \$100,000. Given that the price of the call option is \$16.00, a single call option contract - consisting of 100 shares of the underlying security equity - is priced at \$1,600.00, plus a \$5.00 transaction fee. The total liabilities amount to \$1,605.00, while the total assets are \$1,600.00, resulting in a net portfolio loss of -\$5.00, at the start of the simulation. For the delta hedge trading strategy to be profitable, the total assets must exceed total liabilities.<br/>     The <code>main</code> function begins with the initiation of a <code>&amp;str</code> variable named <code>ticker_symbol</code>, this variable stores the ticker symbol of the desired security equity. Because the <code>retrieve_stock_data</code> and <code>retrieve_DTB1YR_data</code> function are asynchronous functions, an instance of Tokio crate's <code>Runtime</code> is required to manage concurrency (e.g. multi-task execution). This is accomplished by the following Rust statement <code>let rt = tokio::runtime::Runtime::new().unwrap();</code> which creates that new runtime instance. An additional consideration is that asynchronous functions returns a <code>Result&lt;T,E&gt;</code> datatype, where <code>Ok(T)</code> represents the successful execution of the asynchronous function and contains the returned value, while <code>Err(E)</code> represents an error that occurred in the execution of the asynchronous function and thus contains an error value, such as, an error message. To execute <code>retrieve_stock_data</code>, followed by <code>retrieve_DTB1YR_data</code> in that sequence, then both of these functions must be passed into <code>rt.on_block()</code>, so that it can generate a future (e.g am asynchronous computation), and block the current thread from executing any other task until the completion of these asynchronous computations. And since both asynchronous functions return an <code>Result&lt;T,E&gt;</code> datatype, both need to be place within a <code>match</code> statement to resolve their returning vectors.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">111</span><span class="w">   </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="mi">112</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">ticker_symbol</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"MSFT"</span><span class="p">;</span>
<span class="mi">113</span><span class="w">   </span>
<span class="mi">114</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">rt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tokio</span>::<span class="n">runtime</span>::<span class="n">Runtime</span>::<span class="n">new</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="mi">115</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">stock_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">rt</span><span class="p">.</span><span class="n">block_on</span><span class="p">(</span><span class="n">retrieve_stock_data</span><span class="p">(</span><span class="n">ticker_symbol</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="mi">116</span><span class="w">       </span><span class="nb">Ok</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
<span class="mi">117</span><span class="w">       </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="mi">118</span><span class="w">           </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Failed to retrieve stock data: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="mi">119</span><span class="w">           </span><span class="k">return</span><span class="p">;</span>
<span class="mi">120</span><span class="w">       </span><span class="p">}</span>
<span class="mi">121</span><span class="w">   </span><span class="p">};</span>
<span class="mi">122</span><span class="w">   </span>
<span class="mi">123</span><span class="w">   </span><span class="cm">/* when retrieve_DTB1YR_data() only returned ()</span>
<span class="cm">125   In this iteration retrieve_DT1YR_data() only returned the last 1-YR T-Bill interest rate as a print to console</span>
<span class="cm">126   if let Err(e) = rt.block_on(retrieve_DTB1YR_data()) {</span>
<span class="cm">127       eprintln!("Failed to retrieve interest rate data: {}", e);</span>
<span class="cm">128   }</span>
<span class="cm">129   */</span>
<span class="mi">130</span><span class="w">   </span>
<span class="mi">131</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">rt</span><span class="p">.</span><span class="n">block_on</span><span class="p">(</span><span class="n">retrieve_DTB1YR_date</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="mi">132</span><span class="w">       </span><span class="nb">Ok</span><span class="p">(</span><span class="n">interest_data</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">interest_data</span><span class="p">,</span>
<span class="mi">133</span><span class="w">       </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="mi">134</span><span class="w">            </span><span class="n">eprint</span><span class="p">(</span><span class="s">"Failed to retrieve 1YR Treastury Bill Interest rate data: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="mi">135</span><span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="mi">136</span><span class="w">       </span><span class="p">}</span>
<span class="mi">137</span><span class="w">   </span><span class="p">};</span>
<span class="mi">138</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     The return value for the asynchronous function <code>retrieve_stock_data(ticker_symbol)</code> is <code>Result&lt; Vec&lt;(NaiveDate, f64)&gt;, Error &gt;</code>. We assume that the execution of <code>retrieve_stock_data(ticker_symbol)</code> is successful, then the result is that <code>stock_data</code> is assigned a vector of tuples, e.g., <code>Vec&lt;(NaiveDate, f64)&gt;</code>. Each tuple <code>(NaiveDate, f64)</code> is consisted of the date and the security equity price at that given date. The following statement was used to seperate the dates and security equity prices into two seperate <code>Vec&lt;f64&gt;</code> vectors.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">139</span><span class="w">   </span><span class="c1">// Extract the sorted dates and stock prices</span>
<span class="mi">140</span><span class="w">   </span><span class="n">Let</span><span class="w"> </span><span class="p">(</span><span class="n">dates</span><span class="p">,</span><span class="w"> </span><span class="n">stock_prices</span><span class="p">)</span>: <span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock_data</span>
<span class="mi">141</span><span class="w">       </span><span class="p">.</span><span class="n">into_iter</span><span class="p">()</span>
<span class="mi">142</span><span class="w">       </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">price</span><span class="p">))</span>
<span class="mi">143</span><span class="w">       </span><span class="p">.</span><span class="n">unzip</span><span class="p">();</span>
<span class="mi">144</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">One <code>Vec&lt;f64&gt;</code> vector was named <code>dates</code>, and the other <code>Vec&lt;f64&gt;</code> vector was named <code>stock_prices</code>. A <code>Vec&lt;f64&gt;</code> vector named <code>logged_returns</code> was created with <code>Vec::with_capacity(stock_prices.len())</code> to efficiently store the logged returns of the security equity. A <code>for</code> loop that iterates overlapping pairs of elements from <code>stock_prices</code> using <code>windows</code> method was used to apply Eq. (22) to <code>stock_prices</code> vector to compute the logged returns of the security equity. The sample variance of the logged returns was computed by passing the <code>logged_returns</code> vector into the <code>var</code> function, the resulting value was stored in a <code>f64</code> variable <code>variance</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">145</span><span class="w">   </span><span class="c1">// Calculates the logged returns, expected return and variance</span>
<span class="mi">146</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">logged_returns</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">stock_prices</span><span class="p">.</span><span class="n">len</span><span class="p">());</span>
<span class="mi">147</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">stock_prices</span><span class="p">.</span><span class="n">windows</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="mi">148</span><span class="w">       </span><span class="n">logged_return</span><span class="p">.</span><span class="n">push</span><span class="p">((</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="n">ln</span><span class="p">());</span>
<span class="mi">149</span><span class="w">   </span><span class="p">}</span>
<span class="mi">150</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">variance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">var</span><span class="p">(</span><span class="n">logged_returns</span><span class="p">.</span><span class="n">clone</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="mi">151</span><span class="w">       </span><span class="nb">Some</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">variance</span><span class="p">,</span>
<span class="mi">152</span><span class="w">       </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="mi">153</span><span class="w">           </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Not enough data to calculate a variance."</span><span class="p">);</span>
<span class="mi">154</span><span class="w">       </span><span class="mf">0.0</span><span class="w"> </span><span class="c1">// Provides a default value</span>
<span class="mi">155</span><span class="w">       </span><span class="p">}</span>
<span class="mi">156</span><span class="w">   </span><span class="p">};</span>
<span class="mi">157</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">To generate an accurate geometric brownian motion path that coincides with the real-world price dynamics of the security equity; the annualized expected return and the annualized volatility (e.g. <i>historical volatillity</i>) of the security equity must be computed, and than these parameters must be passed into the <code>geometric_brownian_motion(stock_price[0], expected return, annualized volatility)</code> function. The formula to compute annualized volatility is Eq. (24): <code>variance</code> is square rooted by <code>.sqrt()</code> and multiplied by <code>252.0_f64.sqrt()</code>, the resulting numeric is assigned to <code>volatility</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">158</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">volatility</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">variance</span><span class="p">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">*</span><span class="mf">252.0_</span><span class="k">f64</span><span class="p">.</span><span class="n">sqrt</span><span class="p">();</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">The following is the formula to compute annualized expected return of the security equity:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{matrix} \text{annualized} \\ \text{expected return} \end{matrix} \; = \; \verb|mean(logged_returns)| \; + \; 0.5 \; \cdot \;  \verb|variance| \; \cdot \; 252.0. \tag{68}$$</p>
<p style="text-align: justify;font-family: Times New Roman;"><code>logged_returns</code> is passed into the <code>mean</code> function to compute the sample mean of the logged returns. The sample mean of the logged returns and <code>0.5*variance</code> is summed, then multiplied by $252.0$.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">159</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">expected_return</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="p">(</span><span class="n">logged_returns</span><span class="p">)</span><span class="o">+</span><span class="mf">0.5</span><span class="o">*</span><span class="n">variance</span><span class="p">)</span><span class="o">*</span><span class="mf">252.0</span><span class="w">   </span>
<span class="mi">160</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">The first element of <code>stock_prices</code>, e.g. <code>stock_prices[0]</code> is the price of the security equity on February 17, 2025. As aforementioned the following <code>f64</code> variables: <code>stock_prices[0]</code>, <code>expected_return</code> and <code>volatility</code> are passed into <code>geometric_brownian_motion</code> function to generate the GBM path for the simulation. The GBM path is stored within the <code>f64</code> vector named <code>sim_stock_price</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">182</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">sim_stock_price</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">geometric_brownian_motion</span><span class="p">(</span>
<span class="mi">183</span><span class="w">       </span><span class="n">stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">expected_return</span><span class="p">,</span><span class="w"> </span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="n">number_of_sims</span><span class="w">    </span>
<span class="mi">184</span><span class="w">   </span><span class="p">);</span>
<span class="mi">185</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=f5fa0b91-036f-404d-9f6d-90c6d63ace93">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     As with the previous asynchronous function, we will assume that the execution of <code>retrieve_DTB1YR_data</code> was successful, and so, then the result of <code>Result&lt;Vec&lt;f64&gt;, Error&gt;</code> is a <code>Vec&lt;f64&gt;</code> vector named <code>TB1YR_data</code> that contains 52-week Treasury bill (T-bill) interest rates. An important consideration is that the 52-week T-bill interest rates that were retrieved from the FRED API are stored as percentage. However, the Black-Scholes-Merton model requires the risk-free interest rate to be in a decimal form, and therefore, it is necessary to convert the interest rates from percentages into decimals.<br/>     The dataset that was retrieved from the FRED API comprises 17,114 52-week T-bill interest rates, spanning from "1959-07-15" to "2025-02-17". To narrow the focus down to the most relevant data, we selected a subset spanning from "2024-02-18" to "2025-02-17" which corresponds to 252 trading days - a standard number of trading days in a given year. To reflect this, a <code>usize</code> variable named <code>quantity_of_interest_data</code> was initialized with a value of 252. To generate the decimalized subset of 52-week T-bill interest rate, a conditional assignment expression was used:</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">186</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">quantity_of_interest_data</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">252</span><span class="p">;</span><span class="w"> </span>
<span class="mi">187</span><span class="w">       </span>
<span class="mi">188</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">decimal_rates</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">quantity_of_interest_data</span><span class="w"> </span><span class="p">{</span>
<span class="mi">189</span><span class="w">       </span><span class="c1">// converts only the desired quantity of the TB1YR dataset</span>
<span class="mi">190</span><span class="w">       </span><span class="n">TB1YR_data</span><span class="p">[</span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="o">-</span><span class="n">quantity_of_interest_data</span><span class="o">..</span><span class="p">]</span>
<span class="mi">191</span><span class="w">       </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="mi">192</span><span class="w">       </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">rate</span><span class="o">|</span><span class="w"> </span><span class="n">rate</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
<span class="mi">193</span><span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="mi">194</span><span class="w">       </span><span class="c1">// Converts the entire TB1YR dataset</span>
<span class="mi">195</span><span class="w">       </span><span class="n">TB1YR_data</span>
<span class="mi">196</span><span class="w">       </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="mi">197</span><span class="w">       </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">rate</span><span class="o">|</span><span class="w"> </span><span class="n">rate</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
<span class="mi">198</span><span class="w">       </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span>
<span class="mi">199</span><span class="w">   </span><span class="p">};</span>
<span class="mi">200</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">This conditional assigment expression check whether the length of <code>TB1YR_data</code> exceeds <code>quantity_of_interest_data</code>. As expected, if it does, then the last 252 entries are selected using slicing syntax <code>TB1YR_data[TB1YR_data.len()-quantity_of_interest_data..]</code>. These entries are than converted from percentages to decimals by mapping each value <code>rate/100.0</code>, and the resulting iterator is collected into a <code>Vec&lt;f64&gt;</code> vector. An unexpected entry, but nonetheless, if <code>qauntity_of_interest_data</code> is equal to, or exceed the length of <code>TB1YR_data</code> dataset, then the entire dataset undergoes the same percentage-to-decimal conversion.<br/>     The decimalized subset-dataset, <code>decimal_rates</code>, now resembles the dataset $\mathcal{D} = \{ r_{m}, r_{m-1}, r_{m-2}, \ldots, r_{2}, r_{1}, r_{0} \}$ that was used to derive the Method of Moments estimation that was used to estimate the CIR model parameters. <code>decimal_rates</code> is passed into <code>estimate_cir_parameters</code>, the returned <code>Vec&lt;f64&gt;</code> vector contains the estimated CIR model parameters, e.g. $[a, b, \sigma]$.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">201</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">cir_parameters</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">estimate_cir_parameters</span><span class="p">(</span><span class="n">decimal_rates</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">The current risk-free interest rate that is required to initialize the CIR model, is obtained by selecting the most recent 52-week T-bill interest rate from <code>TB1YR_data</code>. Since the dataset is oriented from oldest to newest, the last element of <code>TB1YR_data</code> is the current risk-free interest rate. This is accomplished using the <code>last()</code> function, which returns an optional <code>f64</code>, e.g. <code>Option&lt;f64&gt;</code>. In case the <code>TB1YR_data</code> is empty, or full of <code>NaN</code>s, the <code>unwrap_or(&amp;0.0)</code> function ensures that instead of returning <code>panic!</code>, the return value is $0.0$. Otherwise the successful unwrapping results in the last element of <code>TB1YR_data</code>. The current risk-free interest rate is converted from percentage to decimal and assigned to a <code>f64</code> variable named <code>risk_free_rate</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">202</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">risk_free_rate</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">last</span><span class="p">().</span><span class="n">unwrap_or</span><span class="p">(</span><span class="o">&amp;</span><span class="mf">0.0</span><span class="p">)</span><span class="o">/</span><span class="mf">100.0</span><span class="p">;</span>
<span class="mi">203</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     Finally, the <code>CIR_model</code> function is called to simulate the dynamics of the 52-week T-bill interest rate based on the Cox-Ingersoll-Ross model. The <code>CIR_model</code> function takes <code>risk_free_rate</code>, the three CIR parameters from <code>cir_parameters</code>, and the desired number of simulations from <code>number_of_sims</code> as arguments; the return is a <code>Vec&lt;f64&gt;</code> vector containing the simulated interest rate path of the CIR model.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">204</span><span class="w">   </span><span class="c1">// Cox-Ingersol-Ross model to simulate 52-week T-bill interest rate dynamics</span>
<span class="mi">205</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">cir_interest_rates</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CIR_model</span><span class="p">(</span>
<span class="mi">206</span><span class="w">       </span><span class="n">risk_free_rate</span><span class="p">,</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">number_of_sims</span>
<span class="mi">207</span><span class="w">   </span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">The <code>cir_interest_rates</code> vector represents the simulated evolution of the 52-week T-bill interest rates, modelled using the the Cox-Ingersoll-Ross (CIR) model in the Delta hedge simulation. Given that, in the real-world, the 52-weel T-bill interest rate fluctuates daily, the CIR model was chosen to capture these interest rate dynamics accurately. By incorporating stochastic fluctuation in the interest rate, the simulation more closely resembles real market conditions, and thereby, enhences the robustness and accuracy of the Delta hedge strategy simulation.<br/>     To track time progression in the simulation, spanning from the present-date "2025-02-17" (e.g., February 17, 2025) to the maturation date "2025-03-21" (e.g., March 21, 2025), a <code>Vec&lt;f64&gt;</code> vector was generated. The process involved the following steps:</p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>1. The present-date (February 17, 2025) was generated using <code>Local::new()::date_naive()</code> and stored in a variable named <code>current_date</code>.</li>
<li>2. Although our Rust implementation of the Black-Scholes-Merton model, e.g. the <code>BSM_Call_Opt</code> function can handle <code>T=0.0</code>, we decided that the end-time should be <code>T=0.0001</code>. Hence, a <code>f64</code> variable named <code>end_time</code> is initiated as $0.0001$.</li>
<li>3. The Maturation date ("2025-3-21") was initialized as a string literal (<code>date</code>) and parsed into a <code>NaiveDate</code> datatype using <code>NaiveDate::parse_from_str(&amp;date, "%Y-%m-%d")</code>. The parsed result was stored in a variable named <code>maturation_date</code>.</li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">160</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">current_date</span>:<span class="nc">NaiveDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Local</span>::<span class="n">now</span><span class="p">().</span><span class="n">date_naive</span><span class="p">();</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">date</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"2025-3-21"</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">end_time</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">;</span>
<span class="mi">161</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">maturation_date</span>:<span class="nc">NaiveDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NaiveDate</span>::<span class="n">parse_from_str</span><span class="p">(</span><span class="o">&amp;</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="s">"%Y-%m-%d"</span><span class="p">).</span><span class="n">expect</span><span class="p">(</span><span class="s">"Failed to parse date."</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>4. The following code statement was utilized to compute the difference in days between <code>current_date</code> and <code>maturation_date</code>. The result was stored in a variable named <code>days_since_epoch</code>.</li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">162</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maturation_date</span><span class="p">.</span><span class="n">signed_duration_since</span><span class="p">(</span><span class="n">current_date</span><span class="p">).</span><span class="n">num_days</span><span class="p">();</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>The result was stored in a variable named <code>days_since_epoch</code>.</li>
<li>5. To normalize <code>days_since_epoch</code> over a given year, $\verb|days_since_epoch|$ was divided by $365.0$. The new variable <code>time_to_maturity</code> was computed as:</li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">163</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">time_to_maturity</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">days_since_epoch</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="o">/</span><span class="mf">365.0</span><span class="p">;</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>6. To generate the time-steps for each day between <code>current_date</code> and <code>maturation_date</code>, a <code>Vec&lt;f64&gt;</code> vector was initiated with using the Rust statement:</li>
<li></li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">164</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">time_span</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linspace</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">end_time</span><span class="p">,</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>7. Finally, the elements of <code>time_span</code> were rounded using the <code>map</code> iterator combined with the <code>round_num</code> function:</li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">165</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">rounded_time_span</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time_span</span><span class="w"> </span>
<span class="mi">166</span><span class="w">       </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="mi">167</span><span class="w">       </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">time</span><span class="o">|</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="mi">168</span><span class="w">       </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span>
<span class="mi">169</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=56ac6126-4d6d-4a80-b912-234ecb93344d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     A <code>usize</code> variable named <code>number_of_sims</code> was created to represent the number of days to be simulated. As previously mentioned, there are 32 days between February 18, 2025 and March 21, 2025, and therefore <code>number_of_sims</code> was initialized to $32$. To store the data that would be generated from the simulation, eight <code>Vec&lt;f64&gt;</code> vectors were created using <code>with_capacity(number_of_sims+1)</code>: <code>BSM_call_option_price_vec</code>, <code>delta_vec</code>, <code>orders_vec</code>, <code>stock_quantity_vec</code>, <code>Adjustment_Cashflow</code>, <code>Cash_Balance_vec</code>, <code>Assets_vec</code>, <code>Liabilities_vec</code>, <code>sim_stock_prices</code> and <code>cir_interest_rates</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">169</span><span class="w">   </span>
<span class="mi">170</span><span class="w">   </span><span class="c1">// simulation parameters</span>
<span class="mi">171</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">number_of_sims</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>
<span class="mi">172</span>
<span class="mi">173</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">BSM_call_option_price_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">174</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">175</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">orders_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">176</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stock_quantity_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">177</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">178</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Cash_Balance_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">179</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Assets_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">180</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Liabilities_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mi">181</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     As previously mentioned, the market participant begins the simulation with a cash balance of \$100,000, with an empty portfolio (e.g. <code>quantity_of_stock</code> = $0.0$). In otherwords, the market participate does not hold the underlying security equity associated with the call option contract. The MSFT call option that we chose from Yahoo Finance's list of MSFT call options [20] has a strike price (<code>strike_price</code>) of \$400.00, a market premium (<code>market_option_price</code>) of \$16.00 and an implied volatility of $22.63\%$. Although Yahoo Finance provides an implied volatility value for the call option, the implied volatility of the chosen MSFT call option will still be approximated by the <code>implied_volatility_call</code> function. Consistent with the original Black and Scholes (1973) publication [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], the portfolio in the Delta hedge simulation will consist of only one call option contract (e.g., <code>quantity_of_call_options</code> = $1.0$). Each trade incurs a transaction cost of \%5.00, so the <code>commision_cost</code> variable is initialized with this value. The final parameter considered is the order size, represent by <code>order_quantity</code>, which will be updated throughout the simulation to reflect the changes in the hedging strategy.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">210</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">strike_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">400.0</span><span class="p">;</span><span class="w"> </span>
<span class="mi">211</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span><span class="w">    </span>
<span class="mi">212</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">quantity_of_stock</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="mi">213</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">order_quantity</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="mi">214</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">commision_cost</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="p">;</span>
<span class="mi">215</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">market_option_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">16.00</span><span class="p">;</span><span class="w"> </span><span class="c1">// Actual Call option price on market</span>
<span class="mi">216</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">cash_balance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">100000.0</span><span class="p">;</span>
<span class="mi">217</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     The above code block initializes key simulation variables for the Delta hedge simulation. The <code>cash_balance</code> starts at \$100,000, reflecting the participants initial capital. The <code>quantity_of_stock</code> is set to $0.0$, indicating no initial holdings in the underlying security equity. Although the security equity is traded during the simulation to maintain the hedge position, the initialization of the variable is before the simulation, and so, the variable is set equal to $0.0$. And since in the real-world trades are not frictionless, e.g. each transaction has an associated fee, we decided to include a trading commission fee to each trade, to make the Delta simulation align more closely with reality.<br/>     Recollect Newton-Raphson method specific to our application, Eq. (27),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t+1} = \sigma_{t} - \frac{\text{Price Difference}}{\frac{\partial C(S_{t},t)}{\partial \sigma}},$$</p>
<p style="text-align: justify;font-family: Times New Roman;">or it alternative form, Eq. (28)</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\sigma_{t+1}=\sigma_{t} - \frac{\text{Price Difference}}{S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The accuracy of the approximation of $\verb|price_difference|$ determines the numerical stability of this appliation of the Newton-Raphson method; the accuracy of $\verb|price_difference|$ depends upon the accuracy of the Black-Scholes-Merton model, which itself is dependent upon how accurate the approximation of two cumulative probabilities:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\mathcal{N}(d_{1}) = \int_{-\infty}^{d_{1}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t} \;\; \text{ and } \;\; \mathcal{N}(d_{2}) = \int_{-\infty}^{d_{2}} \frac{1}{\sqrt{2\pi}} e^{-\frac{1}{2}S_{t}^{2}} \mathop{} dS_{t}.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Although the convergence rate for Gauss-Legendre quadrature rule is fast, the balance between computational cost and degree of accuracy still needed to be managed. By supplanting composite Trapezoid rule for a 4-point Gauss-Legendre Quadrature rule the lower boundary of the above integration problem was able to be shifted leftwards from $-5.0$ to $-1e5$, only requiring the number of partitions to increase to $n=100,000$. Despite this significant improvement in the accuracy of the approximation to the two cumulative probabilities and subsequently to the Black-Scholes-Merton model, we were only able achieve an accuracy of $1e-6$ for $\verb|price_difference|$.<br/>     With the knowledge that the implied volatility of the MSFT call option is $22.63\%$, we set the initial guess for $\sigma_{t}$ equal to $0.35$. From <i>An Introduction to Numerical Analysis</i> by Endre Suli and David Mayer (2003) [<a href="https://doi.org/10.1017/CBO9780511801181" style='{{"color":"#95B9C7"}}'>21</a>], pg. 4, we borrow the definition of <b>Brouwer's Fixed Point Theorem</b>:</p>
<p style="margin-left:5%;text-align: justify;font-family: Time New Roman"><b>Theorem 1.2.</b> (Brouwer's Fixed Point Theorem) Suppose that $g$ is a real-valued function, defined and continuous on a bounded closed interval $[a,b]$ of the real line, and let $g(x) \in [a,b]$ for all $x \in [a,b]$ for all $x \in [a,b]$. Then, there exists $\xi$ in $[a,b]$ such that $\xi = g(\xi)$; the real number $\xi$ is called a <b>fixed point of the function</b> $g$.</p>
<p style="text-align: justify; font-family: Times New Roman;">Consider the continuous real-value function $g$ from <b>Theorem 1.2</b>, there exists a real-value $\sigma_{t} \in [a,b]$ such that $\sigma_{t} = g(\sigma_{t}^{*})$. Let call $\sigma_{t}^{*}$ the implied volatility of the MSFT call option. Using Eq. (28), we can discern that,</p>
<p style="text-align: justify; font-family: Times New Roman;">$$g(\sigma_{t}) = \sigma_{t} - \frac{\text{Price Difference}}{S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}}.$$</p>
<p style="text-align: justify; font-family: Times New Roman;">and that $g(\sigma_{t}) \in [a,b]$. Borrowing an additional definition from [<a href="https://doi.org/10.1017/CBO9780511801181" style='{{"color":"#95B9C7"}}'>21</a>], pg. 11:</p>
<p style="margin-left:5%;text-align: justify;font-family: Time New Roman"><b>Theorem 1.5.</b> Suppose that $g$ is a real-valued function, defined and continuous on a bounded closed interval $[a,b]$ of the real line, and assume that $g(x) \in [a,b]$ for all $x \in [a,b]$. Let $\xi = g(\xi) \in [a,b]$ be fixed point of $g$ (whose existence is ensured by Theorem 1.2), and assume that $g$ has a continuous derivative in some neighbourhood of $\xi$ with $|g^{'}(\xi)| &lt; 1$. Then, the sequence $(x_{k})$ defined by $x_{k+1}=g(x_{k})$, $k \geq 0$, converges to $\xi$ as $k \to \infty$, provided that $x_{0}$ is sufficiently close to $\xi$.</p>
<p style="text-align: justify; font-family: Times New Roman;">We know that Vega, $\frac{\partial C(S_{t},t)}{\partial \sigma}$ is a continuous derivative over $\R$, and therefore Vega is a continuous function over the closed interval $[a,b]$. The Black-Scholes-Merton model from Eq. (15) is also continuous over $\R$, and the martket premium of the call option is $\verb|market_option_price| \in \R$, and therefore the $\verb|price_difference|$ function is also continuous over $[a,b]$. To proceed let's derive the derivative $g^{'}(\sigma_{t})$:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\begin{align*} \frac{\partial }{\partial \sigma_{t}} g(\sigma_{t}) &amp; = \frac{\partial }{\partial \sigma_{t}} \sigma_{t} - \frac{\partial }{\partial \sigma_{t}} \frac{\text{Price Difference}}{S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t}} = \frac{\partial \sigma_{t}}{\partial \sigma_{t}} - \frac{\frac{\partial \text{Price Difference}}{\partial \sigma_{t}} \cdot S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} - \text{Price Difference} \cdot \frac{\partial^{2} C(S_{t},t)}{\partial \sigma_{t}}}{\big[ S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} \big]^{2}} \\ &amp; = 1 - \frac{\frac{\partial \text{Price Difference}}{\partial \sigma_{t}} \cdot S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} - \text{Price Difference} \cdot S_{t}\frac{1}{\sqrt{2\pi}}e^{-\frac{1}{2}d_{1}^{2}} \sqrt{T-t} \cdot -d_{1} \cdot \big( \sqrt{T-t}-\frac{d_{1}}{\sigma_{t}} \big)}{\big[ S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} \big]^{2}} \\ &amp; = 1 - \frac{\frac{\partial \text{Price Difference}}{\partial \sigma_{t}} \cdot S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} + \text{Price Difference} \cdot S_{t}\frac{1}{\sqrt{2\pi}}e^{-\frac{1}{2}d_{1}^{2}} \sqrt{T-t} \cdot d_{1} \cdot \big( \sqrt{T-t}-\frac{d_{1}}{\sigma_{t}} \big)}{\big[ S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} \big]^{2}}\end{align*}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The result:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial }{\partial \sigma_{t}} g(\sigma_{t}) = 1 - \frac{\frac{\partial \text{Price Difference}}{\partial \sigma_{t}} \cdot S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} + \text{Price Difference} \cdot S_{t}\frac{1}{\sqrt{2\pi}}e^{-\frac{1}{2}d_{1}^{2}} \sqrt{T-t} \cdot d_{1} \cdot \big( \sqrt{T-t}-\frac{d_{1}}{\sigma_{t}} \big)}{\big[ S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} \big]^{2}}. \tag{69}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">If the following condition holds:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$ \bigg| \frac{\partial }{\partial \sigma_{t}} g(\sigma_{t}) \bigg| =  \Bigg| 1 - \frac{\frac{\partial \text{Price Difference}}{\partial \sigma_{t}} \cdot S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} + \text{Price Difference} \cdot S_{t}\frac{1}{\sqrt{2\pi}}e^{-\frac{1}{2}d_{1}^{2}} \sqrt{T-t} \cdot d_{1} \cdot \big( \sqrt{T-t}-\frac{d_{1}}{\sigma_{t}} \big)}{\big[ S_{t}\mathcal{N}^{'}(d_{1})\sqrt{T-t} \big]^{2}} \Bigg| &lt; 1,$$</p>
<p style="text-align: justify;font-family: Times New Roman;">then it is gauranteed that the sequence of $(\sigma_{t})$ will converge to the implied volatility of MSFT call option, $\sigma_{t}^{*}$. And therefore, if this condition holds, then Eq. (28), the Newton Raphson method is guaranteed to converge to $\sigma_{t}^{*}$. Our initial volatility guess $\sigma_{0}=0.35$ should be in the neighbourhood of $\sigma_{t}^{*}$, and thus, gaurantee the convergence of the Newton Raphson method.<br/>     The implied volatility of the MSFT call option is approximated using the <code>implied_volatility_call</code> function. The function takes the market premium of the MSFT call option (<code>market_option_price</code>), the current price of the underlying security equity (<code>sim_stock_price[0]</code>), the time till the maturation date (<code>time_to_maturity</code>), the initial volatility guess <code>0.35</code>, the risk-free interest rate (<code>risk_free_rate</code>), a tolerance of 1e-6, and an iteration maximum of $1,000$. The returned value of the <code>implied_volatility_call</code> function is the approximated implied volatility.<br/>     With implied volatility of the MSFT call option approximated, $\sigma_{t}^{*}$, it can be passed into the <code>BSM_option_price</code> function to price the theoretical value of the MSFT call option. Note that the theoretical value should either equal or approximate the market premium of the call option: if they do not equal or approximate each other, then that is a sign that the Newton Raphson method did not converge to the true $\sigma_{t}^{*}$. This can occur for various reason: Newton Raphson method was premature terminate prior to convergence, the initial volatility guess was outside the neighbourhood of $\sigma_{t}^{*}$, Newton Raphson method diverged, or the approximation of <code>price_difference</code> is not accurate enough for Newton Raphson method to converge to the true implied volatility $\sigma_{t}^{*}$.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">218</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">implied_volatility</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">implied_volatility_call</span><span class="p">(</span><span class="w"> </span>
<span class="mi">219</span><span class="w">       </span><span class="n">market_option_price</span><span class="p">,</span><span class="w"> </span><span class="n">sim_stock_price</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mf">0.35</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span>
<span class="mi">220</span><span class="w">   </span><span class="p">);</span>
<span class="mi">221</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">BSM_option_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">);</span>
<span class="mi">222</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     $\Delta$ is computed with the <code>Greek_delta</code> function. The Rust closure [<a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html" style='{{"color":"#95B9C7"}}'>15</a>] <code>Gcdf</code> is standard Gaussian probability density function; it is required to compute $\Delta$. The following variables were passed into <code>Greek_delta</code> as arguments: <code>Gcdf</code>, <code>stock_prices[0]</code>, <code>strike_price</code>, <code>time_to_maturity</code>, <code>volatility</code> and <code>risk_free_rate</code>. The return value from the <code>Greek_delta</code> function is assigned to the <code>f64</code> variable named <code>delta</code>.<br/>     Recall Eq. (67),</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\Delta_{\text{diff}} = \Delta_{\text{new}} - \Delta_{\text{old}},$$</p>
<p style="text-align: justify;font-family: Times New Roman;">and</p>
<p style="text-align: justify;font-family: Times New Roman; ">$$\begin{align*} \text{The New} \\  \text{Quantity of the} \\ \text{Security Equity} \\ \text{in the Portfolio} \end{align*} \; = \; \Delta_{\text{diff}} \cdot 100 \; + \; \begin{matrix} \text{Quantity of the} \\ \text{Security Equity} \\ \text{in the Portfolio}. \end{matrix}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The first iteration the $\Delta$ is computed to determine the initial Delta hedge position. In subsequent iterations, the previous $\Delta$ is stored within the <code>delta_old</code> variable, and the new $\Delta$ is stored within <code>delta</code>. As in Eq. (67) and the subsequent equation, <code>delta</code> and <code>delta_old</code> are used to compute $\Delta_{\text{diff}}$ but it is not stored. Instead it is computed within the subsequent equation, which resulting value is stored within the variable <code>order_quantity</code>.</p>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="n">delta</span><span class="o">-</span><span class="n">delta_old</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify;font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">Needless to say, that the <code>delta_old</code> variable was initialized as $0.0$, as prior to the simulation the market participant did not hold any quantity of the associated MSFT call option contracts.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">223</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">Gcdf</span><span class="w"> </span><span class="o">=|</span><span class="n">x</span>: <span class="kt">f64</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">std</span>::<span class="kt">f64</span>::<span class="n">consts</span>::<span class="n">PI</span><span class="p">).</span><span class="n">sqrt</span><span class="p">())</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">x</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">exp</span><span class="p">();</span>
<span class="mi">224</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">Greek_delta</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">stock_price</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">);</span>
<span class="mi">225</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta_old</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="mi">226</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     The initial Liabilites of the portfolio is computed from the following mathematical expression:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\verb|Liabilities| \; = \; -1.0 \; * \; \big( \verb|commission_cost| \; + \; \verb|quantity_of_options| \; * \; \verb|market_option_price| \; * \; 100.0 \big). \tag{70}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The initial assets of the portfolio is computed from the following mathematical expression:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\verb|Assets| \; = \; \verb|sim_stock_prices[0]| \; * \; \verb|quantity_of_stock| \; + \; \verb|quantity_of_call_options| \; * \; \verb|market_option_price| \; * \; 100.0. \tag{71}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Since the market participant did not hold any call option contracts nor any shares of the associated security equity; the market participant has to purchase the call option contracts. The purchasing of the call option contracts results in a negative cashflow, represent as $\verb|Cashflow| = -1.0 * \verb|Liabilities|$.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">227</span><span class="w">   </span><span class="c1">// Initial asset and liabilities calculation</span>
<span class="mi">228</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Liabilities</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">commission_cost</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">market_option_price</span><span class="o">*</span><span class="mf">100.0</span><span class="p">);</span>
<span class="mi">229</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Assets</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">market_option_price</span><span class="o">*</span><span class="mf">100.0</span><span class="p">;</span>
<span class="mi">230</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">Cashflow</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">Liabilities</span><span class="p">;</span>
<span class="mi">231</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=3d21acd9-a752-48bb-869a-03f00c944ed4">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     We know that iterating through a collection with indexing incurs a compile-time cost. The associated compile-time cost is due to variety factors, including runtime type checking, which prevents Rust's LLVM (Low-Level Virutal Machine) from optimizing the Mid-Level Intermediate Representation (MIR) of the source code, which also contributes to an additional abtraction/compile-time cost. Although a more computationally efficient implementation is possible, optimizing performance was not the primary objective of this research article. Regardless of the aforementioned facts, we chose to implement the simulation using a <code>for</code> loop and indexing.<br/>     The simulation <code>for</code> loop iteratively models the Delta hedging process acorrss a predefined number of simulations, represented by <code>number_of_sims</code> variable. The core objective of the simulation is to dynamically adjust the underlying security equity position (e.g., Delta position) to maintain a Delta-neutral portfolio. This is accomplished by computing the $\Delta$ at each time-step and adjusting the security equity position accordingly to the change in $\Delta$. To discern profitability of the Delta hedge strategy, other key variables such as cash balance, liabilities and asset values are updated after every trade.<br/>     The simulation runs for a total of <code>number_of_sims</code> iterations, representing each trading daya in the Delta hedging simulation. For each iteration, the <code>BSM_Call_Opt</code> function is used to compute the premium of the MSFT call option, which is then rounded to two decimal places by <code></code>round_num before being appended to <code>BSM_call_option_price_vec</code>. Simultaneously, the <code>Greek_delta</code> function is invoked to compute $\Delta_{\text{new}}$, which is also rounded to four decimal places by <code>round_num</code>, before it is assigned to <code>delta</code> and also appended to <code>delta_vec</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">265</span><span class="w">   </span><span class="c1">// Simulation</span>
<span class="mi">266</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">number_of_sims</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="mi">267</span><span class="w">   </span><span class="n">BSM_call_option_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="mi">268</span><span class="w">                                      </span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="mi">269</span><span class="w">   </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">Greek_delta</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">,</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="mi">270</span><span class="w">   </span><span class="n">delta_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">delta</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p> <p style="text-align: justify;font-family: Times New Roman;">     A nested conditional was implemented to handle the different cases in the Delta hedge simulation. The external if-else conditional expression was used as a means to determine if $\Delta$ increased or decreased from the previous trading day; it accomplished this discernment by comparing $\Delta_{\text{new}}$ (e.g., <code>delta</code>) to $\Delta_{\text{old}}$ (e.g., <code>delta_old</code>).<br/>     If discerned that $\Delta_{\text{new}}$ is greater than $\Delta_{\text{old}}$, then the conditional expression evaluates to true, which indicates that additional shares of the security equity might need to be purchased to restore the Delta hedge position. The following mathematical expression is used to compute <code>order_quantity</code>:</p>
<p style="text-align: justify;font-family: Times New Roman; ">$$\verb|order_quantity| = \verb|round_num(quantity_of_call_options * 100.0 * (delta - delta_old), 0)|. \tag{72}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">The <code>order_quantity</code> is used to update <code>quantity_of_stock</code>: <code>quantity_of_stock += order_quantity</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">271</span><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">delta_old</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="p">{</span>
<span class="mi">272</span><span class="w">           </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="n">delta</span><span class="o">-</span><span class="n">delta_old</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="mi">273</span><span class="w">           </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">;</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">As mentioned, an increase in $\Delta$ might warrant an acquisition of security equity, as the shift in $\Delta$ could be small enough not to shift the Delta-neutral position. To capture cases where the $\Delta$ insufficiently increases, the <code>quantity_order</code> is rounded to zero places by <code>round_num</code>.<br/>     But when a purchase of security equity is necessary, then the internal if-else expression evaluates false, and the else expression executes. The <code>order_quantity</code> variable and the trade are captured by <code>format!("Buy {}", order_quantity)</code> as a <code>String</code>, which is appended to <code>orders_vec</code>. The total cost of the trade is captured by <code>Adjustment_Cashflow</code>: <code>round_num(-1.0 * (sim_stock_prices[i] * order_quantity + commission_cost), 2)</code>, which is appended to <code>Adjustment_Cashflow</code>. The <code>Adjustment_Cashflow</code> vector is used to update <code>cash_balance</code> and <code>Liabilities</code>, and respectively, the new cash balance is appended to <code>Cash_Blance_vec</code> and the new Liabilites is appended to <code>Liabilities_vec</code>. When the internal if-else expression evaluates true, then no security equity purchase is necessary, and the "No order" <code>String</code> is appended to <code>orders_vec</code>. Since no order occured, there would be no change to <code>cash_balance</code> or <code>liabilities</code>, so their respective values are appended to their respective vectors.<br/>     In either case, the total asset value of the portfolio is always recomputed during each iteration, and the <code>quantity_of_stock</code> is appended to <code>stock_quantity_vec</code>, and $\Delta_{new}$ (<code>Delta</code>) is assigned to <code>delta_old</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">274</span><span class="w">       </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="o">+</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">BSM_call_option_price_vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">100.0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">275</span><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="mi">276</span><span class="w">           </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">277</span><span class="w">           </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="mi">278</span><span class="w">           </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">     </span>
<span class="mi">279</span><span class="w">           </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">280</span><span class="w">       </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="mi">281</span><span class="w">           </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Buy {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="mi">282</span><span class="w">           </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">283</span><span class="w">           </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">284</span><span class="w">           </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">285</span><span class="w">           </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">286</span><span class="w">           </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">287</span><span class="w">       </span><span class="p">}</span>
<span class="mi">288</span><span class="w">       </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="mi">289</span><span class="w">       </span><span class="n">delta_old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delta</span><span class="p">;</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     If discerned that $\Delta_{\text{new}}$ is less than $\Delta_{\text{old}}$, then the conditional expression evaluates to false, which indicates that shares of the security equity need to be sold to restore the Delta hedge position. Eq. (70) is used to compute <code>order_quantity</code>. The following mathematical expression is used to update <code>quantity_of_stock</code>:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\verb|order_quantity| = \verb|round_num((quantity_of_stock - order_quantity).max(0.0),0)|. \tag{73}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">To prevent <code>quantity_of_stock</code> from becoming negative during the simulation, the <code>.max(0.0)</code> method was used to establish a lower boundary. This ensures that if the computed <code>quantity_of_stock</code> value becomes negative, it will instead return $0.0$. Since in the real world, a market participant cannot sell security equity that they do not own themself, unless they were engaging in short selling, which is beyond the scope of this simulation.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">290</span><span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delta_old</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="p">{</span>
<span class="mi">291</span><span class="w">       </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">quantity_of_call_option</span><span class="o">*</span><span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="n">delta_old</span><span class="o">-</span><span class="n">delta</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">   </span>
<span class="mi">292</span><span class="w">       </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">((</span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">).</span><span class="n">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     The selling process is similar to the buying process. When the internal if-else expression evaluates false, then else expression executes, just like in the buying process. The <code>order_quantity</code> variable and the trade are captured by <code>format!("Sell {}", order_quantity)</code> as a <code>String</code>, which is appended to <code>orders_vec</code>. But since we are selling the security equity for cash, the mathematical expression that compute <code>Adjustment_Cashflow</code> changes to:</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">302</span><span class="w">           </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">Same as the buying process, the <code>Adjustment_Cashflow</code> vector is used to update <code>cash_balance</code> and <code>Liabilities</code> variables, which are appended to their vectors, <code>Cash_Blance_vec</code> and <code>Liabilities_vec</code> respectively. When the internal if-else expression evaluates true, then no security equity is sold, and the "No order" <code>String</code> is appended to <code>orders_vec</code>. Since no order occured, there would be no change to <code>cash_balance</code> or <code>liabilities</code>, so their respective values are appended to their respective vectors.<br/>     In either case, the total asset value of the portfolio is always recomputed during each iteration, and the <code>quantity_of_stock</code> is appended to <code>stock_quantity_vec</code>, and $\Delta_{new}$ (<code>Delta</code>) is assigned to <code>delta_old</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">293</span><span class="w">       </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="o">+</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">BSM_call_option_price_vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">100.0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">294</span><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="mi">295</span><span class="w">           </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">296</span><span class="w">           </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="mi">297</span><span class="w">           </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">298</span><span class="w">           </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">299</span><span class="w">       </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="mi">300</span><span class="w">           </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Sell {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="mi">301</span><span class="w">           </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">302</span><span class="w">           </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">303</span><span class="w">           </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">304</span><span class="w">           </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">305</span><span class="w">           </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">306</span><span class="w">       </span><span class="p">}</span><span class="w">  </span>
<span class="mi">307</span><span class="w">       </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="mi">308</span><span class="w">       </span><span class="n">delta_old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delta</span><span class="p">;</span>
<span class="mi">309</span><span class="w">   </span><span class="p">}</span>
<span class="mi">310</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=5350964f-fe1d-4c1e-8661-93e938658f90">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     Although the time-span between February 18, 2025, and March 21, 2025, is 32 days, the simulation can be executed for a shorter peroid of time, if so desired. For example, the simulation could be run for only 10 days, and it would still function as expected. However, in such a case, the Microsoft (MSFT) call option contract would not reach it maturation date by the end of the simulation. Consequently, the market participant would not have the opportunity to exercise the call option contract in such as case.<br/>     To account for simulations that do not reach a call option's maturity date, we introduced an additional <code>usize</code> variable named <code>sim_length</code>. This variable ensures that the final iteration of the simulation align congruently with the available time-span. If <code>number_of_sims</code> equals the total number of trading days between <code>current_date</code> and <code>date</code>, which is represented by <code>days_since_epoch</code> or <code>time_span.len()</code> - then the simulation reaches the maturation date. In that case, <code>sim_length</code> is set equal to <code>number_of_sims - 1</code>, so that the last trading day can be used by the market participant to decide whether to exercise the call option contract. This exercise decision is represented by another nested conditional expression, which determines the decision upon a comparison of the <code>sim_stock_prices[i]</code> and <code>strike_price</code>. If <code>sim_stock_prices[i]</code> exceeds <code>strike_price</code> then the market participant would exercise the call option contract. If <code>strike_price</code> exceeds <code>sim_stock_prices[i]</code>, then the market participant would not exercise the call option contract, and furthermore, the call option contract would lose all its market value.<br/>     In the case when the simulation does not reach the maturation date, <code>sim_length</code> is set equal to <code>number_of_sims</code>. This means that the market participant would not be given the option to exercise the call option contract, as it has not reach it maturation date, and the simulation terminates prior to the maturation date.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">259</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">sim_length</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">number_of_sims</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">time_span</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="mi">260</span><span class="w">       </span><span class="n">number_of_sims</span><span class="o">-</span><span class="mi">1</span><span class="w">  </span>
<span class="mi">261</span><span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">       </span>
<span class="mi">262</span><span class="w">       </span><span class="n">number_of_sims</span>
<span class="mi">263</span><span class="w">   </span><span class="p">};</span>
<span class="mi">264</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b20eb997-7d5f-4578-b818-68bd29afafb4">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     As discussed, this nested conditional expression checks whether the simulation has reached the maturation date of the call option contract. For that to be the case two conditions must hold true:</p>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li>1. <code>i == sim_length</code>: Confirms that the simulation has reached the last trading day.</li>
<li>2. <code>round_num(time_span[i], 4) == end_time</code>: Verifies that the time-step <code>time_span[i]</code> matches the value of the <code>end_time</code> variable. Recall that <code>end_time</code> was set equal to $0.0001$. Therefore for this condition to evaluate true, <code>time_span[i]</code> must equal $0.0001$.</li>
</ol>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">311</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">end_time</span><span class="w"> </span><span class="p">{</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     If <code>sim_stock_prices[i]</code> exceeds <code>strike_price</code> at the maturation date, than the call option contract is in-the-money (ITM), and so, the market participant would exercise the call option contract. By exercising the call option contract, the market participant purchases $100$ shares of the security equity at the value of the strike price (<code>strike_price</code>). <code>order_quantity</code> is set equal to <code>quantity_of_call_options*100.0</code>. The <code>order_quantity</code> is used to update <code>quantity_of_stock</code>: <code>quantity_of_stock += order_quantity</code>.<br/>     For a final time, the value of the portfolio is recomputed using the following mathematical expression:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\verb|Assets| = \verb|sim_stock_prices[i]| \times \verb|quantity_of_stock|. \tag{74}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Since the call option contract was exercised by the market participant, its market value become zero, replaced by the value of the 100 shares of the security equity. The new order is captured by <code>format!("Exercised call options <br/> Buy {}", order_quantity)</code>, and is appended to <code>orders_vec</code>. The <code>Adjustment_Cashflow</code> variable is computed, and used to update <code>cash_balance</code> and <code>Liabilities</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">312</span><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">strike_price</span><span class="w"> </span><span class="p">{</span>
<span class="mi">313</span><span class="w">          </span><span class="c1">// Exercised the Call options</span>
<span class="mi">314</span><span class="w">          </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="p">;</span>
<span class="mi">315</span><span class="w">          </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">;</span>
<span class="mi">316</span><span class="w">          </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="mi">317</span><span class="w">          </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">318</span><span class="w">          </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Exercised call options &lt;br/&gt; Buy {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="mi">319</span><span class="w">          </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">strike_price</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">320</span><span class="w">          </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">321</span><span class="w">          </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">322</span><span class="w">          </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="mi">323</span><span class="w">          </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     If <code>strike_price</code> exceeds <code>sim_stock_prices[i]</code> at the maturation date, than the call option contract is out-the-money, and therefore, becomes worthless. In this scenario, the market participant would choose not to exercise the call option contract. Exercising the call option contract would require purchasing the underlying security equity at a price higher than the prevailing market price, resulting in a loss equal to <code>sim_stock_prices[i] - strike_price</code>.<br/>     Since the call option contract was not exercised, the <code>quantity_of_stock</code> variable remains unchanged, and its value is appended to <code>stock_quantity</code> vector. A "No order" <code>String</code> is appended to <code>orders_vec</code> to indicate that the call option contract was not exercised. Since no trade occurred, a cash adjustment of $0.0$ is appended to <code>Adjustment_Cashflow</code>. The previous value for <code>cash_balance</code> and <code>Liabilities</code> are also appended to their respective vectors. And lastly, the portfolio's value is recomputed using the following mathematical expression:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\verb|Assets| = \verb|sim_stock_prices[i]| \times \verb|quantity_of_stock|. \tag{75}$$</p>
<p style="text-align: justify;font-family: Times New Roman;">And yet again the value of the portfolio is <code>sim_stock_prices[i]*quantity_of_stock</code>.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">324</span><span class="w">       </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strike_price</span><span class="w"> </span><span class="p">{</span>
<span class="mi">325</span><span class="w">          </span><span class="c1">// Did not exercise the Call options</span>
<span class="mi">326</span><span class="w">          </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="mi">327</span><span class="w">          </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">328</span><span class="w">          </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="mi">329</span><span class="w">          </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">330</span><span class="w">          </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">331</span><span class="w">          </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="mi">332</span><span class="w">       </span><span class="p">}</span>
<span class="mi">333</span>
<span class="mi">334</span><span class="w">     </span><span class="p">}</span>
<span class="mi">335</span><span class="w">   </span><span class="p">}</span>
<span class="mi">336</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=8fe28672-0b1f-437d-a739-e68f3d9c51ec">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     A <code>Vec&lt;String&gt;</code> vector was created to store the column headers for a HashMap. These column headers corresponds to simulation parameters, providing a descriptive and informative labels to the Delta hedge initial conditions.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">232</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">hashmap_headers</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span>
<span class="mi">233</span><span class="w">       </span><span class="s">"quantity of stock"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"current stock price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Strike price"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Actual Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="mi">234</span><span class="w">       </span><span class="s">"Implied Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Risk-free interest rate"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Market Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">    </span>
<span class="mi">235</span><span class="w">       </span><span class="s">"BSM Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Option Delta"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="mi">236</span><span class="w">       </span><span class="s">"curent date (Y-M-D)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="fm">format!</span><span class="p">(</span><span class="s">"maturation date (Y-M-D) &lt;br/&gt;(T={})"</span><span class="p">,</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)),</span><span class="w"> </span><span class="s">"Times (days)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="mi">237</span><span class="w">       </span><span class="s">"Liabilities ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Assets ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Cash Balance ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">()</span>
<span class="mi">238</span><span class="w">   </span><span class="p">];</span>
<span class="mi">239</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     The <code>HashMap</code> named <code>sim_parameters</code>, was initialized using <code>HashMap::new()</code>. Each key in the <code>HashMap</code> corresponds to a descriptive column header from <code>hashmap_headers</code>, while the associated values represent the simulation parameter. The <code>insert</code> function was used to populate the <code>HashMap</code> with key-value pairs.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">240</span><span class="w">   </span><span class="c1">// Simulation's parameters HashMap</span>
<span class="mi">241</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sim_parameters</span>::<span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span>::<span class="n">new</span><span class="p">();</span><span class="w">   </span>
<span class="mi">242</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"quantity of stock"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="mf">0.0.</span><span class="n">to_string</span><span class="p">());</span><span class="w">        </span>
<span class="mi">243</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"quantity of call option"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">244</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"current stock price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">to_string</span><span class="p">());</span><span class="w">    </span>
<span class="mi">245</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Strike price"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">strike_price</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span><span class="w">    </span>
<span class="mi">246</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"BSM Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">BSM_option_price</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">247</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Market Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">market_option_price</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">248</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Option Delta"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">249</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Actual Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">250</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Implied Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">251</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Risk-free interest rate"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">252</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"curent date (Y-M-D)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">current_date</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">253</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"maturation date (Y-M-D) &lt;br/&gt;(T={})"</span><span class="p">,</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)),</span><span class="w"> </span><span class="n">maturation_date</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">254</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Times (days)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">255</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Liabilities ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="n">Liabilities</span><span class="p">.</span><span class="n">abs</span><span class="p">()).</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">256</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Assets ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">Assets</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="mi">257</span><span class="w">   </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Cash Balance ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">cash_balance</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c5fd4c19-3929-4929-8559-db7183018fba">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The HashMap <code>sim_parameters</code> and <code>Vec&lt;String&gt;</code> vector <code>hashmap_headers</code> are passed into <code>display_hashmap</code>, which generates an <b>HTML table</b> from the contents of both data structures. The <code>disply_hashmap</code> function returns a <code>String</code> datatype of the generated HTML content. This HTML table provides a well-structure visual summary of the key simulation parameters.<br/>     A <b>Polar's dataframe</b> was created from the <code>Vec&lt;f64&gt;</code> vectors generated during the Delta hedge simulation. Upon the successful creation of the Polar's dataframe named <code>df</code>, it is passed into <code>display_dataframe</code> function. The <code>display_dataframe</code> function transform the dataframe into an <b>HTML table</b>, incorporating both the column headers and corresponding data. This function also returns a <code>String</code> datatype containing the HTML representation of the dataframe.<br/>     The HTML strings generates from both functions, <code>html_content1</code> (from <code>display_hashmap</code>) and <code>html_content2</code> (from <code>display_dataframe</code>), are concatenated using the following Rust expression:</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">389</span><span class="w">   </span><span class="n">Let</span><span class="w"> </span><span class="n">combined_html_content</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}&lt;br/&gt;{}"</span><span class="p">,</span><span class="w"> </span><span class="n">html_content1</span><span class="p">,</span><span class="w"> </span><span class="n">html_content2</span><span class="p">);</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<p style="text-align: justify;font-family: Times New Roman;">     This concatenation marges the two HTML tables with a line break (<code>&lt;br/&gt;</code>) between them, ensuring a clear and organized visual display. The resulting string is assigned to <code>combined_html_content</code>. The combined string is printed to console using the <code>println!()</code> macro within the EvCxR environment (e.g., Rust Jupyter Notebook kernal). In such a development environment that supports HTML rending - such as <b>EvCxR</b> (aka the Rust Jupyter Notebook kernal) - the displayed output replicates the visual appearance of a b&gt;Pandas <code>pandas.DataFrame</code> [<a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" style='{{"color":"#95B9C7"}}'>22</a>] in a Jupyter Notebook. For all intents and purposes, this was our objective, we sought to replicate the same HTML rending and presentation style as that of a <code>pandas.DataFrame</code> [<a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" style='{{"color":"#95B9C7"}}'>22</a>] in a Jupyter Notebook.</p>
<p style="text-align: justify; font-family: Times New Roman;"></p>
<hr/>
<div class="highlight"><pre><span></span><span class="mi">372</span><span class="w">   </span><span class="c1">// Creates the html display</span>
<span class="mi">373</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">html_content1</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="n">display_hashmap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sim_parameters</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hashmap_headers</span><span class="p">);</span>
<span class="mi">374</span><span class="w">         </span>
<span class="mi">375</span><span class="w">   </span><span class="c1">// Creates the Polars dataframe from the Polars series       </span>
<span class="mi">376</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">html_content2</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">DataFrame</span>::<span class="n">new</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="n">Index</span><span class="p">,</span><span class="w"> </span><span class="n">Time</span><span class="p">,</span><span class="w"> </span><span class="n">option_price</span><span class="p">,</span><span class="w"> </span><span class="n">stock_price</span><span class="p">,</span><span class="w"> </span><span class="n">Delta</span><span class="p">,</span><span class="w"> </span><span class="n">Quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="n">Orders</span>
<span class="mi">377</span><span class="w">                                                        </span><span class="p">,</span><span class="w"> </span><span class="n">Cashflow</span><span class="p">,</span><span class="w"> </span><span class="n">Balance</span><span class="p">,</span><span class="w"> </span><span class="n">p_balance</span><span class="p">,</span><span class="w"> </span><span class="n">n_balance</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="mi">378</span><span class="w">       </span><span class="nb">Ok</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="mi">379</span><span class="w">          </span><span class="c1">// Prints the Polars dataframe to console if successful</span>
<span class="mi">380</span><span class="w">          </span><span class="n">display_dataframe</span><span class="p">(</span><span class="o">&amp;</span><span class="n">df</span><span class="p">)</span>
<span class="mi">381</span><span class="w">       </span><span class="p">}</span>
<span class="mi">382</span><span class="w">       </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">                </span>
<span class="mi">383</span><span class="w">           </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error creating DataFrame: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="mi">384</span><span class="w">           </span><span class="s">""</span><span class="p">.</span><span class="n">to_string</span><span class="p">()</span>
<span class="mi">385</span><span class="w">       </span><span class="p">}</span>
<span class="mi">386</span><span class="w">   </span><span class="p">};</span>
<span class="mi">387</span>
<span class="mi">388</span><span class="w">   </span><span class="c1">// Combines the html content and displays it</span>
<span class="mi">389</span><span class="w">   </span><span class="n">Let</span><span class="w"> </span><span class="n">combined_html_content</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}&lt;br/&gt;{}"</span><span class="p">,</span><span class="w"> </span><span class="n">html_content1</span><span class="p">,</span><span class="w"> </span><span class="n">html_content2</span><span class="p">);</span>
<span class="mi">390</span><span class="w">   </span><span class="fm">println!</span><span class="p">(</span><span class="s">"EVCXR_BEGIN_CONTENT text/html</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">EVCXR_END_CONTENT"</span><span class="p">,</span><span class="w"> </span><span class="n">combined_html_content</span><span class="p">);</span>
<span class="mi">391</span>
</pre></div>
<hr/>
<p style="text-align: justify; font-family: Times New Roman;"></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e6a847f6-c1af-4944-bf35-ddf585300a05">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [121]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-Rust"><pre><span></span><span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="k">struct</span> <span class="nc">AlphaVantageResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"Meta Data"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">meta_data</span>: <span class="nc">MetaData</span><span class="p">,</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"Time Series (Daily)"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">time_series</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">StockData</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="k">struct</span> <span class="nc">MetaData</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"2. Symbol"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">symbol</span>: <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="k">struct</span> <span class="nc">StockData</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"1. open"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">open</span>: <span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"2. high"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">high</span>: <span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"3. low"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">low</span>: <span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="cp">#[serde(rename = </span><span class="s">"4. close"</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">close</span>: <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="k">struct</span> <span class="nc">FREDResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">observations</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Observations</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[derive(Deserialize, Debug)]</span>
<span class="k">struct</span> <span class="nc">Observations</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">date</span>: <span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">value</span>: <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">retrieve_stock_data</span><span class="p">(</span><span class="n">symbol</span>:<span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt;  <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="p">(</span><span class="n">NaiveDate</span><span class="p">,</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Alphavantage api key</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">api_key</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"Your API Key"</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Constructs the url</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">        </span><span class="s">"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&amp;symbol={}&amp;apikey={}"</span><span class="p">,</span>
<span class="w">        </span><span class="n">symbol</span><span class="p">,</span><span class="w"> </span><span class="n">api_key</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reqwest</span>::<span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">url</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">response</span><span class="p">.</span><span class="n">status</span><span class="p">().</span><span class="n">is_success</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Failed to fetch 1-Year T-Bill Interest rate data: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">status</span><span class="p">());</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">empty_dataset</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="p">(</span><span class="n">NaiveDate</span><span class="p">,</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">empty_dataset</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">json</span>:<span class="nc">AlphaVantageResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// If uncertain of size, just create an empty vector</span>
<span class="w">    </span><span class="c1">// with Vec::new()</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">combined</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="p">(</span><span class="n">NaiveDate</span><span class="p">,</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">new</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// create a vector of tuples (date, stock_price)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">time_series</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">json</span><span class="p">.</span><span class="n">time_series</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">stock_data</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">time_series</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">close_price</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock_data</span><span class="p">.</span><span class="n">close</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">parse</span>::<span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">parsed_date</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NaiveDate</span>::<span class="n">parse_from_str</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="s">"%Y-%m-%d"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">combined</span><span class="p">.</span><span class="n">push</span><span class="p">((</span><span class="n">parsed_date</span><span class="p">,</span><span class="w"> </span><span class="n">close_price</span><span class="p">));</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Sort the combined data by dates in descending order</span>
<span class="w">    </span><span class="n">combined</span><span class="p">.</span><span class="n">sort_by</span><span class="p">(</span><span class="o">|</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="mf">0.</span><span class="n">cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">.</span><span class="mi">0</span><span class="p">));</span>
<span class="w">    </span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">retrieve_DTB1YR_data</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// FRED (Federal Reserve Economic Data) api key</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">FRED_api_key</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"Your API Key"</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// FRED series id for the 52-week U.S. Treasury bill rate</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">series_id</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"DTB1YR"</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">        </span><span class="s">"https://api.stlouisfed.org/fred/series/observations?series_id={}&amp;api_key={}&amp;file_type=json"</span><span class="p">,</span>
<span class="w">        </span><span class="n">series_id</span><span class="p">,</span><span class="w"> </span><span class="n">FRED_api_key</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reqwest</span>::<span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">url</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">response_json</span>:<span class="nc">FREDResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">interest_rate_data</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">new</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">interest_data</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">response_json</span><span class="p">.</span><span class="n">observations</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">interest_rate</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">interest_data</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interest_rate</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">parse</span>::<span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">interest_rate_data</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* Returns the most recent 1YR Treasury Bill Interest rate and date</span>
<span class="cm">    if let Some(latest) = response_json.observations.last() {</span>
<span class="cm">        println!("Latest 1-YR Treasury Bill interest rate: {}% on {}", latest.value, latest.date);</span>
<span class="cm">    } else {</span>
<span class="cm">        println!("No data found for the specific series id.");</span>
<span class="cm">    } */</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">interest_rate_data</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ticker_symbol</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"MSFT"</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Using a runtime to block and wait for the async function's result</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tokio</span>::<span class="n">runtime</span>::<span class="n">Runtime</span>::<span class="n">new</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">stock_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">rt</span><span class="p">.</span><span class="n">block_on</span><span class="p">(</span><span class="n">retrieve_stock_data</span><span class="p">(</span><span class="n">ticker_symbol</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Failed to retrieve stock data: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w">       </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="cm">/* When retrieve_DTB1YR_data() only returned ()</span>
<span class="cm">    In this iteration retrieve_DTB1YR_data() only returned the last 1-YR T-bill interest rate as a print to console</span>
<span class="cm">    if let Err(e) = rt.block_on(retrieve_DTB1YR_data()) {</span>
<span class="cm">        eprintln!("Failed to retrieve interest rate data: {}", e);</span>
<span class="cm">    }</span>
<span class="cm">    */</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">rt</span><span class="p">.</span><span class="n">block_on</span><span class="p">(</span><span class="n">retrieve_DTB1YR_data</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">interest_data</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">interest_data</span><span class="p">,</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Failed to retrieve 1YR Treasury Bill Interest rate data: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Extract the sorted dates and stock prices</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">dates</span><span class="p">,</span><span class="w"> </span><span class="n">stock_prices</span><span class="p">)</span>: <span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stock_data</span>
<span class="w">        </span><span class="p">.</span><span class="n">into_iter</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">price</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">unzip</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Calculates the logged returns, expected return and variance</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">logged_returns</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">stock_prices</span><span class="p">.</span><span class="n">len</span><span class="p">());</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">stock_prices</span><span class="p">.</span><span class="n">windows</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">logged_returns</span><span class="p">.</span><span class="n">push</span><span class="p">((</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="n">ln</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">variance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">var</span><span class="p">(</span><span class="n">logged_returns</span><span class="p">.</span><span class="n">clone</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">variance</span><span class="p">,</span>
<span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Not enough data to calculate a variance."</span><span class="p">);</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="c1">// Provides a default value</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">volatility</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">variance</span><span class="p">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">*</span><span class="mf">252.0_</span><span class="k">f64</span><span class="p">.</span><span class="n">sqrt</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">expected_return</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="p">(</span><span class="n">logged_returns</span><span class="p">)</span><span class="o">+</span><span class="mf">0.5</span><span class="o">*</span><span class="n">variance</span><span class="p">)</span><span class="o">*</span><span class="mf">252.0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">//  Computes the time span between current date and Maturation date of the call option</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">current_date</span>:<span class="nc">NaiveDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Local</span>::<span class="n">now</span><span class="p">().</span><span class="n">date_naive</span><span class="p">();</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">date</span>:<span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"2025-3-21"</span><span class="p">;</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">end_time</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">maturation_date</span>:<span class="nc">NaiveDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NaiveDate</span>::<span class="n">parse_from_str</span><span class="p">(</span><span class="o">&amp;</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="s">"%Y-%m-%d"</span><span class="p">).</span><span class="n">expect</span><span class="p">(</span><span class="s">"Failed to parse date."</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maturation_date</span><span class="p">.</span><span class="n">signed_duration_since</span><span class="p">(</span><span class="n">current_date</span><span class="p">).</span><span class="n">num_days</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">time_to_maturity</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">days_since_epoch</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="o">/</span><span class="mf">365.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">time_span</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linspace</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">end_time</span><span class="p">,</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rounded_time_span</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time_span</span>
<span class="w">        </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">time</span><span class="o">|</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// simulation parameters</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">number_of_sims</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">BSM_call_option_price_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">orders_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stock_quantity_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Cash_Blance_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Assets_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Liabilities_vec</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">with_capacity</span><span class="p">(</span><span class="n">number_of_sims</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sim_stock_prices</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">geometric_brownian_motion</span><span class="p">(</span>
<span class="w">        </span><span class="n">stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">expected_return</span><span class="p">,</span><span class="w"> </span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="n">number_of_sims</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Quantity of day that is desired from TB1YR</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">quantity_of_interest_data</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mi">252</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">decimal_rates</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">quantity_of_interest_data</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Converts only the desired quantity of the TB1YR dataset</span>
<span class="w">        </span><span class="n">TB1YR_data</span><span class="p">[</span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="o">-</span><span class="n">quantity_of_interest_data</span><span class="o">..</span><span class="p">]</span>
<span class="w">        </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">rate</span><span class="o">|</span><span class="w"> </span><span class="n">rate</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">collect</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Converts the entire TB1YR dataset</span>
<span class="w">        </span><span class="n">TB1YR_data</span>
<span class="w">        </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">rate</span><span class="o">|</span><span class="w"> </span><span class="n">rate</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">collect</span><span class="p">()</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">cir_parameters</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">estimate_cir_parameters</span><span class="p">(</span><span class="n">decimal_rates</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">risk_free_rate</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">TB1YR_data</span><span class="p">.</span><span class="n">last</span><span class="p">().</span><span class="n">unwrap_or</span><span class="p">(</span><span class="o">&amp;</span><span class="mf">0.0</span><span class="p">)</span><span class="o">/</span><span class="mf">100.0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Cox-Ingersoll-Ross model to simulate 52-week T-bill interest rate dynamics</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">cir_interest_rates</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CIR_model</span><span class="p">(</span>
<span class="w">        </span><span class="n">risk_free_rate</span><span class="p">,</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">number_of_sims</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="c1">// let risk_free_rate:f64 = TB1YR_data.last().expect("Could not access the last element.")/100.0; // only accesses the last interest rate</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">strike_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">400.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">quantity_of_stock</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">order_quantity</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">commission_cost</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">market_option_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">16.00</span><span class="p">;</span><span class="w"> </span><span class="c1">// Actual Call Option price on market</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">cash_balance</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">100000.0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">implied_volatility</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">implied_volatility_call</span><span class="p">(</span>
<span class="w">        </span><span class="n">market_option_price</span><span class="p">,</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mf">0.35</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">BSM_option_price</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Gcdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span>: <span class="kt">f64</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">std</span>::<span class="kt">f64</span>::<span class="n">consts</span>::<span class="n">PI</span><span class="p">).</span><span class="n">sqrt</span><span class="p">())</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">x</span><span class="p">.</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">exp</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">Greek_delta</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="n">risk_free_rate</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">delta_old</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Initial asset and liabilities calculation</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Liabilities</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">commission_cost</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">market_option_price</span><span class="o">*</span><span class="mf">100.0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">Assets</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">market_option_price</span><span class="o">*</span><span class="mf">100.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Cashflow</span>:<span class="kt">f64</span> <span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">Liabilities</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">hashmap_headers</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span>
<span class="w">        </span><span class="s">"quantity of stock"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"current stock price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Strike price"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Actual Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">        </span><span class="s">"Implied Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Risk-free interest rate"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Market Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">        </span><span class="s">"BSM Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Option Delta"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">        </span><span class="s">"curent date (Y-M-D)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="fm">format!</span><span class="p">(</span><span class="s">"maturation date (Y-M-D) &lt;br/&gt;(T={})"</span><span class="p">,</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)),</span><span class="w"> </span><span class="s">"Times (days)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span>
<span class="w">        </span><span class="s">"Liabilities ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Assets ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="s">"Cash Balance ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">()</span>
<span class="w">    </span><span class="p">];</span><span class="w"> </span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Simulation's parameters HashMap </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sim_parameters</span>:<span class="nc">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"quantity of stock"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="mf">0.0.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"quantity of call option"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"current stock price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Strike price"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">strike_price</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"BSM Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">BSM_option_price</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Market Option price ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">market_option_price</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Option Delta"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Actual Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">volatility</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Implied Volatility"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Risk-free interest rate"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"curent date (Y-M-D)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">current_date</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"maturation date (Y-M-D) &lt;br/&gt;(T={})"</span><span class="p">,</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_to_maturity</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)),</span><span class="w"> </span><span class="n">maturation_date</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Times (days)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Liabilities ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="n">Liabilities</span><span class="p">.</span><span class="n">abs</span><span class="p">()).</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Assets ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">Assets</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">sim_parameters</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Cash Balance ($)"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w"> </span><span class="n">cash_balance</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sim_length</span>:<span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">number_of_sims</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">time_span</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">number_of_sims</span><span class="o">-</span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">number_of_sims</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Simulation</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">number_of_sims</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BSM_call_option_price_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">BSM_Call_Opt</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="w">                                                 </span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">Greek_delta</span><span class="p">(</span><span class="n">Gcdf</span><span class="p">,</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">strike_price</span><span class="p">,</span><span class="w"> </span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">implied_volatility</span><span class="p">,</span><span class="w"> </span><span class="n">cir_interest_rates</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="w">        </span><span class="n">delta_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">delta</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">delta_old</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="n">delta</span><span class="o">-</span><span class="n">delta_old</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">;</span>
<span class="w">            </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="o">+</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">BSM_call_option_price_vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">100.0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Buy {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">     </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="w">            </span><span class="n">delta_old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delta</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delta_old</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="n">delta_old</span><span class="o">-</span><span class="n">delta</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round_num</span><span class="p">((</span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">).</span><span class="n">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="o">+</span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="n">BSM_call_option_price_vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">100.0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Sell {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="w">            </span><span class="n">delta_old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delta</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sim_length</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">round_num</span><span class="p">(</span><span class="n">time_span</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">end_time</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">strike_price</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Exercised the Call options</span>
<span class="w">                </span><span class="n">order_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quantity_of_call_options</span><span class="o">*</span><span class="mf">100.0</span><span class="p">;</span>
<span class="w">                </span><span class="n">quantity_of_stock</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">;</span>
<span class="w">                </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="w">                </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Exercised call options &lt;br/&gt; Buy {}"</span><span class="p">,</span><span class="w"> </span><span class="n">order_quantity</span><span class="p">));</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">strike_price</span><span class="o">*</span><span class="n">order_quantity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commission_cost</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">cash_balance</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Adjustment_Cashflow</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strike_price</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Did not exercise the Call options</span>
<span class="w">                </span><span class="n">stock_quantity_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">quantity_of_stock</span><span class="p">);</span>
<span class="w">                </span><span class="n">orders_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">"No order"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">                </span><span class="n">Adjustment_Cashflow</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">                </span><span class="n">Cash_Blance_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">cash_balance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Liabilities_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">Liabilities</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">                </span><span class="n">Assets_vec</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">round_num</span><span class="p">(</span><span class="n">sim_stock_prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Simulation's Polars dataframe</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">temp_index</span>:<span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="n">number_of_sims</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">i32</span><span class="p">).</span><span class="n">collect</span>::<span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Index"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">temp_index</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Time"</span><span class="p">,</span><span class="w"> </span><span class="n">rounded_time_span</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">number_of_sims</span><span class="p">].</span><span class="n">to_vec</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">option_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Option Price ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">BSM_call_option_price_vec</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">stock_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Stock Price ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sim_stock_prices</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Delta"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">delta_vec</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Quantity_of_stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Qty of Stock"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">stock_quantity_vec</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Orders"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">orders_vec</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Cashflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Cashflow&lt;br/&gt;Adjustment ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Adjustment_Cashflow</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">Balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Cash Balance ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Cash_Blance_vec</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">p_balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Assets ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Assets_vec</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">n_balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Series</span>::<span class="n">new</span><span class="p">(</span><span class="s">"Liabilities ($)"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Liabilities_vec</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    println!("Dates: \n {:?} \n", dates);</span>
<span class="cm">    println!("Received stock data: \n {:?} \n", stock_prices);</span>
<span class="cm">    // println!("Interest rate data: {:?}", TB1YR_data);</span>
<span class="cm">    println!(</span>
<span class="cm">        "Current stock price: ${} \t quantity of stock: {} \t initial investment: ${} \t total cost: {}", </span>
<span class="cm">        sim_stock_prices[0], quantity_of_stock, 0.0, 0.0</span>
<span class="cm">    );</span>
<span class="cm">    println!(</span>
<span class="cm">        "Option Price: {} \t current date: {} \t maturation date: {} (T = {})",</span>
<span class="cm">        0.0, current_date, maturation_date, time_to_maturity</span>
<span class="cm">    );</span>
<span class="cm">    println!("variance: {}", variance);</span>
<span class="cm">    println!("vol = variance.sqrt() = {}", variance.sqrt()); */</span>
<span class="w">        </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Volatility: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">volatility</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Expected return: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">expected_return</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"CIR parameters: {:?}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">cir_parameters</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Number of days between {} and {} is {} days."</span><span class="p">,</span><span class="w"> </span><span class="n">current_date</span><span class="p">,</span><span class="w"> </span><span class="n">maturation_date</span><span class="p">,</span><span class="w"> </span><span class="n">days_since_epoch</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Creates the html display</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">html_content1</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="n">display_hashmap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sim_parameters</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hashmap_headers</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Creates the Polars dataframe from the Polars series and the html display</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">html_content2</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">DataFrame</span>::<span class="n">new</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="n">Index</span><span class="p">,</span><span class="w"> </span><span class="n">Time</span><span class="p">,</span><span class="w"> </span><span class="n">option_price</span><span class="p">,</span><span class="w"> </span><span class="n">stock_price</span><span class="p">,</span><span class="w"> </span><span class="n">Delta</span><span class="p">,</span><span class="w"> </span><span class="n">Quantity_of_stock</span><span class="p">,</span><span class="w"> </span><span class="n">Orders</span>
<span class="w">                                                         </span><span class="p">,</span><span class="w"> </span><span class="n">Cashflow</span><span class="p">,</span><span class="w"> </span><span class="n">Balance</span><span class="p">,</span><span class="w"> </span><span class="n">p_balance</span><span class="p">,</span><span class="w"> </span><span class="n">n_balance</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Prints the Polars dataframe to console if successful</span>
<span class="w">            </span><span class="n">display_dataframe</span><span class="p">(</span><span class="o">&amp;</span><span class="n">df</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">"Error creating DataFrame: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="s">""</span><span class="p">.</span><span class="n">to_string</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Combines the html content and displays it</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">combined_html_content</span>:<span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}&lt;br/&gt;{}"</span><span class="p">,</span><span class="w"> </span><span class="n">html_content1</span><span class="p">,</span><span class="w"> </span><span class="n">html_content2</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"EVCXR_BEGIN_CONTENT text/html</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">EVCXR_END_CONTENT"</span><span class="p">,</span><span class="w"> </span><span class="n">combined_html_content</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    println!("The potential profit/Loss: ${}", </span>
<span class="cm">            round_num(Assets_vec.last().expect("Cannot access last element")+Liabilities_vec.last().expect("Cannot access last element"), 2)</span>
<span class="cm">            ); */</span>

<span class="p">}</span>
<span class="n">main</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Newton's Method - Number of iterations: 719
Volatility: 0.23215766895793064
Expected return: 0.17864323203724983
CIR parameters: [0.0070022575196388446, 0.044112698412698416, 0.0022277959040571033]

Number of days between 2025-02-17 and 2025-03-21 is 32 days.
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[121]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<table style="text-align: center; font-family: Times New Roman; font-size: 14px; border: 1px solid black; Padding: 5px;"><tr><td style="border-bottom: 1px solid black;"><b>quantity of stock:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">0</td><td style="border-bottom: 1px solid black;"><b>current stock price ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">408.43</td><td style="border-bottom: 1px solid black;"><b>Strike price:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">400</td><td style="border-bottom: 1px solid black;"><b>Actual Volatility:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">0.2322</td></tr><tr><td style="border-bottom: 1px solid black;"><b>Implied Volatility:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">0.2169</td><td style="border-bottom: 1px solid black;"><b>Risk-free interest rate:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">0.0409</td><td style="border-bottom: 1px solid black;"><b>Market Option price ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">16</td><td style="border-bottom: 1px solid black;"><b>BSM Option price ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">16.0044</td></tr><tr><td style="border-bottom: 1px solid black;"><b>Option Delta:</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">0.6517</td><td style="border-bottom: 1px solid black;"><b>curent date (Y-M-D):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">2025-02-17</td><td style="border-bottom: 1px solid black;"><b>maturation date (Y-M-D) <br/>(T=0.0877):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">2025-03-21</td><td style="border-bottom: 1px solid black;"><b>Times (days):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">32</td></tr><tr><td style="border-bottom: 1px solid black;"><b>Liabilities ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">1605</td><td style="border-bottom: 1px solid black;"><b>Assets ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">1600</td><td style="border-bottom: 1px solid black;"><b>Cash Balance ($):</b></td><td style="border-bottom: 1px solid black; border-right: 1px solid ">100000</td></tr></table><br/><br/><br/><table style="text-align: center; font-family: Times New Roman; font-size: 14px;"><tr style="border-bottom: 1px solid gray;"><th></th><th>Time</th><th>Option Price ($)</th><th>Stock Price ($)</th><th>Delta</th><th>Qty of Stock</th><th>Orders</th><th>Cashflow<br/>Adjustment ($)</th><th>Cash Balance ($)</th><th>Assets ($)</th><th>Liabilities ($)</th></tr><tr><td><b>0</b></td><td>0.0877</td><td>16</td><td>408.43</td><td>0.6601</td><td>66</td><td>Buy 66</td><td>-26961.38</td><td>73038.62</td><td>28556.38</td><td>-28566.38</td></tr><tr><td><b>1</b></td><td>0.0848</td><td>15.72</td><td>408.28</td><td>0.6594</td><td>66</td><td>No order</td><td>0</td><td>73038.62</td><td>28518.48</td><td>-28566.38</td></tr><tr><td><b>2</b></td><td>0.082</td><td>38.28</td><td>436.08</td><td>0.93</td><td>93</td><td>Buy 27</td><td>-11779.16</td><td>61259.46</td><td>44383.44</td><td>-40345.54</td></tr><tr><td><b>3</b></td><td>0.0792</td><td>39.52</td><td>437.51</td><td>0.9397</td><td>94</td><td>Buy 1</td><td>-442.51</td><td>60816.95</td><td>45077.94</td><td>-40788.05</td></tr><tr><td><b>4</b></td><td>0.0764</td><td>40.46</td><td>438.61</td><td>0.9474</td><td>95</td><td>Buy 1</td><td>-443.61</td><td>60373.34</td><td>45713.95</td><td>-41231.66</td></tr><tr><td><b>5</b></td><td>0.0735</td><td>34.01</td><td>431.81</td><td>0.9165</td><td>92</td><td>Sell 3</td><td>1290.43</td><td>61663.77</td><td>43127.52</td><td>-39941.23</td></tr><tr><td><b>6</b></td><td>0.0707</td><td>18.66</td><td>413.78</td><td>0.7475</td><td>75</td><td>Sell 17</td><td>7029.26</td><td>68693.03</td><td>32899.5</td><td>-32911.97</td></tr><tr><td><b>7</b></td><td>0.0679</td><td>27.07</td><td>424.34</td><td>0.8693</td><td>87</td><td>Buy 12</td><td>-5097.08</td><td>63595.95</td><td>39624.58</td><td>-38009.05</td></tr><tr><td><b>8</b></td><td>0.0651</td><td>20.09</td><td>416.13</td><td>0.7855</td><td>79</td><td>Sell 8</td><td>3324.04</td><td>66919.99</td><td>34883.27</td><td>-34685.01</td></tr><tr><td><b>9</b></td><td>0.0622</td><td>15.48</td><td>410.22</td><td>0.7057</td><td>71</td><td>Sell 8</td><td>3276.76</td><td>70196.75</td><td>30673.62</td><td>-31408.25</td></tr><tr><td><b>10</b></td><td>0.0594</td><td>28.99</td><td>426.98</td><td>0.9045</td><td>91</td><td>Buy 20</td><td>-8544.6</td><td>61652.15</td><td>41754.18</td><td>-39952.85</td></tr><tr><td><b>11</b></td><td>0.0566</td><td>15.95</td><td>411.45</td><td>0.7317</td><td>74</td><td>Sell 17</td><td>6989.65</td><td>68641.8</td><td>32042.3</td><td>-32963.2</td></tr><tr><td><b>12</b></td><td>0.0538</td><td>17.12</td><td>413.28</td><td>0.7639</td><td>77</td><td>Buy 3</td><td>-1244.84</td><td>67396.96</td><td>33534.56</td><td>-34208.04</td></tr><tr><td><b>13</b></td><td>0.0509</td><td>24.83</td><td>422.8</td><td>0.8849</td><td>89</td><td>Buy 12</td><td>-5078.6</td><td>62318.36</td><td>40112.2</td><td>-39286.64</td></tr><tr><td><b>14</b></td><td>0.0481</td><td>16.27</td><td>412.71</td><td>0.7652</td><td>77</td><td>Sell 12</td><td>4947.52</td><td>67265.88</td><td>33405.67</td><td>-34339.12</td></tr><tr><td><b>15</b></td><td>0.0453</td><td>12.83</td><td>408.32</td><td>0.6949</td><td>70</td><td>Sell 7</td><td>2853.24</td><td>70119.12</td><td>29865.4</td><td>-31485.88</td></tr><tr><td><b>16</b></td><td>0.0425</td><td>25.3</td><td>423.82</td><td>0.9124</td><td>92</td><td>Buy 22</td><td>-9329.04</td><td>60790.08</td><td>41521.44</td><td>-40814.92</td></tr><tr><td><b>17</b></td><td>0.0396</td><td>33.35</td><td>432.47</td><td>0.969</td><td>98</td><td>Buy 6</td><td>-2599.82</td><td>58190.26</td><td>45717.06</td><td>-43414.74</td></tr><tr><td><b>18</b></td><td>0.0368</td><td>33.27</td><td>432.48</td><td>0.9734</td><td>98</td><td>No order</td><td>0</td><td>58190.26</td><td>45710.04</td><td>-43414.74</td></tr><tr><td><b>19</b></td><td>0.034</td><td>56.6</td><td>456.04</td><td>0.9996</td><td>101</td><td>Buy 3</td><td>-1373.12</td><td>56817.14</td><td>51720.04</td><td>-44787.86</td></tr><tr><td><b>20</b></td><td>0.0312</td><td>52.94</td><td>452.42</td><td>0.9995</td><td>101</td><td>No order</td><td>0</td><td>56817.14</td><td>50988.42</td><td>-44787.86</td></tr><tr><td><b>21</b></td><td>0.0283</td><td>60.45</td><td>459.98</td><td>0.9999</td><td>101</td><td>No order</td><td>0</td><td>56817.14</td><td>52502.98</td><td>-44787.86</td></tr><tr><td><b>22</b></td><td>0.0255</td><td>49.46</td><td>449.04</td><td>0.9996</td><td>101</td><td>No order</td><td>0</td><td>56817.14</td><td>50299.04</td><td>-44787.86</td></tr><tr><td><b>23</b></td><td>0.0227</td><td>18.91</td><td>418.02</td><td>0.9183</td><td>93</td><td>Sell 8</td><td>3339.16</td><td>60156.3</td><td>40766.86</td><td>-41448.7</td></tr><tr><td><b>24</b></td><td>0.0199</td><td>27.99</td><td>427.6</td><td>0.9869</td><td>100</td><td>Buy 7</td><td>-2998.2</td><td>57158.1</td><td>45559</td><td>-44446.9</td></tr><tr><td><b>25</b></td><td>0.017</td><td>27.97</td><td>427.66</td><td>0.9918</td><td>100</td><td>No order</td><td>0</td><td>57158.1</td><td>45563</td><td>-44446.9</td></tr><tr><td><b>26</b></td><td>0.0142</td><td>19.76</td><td>419.39</td><td>0.969</td><td>98</td><td>Sell 2</td><td>833.78</td><td>57991.88</td><td>43076.22</td><td>-43613.12</td></tr><tr><td><b>27</b></td><td>0.0114</td><td>11.8</td><td>411.09</td><td>0.8874</td><td>90</td><td>Sell 8</td><td>3283.72</td><td>61275.6</td><td>38178.1</td><td>-40329.4</td></tr><tr><td><b>28</b></td><td>0.0086</td><td>23.95</td><td>423.8</td><td>0.9982</td><td>101</td><td>Buy 11</td><td>-4666.8</td><td>56608.8</td><td>45198.8</td><td>-44996.2</td></tr><tr><td><b>29</b></td><td>0.0057</td><td>16.25</td><td>416.14</td><td>0.9924</td><td>100</td><td>Sell 1</td><td>411.14</td><td>57019.94</td><td>43239</td><td>-44585.06</td></tr><tr><td><b>30</b></td><td>0.0029</td><td>0.33</td><td>394.89</td><td>0.14</td><td>15</td><td>Sell 85</td><td>33560.65</td><td>90580.59</td><td>5956.35</td><td>-11024.41</td></tr><tr><td><b>31</b></td><td>0.0001</td><td>0</td><td>391.35</td><td>0</td><td>15</td><td>No order</td><td>0</td><td>90580.59</td><td>5870.25</td><td>-11024.41</td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=60aa3f2e-ce0f-4d2a-8340-f02a883ef8c6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">     The result of the Delta hedge simulation indicates a <b>cash balance</b> of \$90,580.59 and a portfolio with <b>total assets</b> valued at \$5,870.25 and <b>total liabilities</b> amounting to \$11,024.41. In this scenario, since the total assets do not exceed the total liabilities, the <b>potential realized loss</b> is computed as:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\text{Potential Loss} = \text{Total Assets} - \text{Total Liabilites} = 5,870.25 - 11,024.41 = -\$ 5,154.16.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">However, when the associated cost of acquiring the MSFT call option contract, \$1,605.00, is removed from the total liabilities, the adjusted potential loss becomes:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$-5,154.16 + 1,605.00 = -\$ 3,549.16.$$</p>
<p style="text-align: justify;font-family: Times New Roman;">In other words, under this specific scenario, the Delta hedge strategu proved to be unprofitable.<br/>     Interestingly enough, if the market participant had chosen to simply acquire the MSFT call option contract without implementing any hedging stratey what-so-ever, the <b>maximum potential loss</b> would have been limited to the value of the option contract premium and the trading fee - \$1,605.00. In contrast, by employing the Delta hedge strategy in this particular scenario, the potential loss was more than doubled, \$3,549.16, highlighting the fact that the Delta hedge strategy does not always gaurantee profitability.<br/>     It is also crucial to interpret this result with significant caution. Typically, a Delta hedge simulation would be executed thousands of times, all to obtain a distribution of potential outcomes. The aggregated results would then be plotted as a <b>histogram</b>, and various <b>statistical metrics</b> - such as mean, variance, skewness and CVAR (Conditional Value at Risk) - would be computed to evaluate the overall performance and profitability of the Delta hedge strategy for a given investment scenario.<br/>     Even more conventionally, the <b>profit and loss</b> (P&amp;L) of a Delta hedge simulation is computed using the following mathematical expression:</p>
<p style="text-align: justify;font-family: Times New Roman;">$$\text{P\&amp;L} = \int_{0}^{T} \frac{S_{t}^{2}}{2} \frac{\partial^{2} C(S_{t},t)}{\partial S_{t}^{2}} \big( \sigma_{\text{imp}}^{2} - \sigma_{t}^{2} \big).$$</p>
<p style="text-align: justify;font-family: Times New Roman;">Each simulation of the Delta hedge strategu produces a single P&amp;L value. In a typical multi-simulation the computed P&amp;L values are aggregated within a histogram plot. And as mentioned an statistical analysis of this P&amp;L distribution is performed to discern the overvall performance and profitability of the speculative investment.<br/>     Borrowing a histogram plot from <i>Generating Random Variables and Stochastic Processes</i> by Martin Haugh [<a href="https://www.columbia.edu/~mh2078/MonteCarlo/MCS_Generate_RVars.pdf" style='{{"color":"#95B9C7"}}'>23</a>]:</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c0fe62a2-f93d-44a0-bb84-b1e4c2c71b9c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<div style="text-align: center;">
<img alt="Hist." height="600" src="Generating_Random_Variables_and_Stochastic_Processes_by_Martin_Haugh_P_and_L_histogram.PNG" width="800"/>
<figcaption>Figure 6 - A borrowed P&amp;L histogram from <i>Generating Random Variables and Stochastic Processes</i> by Martin Haugh, of Columbia University.</figcaption>
</div>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e27302aa-3568-4035-9e00-38b56c23c1e2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;">The above histogram is a typical result of a multi-simulation. And as one can discern, the histogram can be very useful in discerning potential and expected profit and loss of implementing a Delta hedge strategy for a given speculative investment. The Delta hedging strategy does not gaurantee a normal profit, in others words a profit of zero; but it provides risk mitigation for price directional risk.<br/>     The potential profitability of a Delta hedge strategy depends on the difference between <i>historical volatility</i> and <i>implied volatility</i>. Recall that <i>Historical volatility</i> is the volatility that the security equity has already experienced in the past, it is a backward looking metric. While <i>implied volatility</i> is a forward looking metric, as it is the expectation of the market. Suppose a scenario where <i>historical volatility</i> exceeds <i>implied volatility</i>, the security equity has experience high price fluctuations in the past, but the market expected smaller price fluctuations in the present and future. This difference in actual volatility of the past, and the expected volatility of the present and future shifts the P&amp;L distribution leftwards, resulting in a decreased in the profitability of the Delta hedge strategy. In an opposite scenario, the P&amp;L distribution shifts rightwards, resulting in an increased in the overall profitability of the Delta hedge strategy.<br/>     Taking into consideration the example above by Martin Haugh, the difference in volatilies resulted in a two cases: (a) where the Detla hedge strategy is gauranteed a loss and worst the distribution is negatively skewed - so that loss has a lot of upside to it (e.g. the strategy can result in a large loss). (b) where the Delta hedge strategy is gauranteed a profit - but the probability mass of the P&amp;L distribution is centralized around the P&amp;L value three. Hence in case (b), the potential for profit is less than is the potential of loss in case (b).<br/>     In our specific scenario, the MSFT security equity had a <i>historical volatility</i> of $23.22\%$, while its <i>implied volatility</i> was $21.69\%$. Consequently, the <i>historical volatility</i> exceeded the <i>implied volatility</i>, indicating that the profitability of the Delta strategy wa inherently low. This outcome is entirely expected because when <i>historical volatility</i> exceeds the <i>implied volatility</i>, the Delta hedging strategy tends to underperform due to higher-than anticipated price fluctuations. This is due to the market pricing the option to cheaply compared to the actual price volatility of the security equity. Due to the incorrection expectation of the market: $\Delta$ which is based upon <i>implied volatility</i> is not able to capture all the resulting price directional risk, resulting in a higher risk exposure than expected.<br/>     Therefore, it makes perfect sense that, under theses condition, the Delta hedge strategy in our specific scenario resulted in a potential realized loss of -\$ 5,154.16.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d77b7b3f-8198-4cbc-a0cb-4e0c8557ec06">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman;">4. Conclusion</h2>
<p style="text-align: justify;font-family: Times New Roman;">     In this research article, we have explored the theoretical foundations and the numerical implementation of the Delta hedge strategy using the Black-Scholes-Merton model. Through detailed mathematical derivation we have delved into the mathematics, and the numerical and statistical methods required in numerically implementing the Black-Scholes-Merton model in Rust. And furthermore, through detailed derivation of the Newton-Raphson method for approximating <i>implied volatility</i>, alongside the implementation of Geometric brownian motion to model the price dynamics of the security equity, and the Cox-Ingersoll-Ross model to represent the interest rate dynamics of the risk-free interest rate (e.g. 52-Week Treasury bill), we were able to demonstrate how various market parameters influences option pricing and the Delta hedge trading strategy. The simulation framework, developed entirely within Rust and the EvCxR environment (e.g., Rust Jupyter Notebook kernal), provided a robust environment for analyzing a specific real-world scenario involving the Delta hedging strategy.<br/>     In Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>], the assumption is made that the Delta hedge position can be maintained through continuous adjustments and that the expected profit is a normal profit - an Economics term referring to zero economic profit. However, in real-wrodl financial markets, Delta hedge positions cannot be adjusted continuously due to market frictions, such as, transaction costs, liquidity constraints, and discrete trading invervals.<br/>     As a result, in practice, the Delta hedge strategy does not gaurantee a normal profit. Instead, it primary benefit lies in providing risk mitigation against price directional risk by dynamically adjusting the underlying asset's exposure to match the option's sensitivity. The potential profitability of a Delta hedge strategy critically depends on the difference between the <i>historical volatility</i> and <i>implied volatility</i>. Specifically, when <i>implied volatility</i> exceeds <i>historical volatility</i>, the Delta hedge strategy is more likely to be profitable, as the option may be overpriced relative to the actual realized risk. Conversely, when <i>historical volatility</i> exceeds <i>implied volatility</i>, the Delta hedge strategy tends to underperform due to the higher-than-expected price fluctuation, as demonstrated in the simulation result of this research article.<br/>     That concludes this research article. We hope the reader found this online resource useful. And lastly, we hope the reader a wonderful day!</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=48dcf81a-4aa3-4471-876a-b9e866e9418d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p style="text-align: justify;font-family: Times New Roman;"><b>A side note:</b><br/>The more conventional approach relies heavily on the above P&amp;L formulation, and the corresponding histogram analysis, to discern performance and profitability. We chose to adopt a different methodology for assessing the profitability of the Delta hedge strategy. Our approach focused on analyzing the outcome of a single simulation scenario, so as a means to provide the reader a clear and direct perspective of the performance of the Delta hedge strategy in a single given context. With that being said, this single-run analysis does not possess the same robustness as a more typical multi-simulation study, and thus our results should be interpreted with caution.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a103b30f-62bb-4a10-9350-ba2bf3630ed5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 style="font-family: Times New Roman;">Possible Model Improvement:</h2>
<ol style="text-align: justify;font-family: Times New Roman; list-style-type:none;">
<li><b>1. Addressing Volatility Dynamics:</b> In real-world financial markets, the volatility of a security equity is not constant but fluctuates over time. However in Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>] the security equity is modelled by the Geometric Brownian motion, which assumes a constant volatility. To address this limitation, the constant volatility $\sigma$ from Eq. (2) could be replaced with the Heston model [<a href="https://en.wikipedia.org/wiki/Heston_model" style='{{"color":"#95B9C7"}}'>24</a>]. The Heston model [<a href="https://en.wikipedia.org/wiki/Heston_model" style='{{"color":"#95B9C7"}}'>24</a>] is a stochastic differential equation that is used to model a security equity's volatility.</li>
<li><b>2. Enhancing Risk-Free Interest Rate Modeling:</b> The Cox-Ingersoll-Ross (CIR) model [<a href="https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf" style='{{"color":"#95B9C7"}}'>3</a>, <a href="https://en.wikipedia.org/wiki/Cox%E2%80%93Ingersoll%E2%80%93Ross_model" style='{{"color":"#95B9C7"}}'>4</a>] was utilized to simulate the dynamics of the risk-free interest rate (e.g. the 52-Week Treasury bill). However, an alternative approach could involve using the Chen model [<a href="https://en.wikipedia.org/wiki/Chen_model" style='{{"color":"#95B9C7"}}'>25</a>], which generalizes the CIR model by incorporating additional factors that better capture mean reversion, volatility fluctuations and market shocks. <b>Disclaimer:</b> I don't know how much better Chem model [<a href="https://en.wikipedia.org/wiki/Chen_model" style='{{"color":"#95B9C7"}}'>25</a>] is compared to CIR model [<a href="https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf" style='{{"color":"#95B9C7"}}'>3</a>, <a href="https://en.wikipedia.org/wiki/Cox%E2%80%93Ingersoll%E2%80%93Ross_model" style='{{"color":"#95B9C7"}}'>4</a>], so take this with a grain of salt.</li>
<li><b>3. Incorporating Dividends into the Black-Scholes PDE:</b> The famed Black-Scholes PDE from Black and Scholes (1973) [<a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf" style='{{"color":"#95B9C7"}}'>1</a>] assumes that the underlying assets possesses a zero-dividend yield. In Merton (1973) [<a href="https://www.maths.tcd.ie/~dmcgowan/Merton.pdf" style='{{"color":"#95B9C7"}}' target="_blank">2</a>], Robert C. Merton derived the Black-Scholes PDE with dividends formulation: </li>
</ol>
<p style="text-align: justify;font-family: Times New Roman;">$$\frac{\partial V(S_{t},t)}{\partial t} + (r-q) S_{t} \frac{\partial V(S_{t},t)}{\partial S_{t}} + \frac{1}{2}\sigma^{2} S_{t}^{2} \frac{\partial^{2} V(S_{t},t)}{\partial S_{t}^{2}} - rV(S_{t},t) = 0.$$</p>
<p style="margin: 2%;text-align: justify;font-family: Times New Roman;">In this modified PDE, $q$ represents the <b>continuous dividend yield</b> of the security equity. Implementing this formulation allows for more accurate option pricing for dividend-paying equity securities, thereby extending the applicability of the model to a <b>broader range of financial instruments</b>.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=0170edda-b241-4ca4-9aa6-f3c65d247ebf">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 style="font-family: Times New Roman;">      Citations:</h3>
<p style="text-align: justify;font-family: Times New Roman;"><br/></p>
<ul style="margin-left:3%;font-family: Times New Roman; list-style-type:none;">
<li>[1]: Black, Fischer. Scholes, Mryon. The Pricing of Options and Corporate Liabilities. The Journal of Political Economy, Vol. 81, No. 3 (May-June., 1973), pg. 637-654. April 4, 2023.<br/>Url: <a href="https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf">https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf</a></li>
<li>[2]: C. Merton, Robert. Theory of Rational Option Pricing. The Bell Journal of Economics and Management Science, Vol. 4, No. 1. (Spring, 1973), pg. 141-183.<br/>Url: <a href="https://www.maths.tcd.ie/~dmcgowan/Merton.pdf">https://www.maths.tcd.ie/~dmcgowan/Merton.pdf</a></li>
<li>[3]: C. Cox, John. E. Ingersoll, Jr., Jonathan. A. Ross, Stephen. A Theory of the Term Structure of Interest Rates. Econometrica, Vol. 53, No. 2 (March, 1985), pg. 385-407.<br/>Url: <a href="https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf">https://pages.stern.nyu.edu/~dbackus/BCZ/discrete_time/CIR_Econometrica_85.pdf</a></li>
<li>[4]: Cox-Ingersoll-Ross model. Wikipedia, November 10, 2024.<br/>Url: <a href="https://en.wikipedia.org/w/index.php?title=Cox%E2%80%93Ingersoll%E2%80%93Ross_model&amp;action=history">https://en.wikipedia.org/w/index.php?title=Cox%E2%80%93Ingersoll%E2%80%93Ross_model&amp;action=history</a></li>
<li>[5]: MathWorks. (2025). <i>Linspace function (MATLAB documentation)</i>. Retrieved February 15, 2025.<br/>Url: <a href="https://www.mathworks.com/help/matlab/ref/double.linspace.html">https://www.mathworks.com/help/matlab/ref/double.linspace.html</a></li>
<li>[6]: NumPy Developers. (2025). <i>numpy.linspace function (NumPy documentation)</i>. Retrieved February 15, 2025.<br/>Url: <a href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html">https://numpy.org/doc/stable/reference/generated/numpy.linspace.html</a></li>
<li>[7]: Riemann Sum. Wikipedia, November 1, 2024.<br/>Url: <a href="https://en.wikipedia.org/wiki/Riemann_sum">https://en.wikipedia.org/wiki/Riemann_sum</a></li>
<li>[8]: Riemann Integral. Wikipedia. February 5, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Riemann_integral">https://en.wikipedia.org/wiki/Riemann_integral</a></li>
<li>[9]: Peterson, Dave. Writing a Riemman Sum as an Integral. Themathdoctors.org. November 11, 2022.<br/>Url: <a href="https://www.themathdoctors.org/writing-a-riemann-sum-as-an-integral/">https://www.themathdoctors.org/writing-a-riemann-sum-as-an-integral/</a></li>
<li>[10]: Gaussian Quadrature. Wikipedia, January 14, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Gaussian_quadrature">https://en.wikipedia.org/wiki/Gaussian_quadrature</a></li>
<li>[11]: Sturm-Liouville Theory. Wikipedia. January 17, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Sturm%E2%80%93Liouville_theory">https://en.wikipedia.org/wiki/Sturm%E2%80%93Liouville_theory</a></li>
<li>[12]: Kronecker Delta. Wikipedia. January 23, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Kronecker_delta">https://en.wikipedia.org/wiki/Kronecker_delta</a></li>
<li>[13]: Jacobian matrix and determinant. Wikipedia. February 7, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant">https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant</a></li>
<li>[14]: Rodrigues' formula. Wikipedia. February 10, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Rodrigues%27_formula">https://en.wikipedia.org/wiki/Rodrigues%27_formula</a></li>
<li>[15]: Rust Project Developers. (2025). <i>Closures (Rust by Example documentation)</i>. Retrieved February 15, 2025.<br/>Url: <a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html">https://doc.rust-lang.org/rust-by-example/fn/closures.html</a></li>
<li>[16]: IEEE 754. Wikipedia. January 20, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/IEEE_754">https://en.wikipedia.org/wiki/IEEE_754</a></li>
<li>[17]: Marsaglia Polar method. Wikipedia. February 10, 2025.<br/>Url: <a href="https://en.wikipedia.org/wiki/Marsaglia_polar_method">https://en.wikipedia.org/wiki/Marsaglia_polar_method</a></li>
<li>[18]: Alpha Vantage. <i>Alpha Vantage API Documentation.</i> Retrieved February 17, 2025.<br/>Url: <a href="https://www.alphavantage.co/documentation/">https://www.alphavantage.co/documentation/</a></li>
<li>[19]: Federal Reserve Bank of St. Louis. <i>1-Year Treasury Constant Maturity Rate [DTB1YR].</i> FRED, Federal Reserve Bank of St. Louis. Retrieved February 17, 2025.<br/>Url: <a href="https://fred.stlouisfed.org/series/DTB1YR">https://fred.stlouisfed.org/series/DTB1YR</a></li>
<li>[20]: Yahoo Finance. <i>Microsoft Corportation (MSFT) options.</i> Retrieved February 17, 2025.<br/>Url: <a href="https://finance.yahoo.com/quote/MSFT/options/?date=1742515200">https://finance.yahoo.com/quote/MSFT/options/?date=1742515200</a></li>
<li>[21]: Süli, Endre, and David F. Mayers. An Introduction to Numerical Analysis. Cambridge: Cambridge University Press, 2003.<br/>Url: <a href="https://doi.org/10.1017/CBO9780511801181">https://doi.org/10.1017/CBO9780511801181</a></li>
<li>[22]: Pandas development team. <i>pandas.DataFrame -  Pandas Documentation</i>. Retrieved February 17, 2025.<br/>Url: <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html</a></li>
<li>[23]: Haugh, Martin. Generating Random Variables. Columbia University. February 17, 2025.<br/>Url: <a href="https://www.columbia.edu/~mh2078/MonteCarlo/MCS_Generate_RVars.pdf">https://www.columbia.edu/~mh2078/MonteCarlo/MCS_Generate_RVars.pdf</a></li>
<li>[24]: Heston Model. Wikipedia. May 28, 2024.<br/>Url: <a href="https://en.wikipedia.org/wiki/Heston_model">https://en.wikipedia.org/wiki/Heston_model</a></li>
<li>[25]: Chen Model. Wikipedia. May 24, 2024.<br/>Url: <a href="https://en.wikipedia.org/wiki/Chen_model">https://en.wikipedia.org/wiki/Chen_model</a></li>
</ul>
</div>
</div>
</div>
</div>
</main>
</body>
</html>
